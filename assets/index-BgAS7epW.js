(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function l(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(r){if(r.ep)return;r.ep=!0;const d=l(r);fetch(r.href,d)}})();function zu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bu={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function gy(){if(ip)return Tl;ip=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function l(a,r,d){var p=null;if(d!==void 0&&(p=""+d),r.key!==void 0&&(p=""+r.key),"key"in r){d={};for(var x in r)x!=="key"&&(d[x]=r[x])}else d=r;return r=d.ref,{$$typeof:i,type:a,key:p,ref:r!==void 0?r:null,props:d}}return Tl.Fragment=t,Tl.jsx=l,Tl.jsxs=l,Tl}var sp;function hy(){return sp||(sp=1,bu.exports=gy()),bu.exports}var u=hy(),Nu={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function xy(){if(lp)return Me;lp=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.iterator;function C(E){return E===null||typeof E!="object"?null:(E=N&&E[N]||E["@@iterator"],typeof E=="function"?E:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,H={};function M(E,J,fe){this.props=E,this.context=J,this.refs=H,this.updater=fe||_}M.prototype.isReactComponent={},M.prototype.setState=function(E,J){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,J,"setState")},M.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function O(){}O.prototype=M.prototype;function j(E,J,fe){this.props=E,this.context=J,this.refs=H,this.updater=fe||_}var ee=j.prototype=new O;ee.constructor=j,U(ee,M.prototype),ee.isPureReactComponent=!0;var ie=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function $(E,J,fe){var I=fe.ref;return{$$typeof:i,type:E,key:J,ref:I!==void 0?I:null,props:fe}}function V(E,J){return $(E.type,J,E.props)}function oe(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function Y(E){var J={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(fe){return J[fe]})}var ge=/\/+/g;function me(E,J){return typeof E=="object"&&E!==null&&E.key!=null?Y(""+E.key):J.toString(36)}function Se(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(ue,ue):(E.status="pending",E.then(function(J){E.status==="pending"&&(E.status="fulfilled",E.value=J)},function(J){E.status==="pending"&&(E.status="rejected",E.reason=J)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function k(E,J,fe,I,K){var te=typeof E;(te==="undefined"||te==="boolean")&&(E=null);var ce=!1;if(E===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(E.$$typeof){case i:case t:ce=!0;break;case v:return ce=E._init,k(ce(E._payload),J,fe,I,K)}}if(ce)return K=K(E),ce=I===""?"."+me(E,0):I,ie(K)?(fe="",ce!=null&&(fe=ce.replace(ge,"$&/")+"/"),k(K,J,fe,"",function(Ve){return Ve})):K!=null&&(oe(K)&&(K=V(K,fe+(K.key==null||E&&E.key===K.key?"":(""+K.key).replace(ge,"$&/")+"/")+ce)),J.push(K)),1;ce=0;var Ee=I===""?".":I+":";if(ie(E))for(var Ne=0;Ne<E.length;Ne++)I=E[Ne],te=Ee+me(I,Ne),ce+=k(I,J,fe,te,K);else if(Ne=C(E),typeof Ne=="function")for(E=Ne.call(E),Ne=0;!(I=E.next()).done;)I=I.value,te=Ee+me(I,Ne++),ce+=k(I,J,fe,te,K);else if(te==="object"){if(typeof E.then=="function")return k(Se(E),J,fe,I,K);throw J=String(E),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ce}function se(E,J,fe){if(E==null)return E;var I=[],K=0;return k(E,I,"","",function(te){return J.call(fe,te,K++)}),I}function ye(E){if(E._status===-1){var J=E._result;J=J(),J.then(function(fe){(E._status===0||E._status===-1)&&(E._status=1,E._result=fe)},function(fe){(E._status===0||E._status===-1)&&(E._status=2,E._result=fe)}),E._status===-1&&(E._status=0,E._result=J)}if(E._status===1)return E._result.default;throw E._result}var de=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},be={map:se,forEach:function(E,J,fe){se(E,function(){J.apply(this,arguments)},fe)},count:function(E){var J=0;return se(E,function(){J++}),J},toArray:function(E){return se(E,function(J){return J})||[]},only:function(E){if(!oe(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Me.Activity=S,Me.Children=be,Me.Component=M,Me.Fragment=l,Me.Profiler=r,Me.PureComponent=j,Me.StrictMode=a,Me.Suspense=y,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Me.__COMPILER_RUNTIME={__proto__:null,c:function(E){return D.H.useMemoCache(E)}},Me.cache=function(E){return function(){return E.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(E,J,fe){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var I=U({},E.props),K=E.key;if(J!=null)for(te in J.key!==void 0&&(K=""+J.key),J)!Q.call(J,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&J.ref===void 0||(I[te]=J[te]);var te=arguments.length-2;if(te===1)I.children=fe;else if(1<te){for(var ce=Array(te),Ee=0;Ee<te;Ee++)ce[Ee]=arguments[Ee+2];I.children=ce}return $(E.type,K,I)},Me.createContext=function(E){return E={$$typeof:p,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},Me.createElement=function(E,J,fe){var I,K={},te=null;if(J!=null)for(I in J.key!==void 0&&(te=""+J.key),J)Q.call(J,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(K[I]=J[I]);var ce=arguments.length-2;if(ce===1)K.children=fe;else if(1<ce){for(var Ee=Array(ce),Ne=0;Ne<ce;Ne++)Ee[Ne]=arguments[Ne+2];K.children=Ee}if(E&&E.defaultProps)for(I in ce=E.defaultProps,ce)K[I]===void 0&&(K[I]=ce[I]);return $(E,te,K)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(E){return{$$typeof:x,render:E}},Me.isValidElement=oe,Me.lazy=function(E){return{$$typeof:v,_payload:{_status:-1,_result:E},_init:ye}},Me.memo=function(E,J){return{$$typeof:h,type:E,compare:J===void 0?null:J}},Me.startTransition=function(E){var J=D.T,fe={};D.T=fe;try{var I=E(),K=D.S;K!==null&&K(fe,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(ue,de)}catch(te){de(te)}finally{J!==null&&fe.types!==null&&(J.types=fe.types),D.T=J}},Me.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Me.use=function(E){return D.H.use(E)},Me.useActionState=function(E,J,fe){return D.H.useActionState(E,J,fe)},Me.useCallback=function(E,J){return D.H.useCallback(E,J)},Me.useContext=function(E){return D.H.useContext(E)},Me.useDebugValue=function(){},Me.useDeferredValue=function(E,J){return D.H.useDeferredValue(E,J)},Me.useEffect=function(E,J){return D.H.useEffect(E,J)},Me.useEffectEvent=function(E){return D.H.useEffectEvent(E)},Me.useId=function(){return D.H.useId()},Me.useImperativeHandle=function(E,J,fe){return D.H.useImperativeHandle(E,J,fe)},Me.useInsertionEffect=function(E,J){return D.H.useInsertionEffect(E,J)},Me.useLayoutEffect=function(E,J){return D.H.useLayoutEffect(E,J)},Me.useMemo=function(E,J){return D.H.useMemo(E,J)},Me.useOptimistic=function(E,J){return D.H.useOptimistic(E,J)},Me.useReducer=function(E,J,fe){return D.H.useReducer(E,J,fe)},Me.useRef=function(E){return D.H.useRef(E)},Me.useState=function(E){return D.H.useState(E)},Me.useSyncExternalStore=function(E,J,fe){return D.H.useSyncExternalStore(E,J,fe)},Me.useTransition=function(){return D.H.useTransition()},Me.version="19.2.0",Me}var ap;function Fu(){return ap||(ap=1,Nu.exports=xy()),Nu.exports}var w=Fu();const _s=zu(w);var Tu={exports:{}},Cl={},Cu={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op;function yy(){return op||(op=1,(function(i){function t(k,se){var ye=k.length;k.push(se);e:for(;0<ye;){var de=ye-1>>>1,be=k[de];if(0<r(be,se))k[de]=se,k[ye]=be,ye=de;else break e}}function l(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var se=k[0],ye=k.pop();if(ye!==se){k[0]=ye;e:for(var de=0,be=k.length,E=be>>>1;de<E;){var J=2*(de+1)-1,fe=k[J],I=J+1,K=k[I];if(0>r(fe,ye))I<be&&0>r(K,fe)?(k[de]=K,k[I]=ye,de=I):(k[de]=fe,k[J]=ye,de=J);else if(I<be&&0>r(K,ye))k[de]=K,k[I]=ye,de=I;else break e}}return se}function r(k,se){var ye=k.sortIndex-se.sortIndex;return ye!==0?ye:k.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var p=Date,x=p.now();i.unstable_now=function(){return p.now()-x}}var y=[],h=[],v=1,S=null,N=3,C=!1,_=!1,U=!1,H=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ee(k){for(var se=l(h);se!==null;){if(se.callback===null)a(h);else if(se.startTime<=k)a(h),se.sortIndex=se.expirationTime,t(y,se);else break;se=l(h)}}function ie(k){if(U=!1,ee(k),!_)if(l(y)!==null)_=!0,ue||(ue=!0,Y());else{var se=l(h);se!==null&&Se(ie,se.startTime-k)}}var ue=!1,D=-1,Q=5,$=-1;function V(){return H?!0:!(i.unstable_now()-$<Q)}function oe(){if(H=!1,ue){var k=i.unstable_now();$=k;var se=!0;try{e:{_=!1,U&&(U=!1,O(D),D=-1),C=!0;var ye=N;try{t:{for(ee(k),S=l(y);S!==null&&!(S.expirationTime>k&&V());){var de=S.callback;if(typeof de=="function"){S.callback=null,N=S.priorityLevel;var be=de(S.expirationTime<=k);if(k=i.unstable_now(),typeof be=="function"){S.callback=be,ee(k),se=!0;break t}S===l(y)&&a(y),ee(k)}else a(y);S=l(y)}if(S!==null)se=!0;else{var E=l(h);E!==null&&Se(ie,E.startTime-k),se=!1}}break e}finally{S=null,N=ye,C=!1}se=void 0}}finally{se?Y():ue=!1}}}var Y;if(typeof j=="function")Y=function(){j(oe)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,me=ge.port2;ge.port1.onmessage=oe,Y=function(){me.postMessage(null)}}else Y=function(){M(oe,0)};function Se(k,se){D=M(function(){k(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(k){switch(N){case 1:case 2:case 3:var se=3;break;default:se=N}var ye=N;N=se;try{return k()}finally{N=ye}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(k,se){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ye=N;N=k;try{return se()}finally{N=ye}},i.unstable_scheduleCallback=function(k,se,ye){var de=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?de+ye:de):ye=de,k){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ye+be,k={id:v++,callback:se,priorityLevel:k,startTime:ye,expirationTime:be,sortIndex:-1},ye>de?(k.sortIndex=ye,t(h,k),l(y)===null&&k===l(h)&&(U?(O(D),D=-1):U=!0,Se(ie,ye-de))):(k.sortIndex=be,t(y,k),_||C||(_=!0,ue||(ue=!0,Y()))),k},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(k){var se=N;return function(){var ye=N;N=se;try{return k.apply(this,arguments)}finally{N=ye}}}})(Eu)),Eu}var rp;function vy(){return rp||(rp=1,Cu.exports=yy()),Cu.exports}var Au={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function Sy(){if(up)return Ct;up=1;var i=Fu();function t(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var a={d:{f:l,r:function(){throw Error(t(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function d(y,h,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:y,containerInfo:h,implementation:v}}var p=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ct.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return d(y,h,null,v)},Ct.flushSync=function(y){var h=p.T,v=a.p;try{if(p.T=null,a.p=2,y)return y()}finally{p.T=h,a.p=v,a.d.f()}},Ct.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(y,h))},Ct.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Ct.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,S=x(v,h.crossOrigin),N=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?a.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:S,integrity:N,fetchPriority:C}):v==="script"&&a.d.X(y,{crossOrigin:S,integrity:N,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=x(h.as,h.crossOrigin);a.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(y)},Ct.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,S=x(v,h.crossOrigin);a.d.L(y,v,{crossOrigin:S,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=x(h.as,h.crossOrigin);a.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(y)},Ct.requestFormReset=function(y){a.d.r(y)},Ct.unstable_batchedUpdates=function(y,h){return y(h)},Ct.useFormState=function(y,h,v){return p.H.useFormState(y,h,v)},Ct.useFormStatus=function(){return p.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var cp;function sh(){if(cp)return Au.exports;cp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Au.exports=Sy(),Au.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function by(){if(dp)return Cl;dp=1;var i=vy(),t=Fu(),l=sh();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function p(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(d(e)!==e)throw Error(a(188))}function h(e){var n=e.alternate;if(!n){if(n=d(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,o=n;;){var m=s.return;if(m===null)break;var g=m.alternate;if(g===null){if(o=m.return,o!==null){s=o;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===s)return y(m),e;if(g===o)return y(m),n;g=g.sibling}throw Error(a(188))}if(s.return!==o.return)s=m,o=g;else{for(var b=!1,T=m.child;T;){if(T===s){b=!0,s=m,o=g;break}if(T===o){b=!0,o=m,s=g;break}T=T.sibling}if(!b){for(T=g.child;T;){if(T===s){b=!0,s=g,o=m;break}if(T===o){b=!0,o=g,s=m;break}T=T.sibling}if(!b)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case M:return"Profiler";case H:return"StrictMode";case ie:return"Suspense";case ue:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case j:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case ee:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:me(e.type)||"Memo";case Q:n=e._payload,e=e._init;try{return me(e(n))}catch{}}return null}var Se=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},de=[],be=-1;function E(e){return{current:e}}function J(e){0>be||(e.current=de[be],de[be]=null,be--)}function fe(e,n){be++,de[be]=e.current,e.current=n}var I=E(null),K=E(null),te=E(null),ce=E(null);function Ee(e,n){switch(fe(te,n),fe(K,e),fe(I,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Am(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Am(n),e=_m(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(I),fe(I,e)}function Ne(){J(I),J(K),J(te)}function Ve(e){e.memoizedState!==null&&fe(ce,e);var n=I.current,s=_m(n,e.type);n!==s&&(fe(K,e),fe(I,s))}function Ae(e){K.current===e&&(J(I),J(K)),ce.current===e&&(J(ce),vl._currentValue=ye)}var L,ne;function ve(e){if(L===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||"",ne=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L+e+ne}var ke=!1;function Qe(e,n){if(!e||ke)return"";ke=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var F=X}Reflect.construct(e,[],re)}else{try{re.call()}catch(X){F=X}e.call(re.prototype)}}else{try{throw Error()}catch(X){F=X}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),b=g[0],T=g[1];if(b&&T){var A=b.split(`
`),P=T.split(`
`);for(m=o=0;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;for(;m<P.length&&!P[m].includes("DetermineComponentFrameRoot");)m++;if(o===A.length||m===P.length)for(o=A.length-1,m=P.length-1;1<=o&&0<=m&&A[o]!==P[m];)m--;for(;1<=o&&0<=m;o--,m--)if(A[o]!==P[m]){if(o!==1||m!==1)do if(o--,m--,0>m||A[o]!==P[m]){var W=`
`+A[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=m);break}}}finally{ke=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?ve(s):""}function Ue(e,n){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve("Lazy");case 13:return e.child!==n&&n!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Qe(e.type,!1);case 11:return Qe(e.type.render,!1);case 1:return Qe(e.type,!0);case 31:return ve("Activity");default:return""}}function ht(e){try{var n="",s=null;do n+=Ue(e,s),s=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var xt=Object.prototype.hasOwnProperty,dn=i.unstable_scheduleCallback,fn=i.unstable_cancelCallback,Ds=i.unstable_shouldYield,gi=i.unstable_requestPaint,z=i.unstable_now,q=i.unstable_getCurrentPriorityLevel,Z=i.unstable_ImmediatePriority,ae=i.unstable_UserBlockingPriority,pe=i.unstable_NormalPriority,xe=i.unstable_LowPriority,Re=i.unstable_IdlePriority,Oe=i.log,an=i.unstable_setDisableYieldValue,Tt=null,At=null;function mn(e){if(typeof Oe=="function"&&an(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Tt,e)}catch{}}var _t=Math.clz32?Math.clz32:t0,oo=Math.log,e0=Math.LN2;function t0(e){return e>>>=0,e===0?32:31-(oo(e)/e0|0)|0}var wl=256,Rl=262144,Ml=4194304;function hi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Dl(e,n,s){var o=e.pendingLanes;if(o===0)return 0;var m=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~g,o!==0?m=hi(o):(b&=T,b!==0?m=hi(b):s||(s=T&~e,s!==0&&(m=hi(s))))):(T=o&~g,T!==0?m=hi(T):b!==0?m=hi(b):s||(s=o&~e,s!==0&&(m=hi(s)))),m===0?0:n!==0&&n!==m&&(n&g)===0&&(g=m&-m,s=n&-n,g>=s||g===32&&(s&4194048)!==0)?n:m}function Is(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function n0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var e=Ml;return Ml<<=1,(Ml&62914560)===0&&(Ml=4194304),e}function ro(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ks(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function i0(e,n,s,o,m,g){var b=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var T=e.entanglements,A=e.expirationTimes,P=e.hiddenUpdates;for(s=b&~s;0<s;){var W=31-_t(s),re=1<<W;T[W]=0,A[W]=-1;var F=P[W];if(F!==null)for(P[W]=null,W=0;W<F.length;W++){var X=F[W];X!==null&&(X.lane&=-536870913)}s&=~re}o!==0&&oc(e,o,0),g!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~n))}function oc(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-_t(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function rc(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var o=31-_t(s),m=1<<o;m&n|e[o]&n&&(e[o]|=n),s&=~m}}function uc(e,n){var s=n&-n;return s=(s&42)!==0?1:uo(s),(s&(e.suspendedLanes|n))!==0?0:s}function uo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function co(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cc(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Xm(e.type))}function dc(e,n){var s=se.p;try{return se.p=e,n()}finally{se.p=s}}var Ln=Math.random().toString(36).slice(2),yt="__reactFiber$"+Ln,Mt="__reactProps$"+Ln,Hi="__reactContainer$"+Ln,fo="__reactEvents$"+Ln,s0="__reactListeners$"+Ln,l0="__reactHandles$"+Ln,fc="__reactResources$"+Ln,Us="__reactMarker$"+Ln;function mo(e){delete e[yt],delete e[Mt],delete e[fo],delete e[s0],delete e[l0]}function Gi(e){var n=e[yt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Hi]||s[yt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Um(e);e!==null;){if(s=e[yt])return s;e=Um(e)}return n}e=s,s=e.parentNode}return null}function ji(e){if(e=e[yt]||e[Hi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function qs(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function Li(e){var n=e[fc];return n||(n=e[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mt(e){e[Us]=!0}var mc=new Set,pc={};function xi(e,n){Oi(e,n),Oi(e+"Capture",n)}function Oi(e,n){for(pc[e]=n,e=0;e<n.length;e++)mc.add(n[e])}var a0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gc={},hc={};function o0(e){return xt.call(hc,e)?!0:xt.call(gc,e)?!1:a0.test(e)?hc[e]=!0:(gc[e]=!0,!1)}function Il(e,n,s){if(o0(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function kl(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function yn(e,n,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+o)}}function Jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xc(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function r0(e,n,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return m.call(this)},set:function(b){s=""+b,g.call(this,b)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function po(e){if(!e._valueTracker){var n=xc(e)?"checked":"value";e._valueTracker=r0(e,n,""+e[n])}}function yc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return e&&(o=xc(e)?e.checked?"true":"false":e.value),e=o,e!==s?(n.setValue(e),!0):!1}function Ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var u0=/[\n"\\]/g;function Kt(e){return e.replace(u0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function go(e,n,s,o,m,g,b,T){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Jt(n)):e.value!==""+Jt(n)&&(e.value=""+Jt(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?ho(e,b,Jt(n)):s!=null?ho(e,b,Jt(s)):o!=null&&e.removeAttribute("value"),m==null&&g!=null&&(e.defaultChecked=!!g),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Jt(T):e.removeAttribute("name")}function vc(e,n,s,o,m,g,b,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){po(e);return}s=s!=null?""+Jt(s):"",n=n!=null?""+Jt(n):s,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),po(e)}function ho(e,n,s){n==="number"&&Ul(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Vi(e,n,s,o){if(e=e.options,n){n={};for(var m=0;m<s.length;m++)n["$"+s[m]]=!0;for(s=0;s<e.length;s++)m=n.hasOwnProperty("$"+e[s].value),e[s].selected!==m&&(e[s].selected=m),m&&o&&(e[s].defaultSelected=!0)}else{for(s=""+Jt(s),n=null,m=0;m<e.length;m++){if(e[m].value===s){e[m].selected=!0,o&&(e[m].defaultSelected=!0);return}n!==null||e[m].disabled||(n=e[m])}n!==null&&(n.selected=!0)}}function Sc(e,n,s){if(n!=null&&(n=""+Jt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+Jt(s):""}function bc(e,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(Se(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=Jt(n),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),po(e)}function Bi(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var c0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nc(e,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,s):typeof s!="number"||s===0||c0.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Tc(e,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var m in n)o=n[m],n.hasOwnProperty(m)&&s[m]!==o&&Nc(e,m,o)}else for(var g in n)n.hasOwnProperty(g)&&Nc(e,g,n[g])}function xo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var d0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),f0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(e){return f0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function vn(){}var yo=null;function vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,zi=null;function Cc(e){var n=ji(e);if(n&&(e=n.stateNode)){var s=e[Mt]||null;e:switch(e=n.stateNode,n.type){case"input":if(go(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Kt(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==e&&o.form===e.form){var m=o[Mt]||null;if(!m)throw Error(a(90));go(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===e.form&&yc(o)}break e;case"textarea":Sc(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Vi(e,!!s.multiple,n,!1)}}}var So=!1;function Ec(e,n,s){if(So)return e(n,s);So=!0;try{var o=e(n);return o}finally{if(So=!1,(Pi!==null||zi!==null)&&(Na(),Pi&&(n=Pi,e=zi,zi=Pi=null,Cc(n),e)))for(n=0;n<e.length;n++)Cc(e[n])}}function Hs(e,n){var s=e.stateNode;if(s===null)return null;var o=s[Mt]||null;if(o===null)return null;s=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bo=!1;if(Sn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){bo=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{bo=!1}var On=null,No=null,Hl=null;function Ac(){if(Hl)return Hl;var e,n=No,s=n.length,o,m="value"in On?On.value:On.textContent,g=m.length;for(e=0;e<s&&n[e]===m[e];e++);var b=s-e;for(o=1;o<=b&&n[s-o]===m[g-o];o++);return Hl=m.slice(e,1<o?1-o:void 0)}function Gl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function _c(){return!1}function Dt(e){function n(s,o,m,g,b){this._reactName=s,this._targetInst=m,this.type=o,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(s=e[T],this[T]=s?s(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jl:_c,this.isPropagationStopped=_c,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),n}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=Dt(yi),js=S({},yi,{view:0,detail:0}),m0=Dt(js),To,Co,Ls,Ol=S({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(To=e.screenX-Ls.screenX,Co=e.screenY-Ls.screenY):Co=To=0,Ls=e),To)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),wc=Dt(Ol),p0=S({},Ol,{dataTransfer:0}),g0=Dt(p0),h0=S({},js,{relatedTarget:0}),Eo=Dt(h0),x0=S({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),y0=Dt(x0),v0=S({},yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S0=Dt(v0),b0=S({},yi,{data:0}),Rc=Dt(b0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=C0[e])?!!n[e]:!1}function Ao(){return E0}var A0=S({},js,{key:function(e){if(e.key){var n=N0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(e){return e.type==="keypress"?Gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_0=Dt(A0),w0=S({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mc=Dt(w0),R0=S({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),M0=Dt(R0),D0=S({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I0=Dt(D0),k0=S({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),U0=Dt(k0),q0=S({},yi,{newState:0,oldState:0}),H0=Dt(q0),G0=[9,13,27,32],_o=Sn&&"CompositionEvent"in window,Os=null;Sn&&"documentMode"in document&&(Os=document.documentMode);var j0=Sn&&"TextEvent"in window&&!Os,Dc=Sn&&(!_o||Os&&8<Os&&11>=Os),Ic=" ",kc=!1;function Uc(e,n){switch(e){case"keyup":return G0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function L0(e,n){switch(e){case"compositionend":return qc(n);case"keypress":return n.which!==32?null:(kc=!0,Ic);case"textInput":return e=n.data,e===Ic&&kc?null:e;default:return null}}function O0(e,n){if(Fi)return e==="compositionend"||!_o&&Uc(e,n)?(e=Ac(),Hl=No=On=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dc&&n.locale!=="ko"?null:n.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!V0[e.type]:n==="textarea"}function Gc(e,n,s,o){Pi?zi?zi.push(o):zi=[o]:Pi=o,n=Ra(n,"onChange"),0<n.length&&(s=new Ll("onChange","change",null,s,o),e.push({event:s,listeners:n}))}var Vs=null,Bs=null;function B0(e){Sm(e,0)}function Vl(e){var n=qs(e);if(yc(n))return e}function jc(e,n){if(e==="change")return n}var Lc=!1;if(Sn){var wo;if(Sn){var Ro="oninput"in document;if(!Ro){var Oc=document.createElement("div");Oc.setAttribute("oninput","return;"),Ro=typeof Oc.oninput=="function"}wo=Ro}else wo=!1;Lc=wo&&(!document.documentMode||9<document.documentMode)}function Vc(){Vs&&(Vs.detachEvent("onpropertychange",Bc),Bs=Vs=null)}function Bc(e){if(e.propertyName==="value"&&Vl(Bs)){var n=[];Gc(n,Bs,e,vo(e)),Ec(B0,n)}}function P0(e,n,s){e==="focusin"?(Vc(),Vs=n,Bs=s,Vs.attachEvent("onpropertychange",Bc)):e==="focusout"&&Vc()}function z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(Bs)}function F0(e,n){if(e==="click")return Vl(n)}function Y0(e,n){if(e==="input"||e==="change")return Vl(n)}function $0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var jt=typeof Object.is=="function"?Object.is:$0;function Ps(e,n){if(jt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var m=s[o];if(!xt.call(n,m)||!jt(e[m],n[m]))return!1}return!0}function Pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zc(e,n){var s=Pc(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=n&&o>=n)return{node:s,offset:n-e};e=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Pc(s)}}function Fc(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Fc(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Yc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ul(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Ul(e.document)}return n}function Mo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var J0=Sn&&"documentMode"in document&&11>=document.documentMode,Yi=null,Do=null,zs=null,Io=!1;function $c(e,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Io||Yi==null||Yi!==Ul(o)||(o=Yi,"selectionStart"in o&&Mo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zs&&Ps(zs,o)||(zs=o,o=Ra(Do,"onSelect"),0<o.length&&(n=new Ll("onSelect","select",null,n,s),e.push({event:n,listeners:o}),n.target=Yi)))}function vi(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var $i={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionrun:vi("Transition","TransitionRun"),transitionstart:vi("Transition","TransitionStart"),transitioncancel:vi("Transition","TransitionCancel"),transitionend:vi("Transition","TransitionEnd")},ko={},Jc={};Sn&&(Jc=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Si(e){if(ko[e])return ko[e];if(!$i[e])return e;var n=$i[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Jc)return ko[e]=n[s];return e}var Kc=Si("animationend"),Xc=Si("animationiteration"),Qc=Si("animationstart"),K0=Si("transitionrun"),X0=Si("transitionstart"),Q0=Si("transitioncancel"),Zc=Si("transitionend"),Wc=new Map,Uo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uo.push("scrollEnd");function on(e,n){Wc.set(e,n),xi(n,[e])}var Bl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xt=[],Ji=0,qo=0;function Pl(){for(var e=Ji,n=qo=Ji=0;n<e;){var s=Xt[n];Xt[n++]=null;var o=Xt[n];Xt[n++]=null;var m=Xt[n];Xt[n++]=null;var g=Xt[n];if(Xt[n++]=null,o!==null&&m!==null){var b=o.pending;b===null?m.next=m:(m.next=b.next,b.next=m),o.pending=m}g!==0&&ed(s,m,g)}}function zl(e,n,s,o){Xt[Ji++]=e,Xt[Ji++]=n,Xt[Ji++]=s,Xt[Ji++]=o,qo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ho(e,n,s,o){return zl(e,n,s,o),Fl(e)}function bi(e,n){return zl(e,null,null,n),Fl(e)}function ed(e,n,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var m=!1,g=e.return;g!==null;)g.childLanes|=s,o=g.alternate,o!==null&&(o.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(m=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,m&&n!==null&&(m=31-_t(s),e=g.hiddenUpdates,o=e[m],o===null?e[m]=[n]:o.push(n),n.lane=s|536870912),g):null}function Fl(e){if(50<fl)throw fl=0,Fr=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ki={};function Z0(e,n,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,n,s,o){return new Z0(e,n,s,o)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bn(e,n){var s=e.alternate;return s===null?(s=Lt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function td(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Yl(e,n,s,o,m,g){var b=0;if(o=e,typeof e=="function")Go(e)&&(b=1);else if(typeof e=="string")b=iy(e,s,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=Lt(31,s,n,m),e.elementType=$,e.lanes=g,e;case U:return Ni(s.children,m,g,n);case H:b=8,m|=24;break;case M:return e=Lt(12,s,n,m|2),e.elementType=M,e.lanes=g,e;case ie:return e=Lt(13,s,n,m),e.elementType=ie,e.lanes=g,e;case ue:return e=Lt(19,s,n,m),e.elementType=ue,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j:b=10;break e;case O:b=9;break e;case ee:b=11;break e;case D:b=14;break e;case Q:b=16,o=null;break e}b=29,s=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=Lt(b,s,n,m),n.elementType=e,n.type=o,n.lanes=g,n}function Ni(e,n,s,o){return e=Lt(7,e,o,n),e.lanes=s,e}function jo(e,n,s){return e=Lt(6,e,null,n),e.lanes=s,e}function nd(e){var n=Lt(18,null,null,0);return n.stateNode=e,n}function Lo(e,n,s){return n=Lt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var id=new WeakMap;function Qt(e,n){if(typeof e=="object"&&e!==null){var s=id.get(e);return s!==void 0?s:(n={value:e,source:n,stack:ht(n)},id.set(e,n),n)}return{value:e,source:n,stack:ht(n)}}var Xi=[],Qi=0,$l=null,Fs=0,Zt=[],Wt=0,Vn=null,pn=1,gn="";function Nn(e,n){Xi[Qi++]=Fs,Xi[Qi++]=$l,$l=e,Fs=n}function sd(e,n,s){Zt[Wt++]=pn,Zt[Wt++]=gn,Zt[Wt++]=Vn,Vn=e;var o=pn;e=gn;var m=32-_t(o)-1;o&=~(1<<m),s+=1;var g=32-_t(n)+m;if(30<g){var b=m-m%5;g=(o&(1<<b)-1).toString(32),o>>=b,m-=b,pn=1<<32-_t(n)+m|s<<m|o,gn=g+e}else pn=1<<g|s<<m|o,gn=e}function Oo(e){e.return!==null&&(Nn(e,1),sd(e,1,0))}function Vo(e){for(;e===$l;)$l=Xi[--Qi],Xi[Qi]=null,Fs=Xi[--Qi],Xi[Qi]=null;for(;e===Vn;)Vn=Zt[--Wt],Zt[Wt]=null,gn=Zt[--Wt],Zt[Wt]=null,pn=Zt[--Wt],Zt[Wt]=null}function ld(e,n){Zt[Wt++]=pn,Zt[Wt++]=gn,Zt[Wt++]=Vn,pn=n.id,gn=n.overflow,Vn=e}var vt=null,We=null,Le=!1,Bn=null,en=!1,Bo=Error(a(519));function Pn(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ys(Qt(n,e)),Bo}function ad(e){var n=e.stateNode,s=e.type,o=e.memoizedProps;switch(n[yt]=e,n[Mt]=o,s){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(s=0;s<pl.length;s++)He(pl[s],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":He("invalid",n),vc(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":He("invalid",n);break;case"textarea":He("invalid",n),bc(n,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||Cm(n.textContent,s)?(o.popover!=null&&(He("beforetoggle",n),He("toggle",n)),o.onScroll!=null&&He("scroll",n),o.onScrollEnd!=null&&He("scrollend",n),o.onClick!=null&&(n.onclick=vn),n=!0):n=!1,n||Pn(e,!0)}function od(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:vt=vt.return}}function Zi(e){if(e!==vt)return!1;if(!Le)return od(e),Le=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||au(e.type,e.memoizedProps)),s=!s),s&&We&&Pn(e),od(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));We=km(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));We=km(e)}else n===27?(n=We,ii(e.type)?(e=du,du=null,We=e):We=n):We=vt?nn(e.stateNode.nextSibling):null;return!0}function Ti(){We=vt=null,Le=!1}function Po(){var e=Bn;return e!==null&&(qt===null?qt=e:qt.push.apply(qt,e),Bn=null),e}function Ys(e){Bn===null?Bn=[e]:Bn.push(e)}var zo=E(null),Ci=null,Tn=null;function zn(e,n,s){fe(zo,n._currentValue),n._currentValue=s}function Cn(e){e._currentValue=zo.current,J(zo)}function Fo(e,n,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===s)break;e=e.return}}function Yo(e,n,s,o){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var g=m.dependencies;if(g!==null){var b=m.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=m;for(var A=0;A<n.length;A++)if(T.context===n[A]){g.lanes|=s,T=g.alternate,T!==null&&(T.lanes|=s),Fo(g.return,s,e),o||(b=null);break e}g=T.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(a(341));b.lanes|=s,g=b.alternate,g!==null&&(g.lanes|=s),Fo(b,s,e),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===e){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function Wi(e,n,s,o){e=null;for(var m=n,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var T=m.type;jt(m.pendingProps.value,b.value)||(e!==null?e.push(T):e=[T])}}else if(m===ce.current){if(b=m.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(vl):e=[vl])}m=m.return}e!==null&&Yo(n,e,s,o),n.flags|=262144}function Jl(e){for(e=e.firstContext;e!==null;){if(!jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){Ci=e,Tn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return rd(Ci,e)}function Kl(e,n){return Ci===null&&Ei(e),rd(e,n)}function rd(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Tn===null){if(e===null)throw Error(a(308));Tn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Tn=Tn.next=n;return s}var W0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},ex=i.unstable_scheduleCallback,tx=i.unstable_NormalPriority,rt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $o(){return{controller:new W0,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&ex(tx,function(){e.controller.abort()})}var Js=null,Jo=0,es=0,ts=null;function nx(e,n){if(Js===null){var s=Js=[];Jo=0,es=Qr(),ts={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Jo++,n.then(ud,ud),n}function ud(){if(--Jo===0&&Js!==null){ts!==null&&(ts.status="fulfilled");var e=Js;Js=null,es=0,ts=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ix(e,n){var s=[],o={status:"pending",value:null,reason:null,then:function(m){s.push(m)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var m=0;m<s.length;m++)(0,s[m])(n)},function(m){for(o.status="rejected",o.reason=m,m=0;m<s.length;m++)(0,s[m])(void 0)}),o}var cd=k.S;k.S=function(e,n){Jf=z(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&nx(e,n),cd!==null&&cd(e,n)};var Ai=E(null);function Ko(){var e=Ai.current;return e!==null?e:Ze.pooledCache}function Xl(e,n){n===null?fe(Ai,Ai.current):fe(Ai,n.pool)}function dd(){var e=Ko();return e===null?null:{parent:rt._currentValue,pool:e}}var ns=Error(a(460)),Xo=Error(a(474)),Ql=Error(a(542)),Zl={then:function(){}};function fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function md(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(vn,vn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,gd(e),e;default:if(typeof n.status=="string")n.then(vn,vn);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=o}},function(o){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,gd(e),e}throw wi=n,ns}}function _i(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(wi=s,ns):s}}var wi=null;function pd(){if(wi===null)throw Error(a(459));var e=wi;return wi=null,e}function gd(e){if(e===ns||e===Ql)throw Error(a(483))}var is=null,Ks=0;function Wl(e){var n=Ks;return Ks+=1,is===null&&(is=[]),md(is,e,n)}function Xs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ea(e,n){throw n.$$typeof===N?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function hd(e){function n(G,R){if(e){var B=G.deletions;B===null?(G.deletions=[R],G.flags|=16):B.push(R)}}function s(G,R){if(!e)return null;for(;R!==null;)n(G,R),R=R.sibling;return null}function o(G){for(var R=new Map;G!==null;)G.key!==null?R.set(G.key,G):R.set(G.index,G),G=G.sibling;return R}function m(G,R){return G=bn(G,R),G.index=0,G.sibling=null,G}function g(G,R,B){return G.index=B,e?(B=G.alternate,B!==null?(B=B.index,B<R?(G.flags|=67108866,R):B):(G.flags|=67108866,R)):(G.flags|=1048576,R)}function b(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function T(G,R,B,le){return R===null||R.tag!==6?(R=jo(B,G.mode,le),R.return=G,R):(R=m(R,B),R.return=G,R)}function A(G,R,B,le){var _e=B.type;return _e===U?W(G,R,B.props.children,le,B.key):R!==null&&(R.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Q&&_i(_e)===R.type)?(R=m(R,B.props),Xs(R,B),R.return=G,R):(R=Yl(B.type,B.key,B.props,null,G.mode,le),Xs(R,B),R.return=G,R)}function P(G,R,B,le){return R===null||R.tag!==4||R.stateNode.containerInfo!==B.containerInfo||R.stateNode.implementation!==B.implementation?(R=Lo(B,G.mode,le),R.return=G,R):(R=m(R,B.children||[]),R.return=G,R)}function W(G,R,B,le,_e){return R===null||R.tag!==7?(R=Ni(B,G.mode,le,_e),R.return=G,R):(R=m(R,B),R.return=G,R)}function re(G,R,B){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=jo(""+R,G.mode,B),R.return=G,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case C:return B=Yl(R.type,R.key,R.props,null,G.mode,B),Xs(B,R),B.return=G,B;case _:return R=Lo(R,G.mode,B),R.return=G,R;case Q:return R=_i(R),re(G,R,B)}if(Se(R)||Y(R))return R=Ni(R,G.mode,B,null),R.return=G,R;if(typeof R.then=="function")return re(G,Wl(R),B);if(R.$$typeof===j)return re(G,Kl(G,R),B);ea(G,R)}return null}function F(G,R,B,le){var _e=R!==null?R.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return _e!==null?null:T(G,R,""+B,le);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return B.key===_e?A(G,R,B,le):null;case _:return B.key===_e?P(G,R,B,le):null;case Q:return B=_i(B),F(G,R,B,le)}if(Se(B)||Y(B))return _e!==null?null:W(G,R,B,le,null);if(typeof B.then=="function")return F(G,R,Wl(B),le);if(B.$$typeof===j)return F(G,R,Kl(G,B),le);ea(G,B)}return null}function X(G,R,B,le,_e){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(B)||null,T(R,G,""+le,_e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case C:return G=G.get(le.key===null?B:le.key)||null,A(R,G,le,_e);case _:return G=G.get(le.key===null?B:le.key)||null,P(R,G,le,_e);case Q:return le=_i(le),X(G,R,B,le,_e)}if(Se(le)||Y(le))return G=G.get(B)||null,W(R,G,le,_e,null);if(typeof le.then=="function")return X(G,R,B,Wl(le),_e);if(le.$$typeof===j)return X(G,R,B,Kl(R,le),_e);ea(R,le)}return null}function Te(G,R,B,le){for(var _e=null,Be=null,Ce=R,Ie=R=0,je=null;Ce!==null&&Ie<B.length;Ie++){Ce.index>Ie?(je=Ce,Ce=null):je=Ce.sibling;var Pe=F(G,Ce,B[Ie],le);if(Pe===null){Ce===null&&(Ce=je);break}e&&Ce&&Pe.alternate===null&&n(G,Ce),R=g(Pe,R,Ie),Be===null?_e=Pe:Be.sibling=Pe,Be=Pe,Ce=je}if(Ie===B.length)return s(G,Ce),Le&&Nn(G,Ie),_e;if(Ce===null){for(;Ie<B.length;Ie++)Ce=re(G,B[Ie],le),Ce!==null&&(R=g(Ce,R,Ie),Be===null?_e=Ce:Be.sibling=Ce,Be=Ce);return Le&&Nn(G,Ie),_e}for(Ce=o(Ce);Ie<B.length;Ie++)je=X(Ce,G,Ie,B[Ie],le),je!==null&&(e&&je.alternate!==null&&Ce.delete(je.key===null?Ie:je.key),R=g(je,R,Ie),Be===null?_e=je:Be.sibling=je,Be=je);return e&&Ce.forEach(function(ri){return n(G,ri)}),Le&&Nn(G,Ie),_e}function we(G,R,B,le){if(B==null)throw Error(a(151));for(var _e=null,Be=null,Ce=R,Ie=R=0,je=null,Pe=B.next();Ce!==null&&!Pe.done;Ie++,Pe=B.next()){Ce.index>Ie?(je=Ce,Ce=null):je=Ce.sibling;var ri=F(G,Ce,Pe.value,le);if(ri===null){Ce===null&&(Ce=je);break}e&&Ce&&ri.alternate===null&&n(G,Ce),R=g(ri,R,Ie),Be===null?_e=ri:Be.sibling=ri,Be=ri,Ce=je}if(Pe.done)return s(G,Ce),Le&&Nn(G,Ie),_e;if(Ce===null){for(;!Pe.done;Ie++,Pe=B.next())Pe=re(G,Pe.value,le),Pe!==null&&(R=g(Pe,R,Ie),Be===null?_e=Pe:Be.sibling=Pe,Be=Pe);return Le&&Nn(G,Ie),_e}for(Ce=o(Ce);!Pe.done;Ie++,Pe=B.next())Pe=X(Ce,G,Ie,Pe.value,le),Pe!==null&&(e&&Pe.alternate!==null&&Ce.delete(Pe.key===null?Ie:Pe.key),R=g(Pe,R,Ie),Be===null?_e=Pe:Be.sibling=Pe,Be=Pe);return e&&Ce.forEach(function(py){return n(G,py)}),Le&&Nn(G,Ie),_e}function Xe(G,R,B,le){if(typeof B=="object"&&B!==null&&B.type===U&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case C:e:{for(var _e=B.key;R!==null;){if(R.key===_e){if(_e=B.type,_e===U){if(R.tag===7){s(G,R.sibling),le=m(R,B.props.children),le.return=G,G=le;break e}}else if(R.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Q&&_i(_e)===R.type){s(G,R.sibling),le=m(R,B.props),Xs(le,B),le.return=G,G=le;break e}s(G,R);break}else n(G,R);R=R.sibling}B.type===U?(le=Ni(B.props.children,G.mode,le,B.key),le.return=G,G=le):(le=Yl(B.type,B.key,B.props,null,G.mode,le),Xs(le,B),le.return=G,G=le)}return b(G);case _:e:{for(_e=B.key;R!==null;){if(R.key===_e)if(R.tag===4&&R.stateNode.containerInfo===B.containerInfo&&R.stateNode.implementation===B.implementation){s(G,R.sibling),le=m(R,B.children||[]),le.return=G,G=le;break e}else{s(G,R);break}else n(G,R);R=R.sibling}le=Lo(B,G.mode,le),le.return=G,G=le}return b(G);case Q:return B=_i(B),Xe(G,R,B,le)}if(Se(B))return Te(G,R,B,le);if(Y(B)){if(_e=Y(B),typeof _e!="function")throw Error(a(150));return B=_e.call(B),we(G,R,B,le)}if(typeof B.then=="function")return Xe(G,R,Wl(B),le);if(B.$$typeof===j)return Xe(G,R,Kl(G,B),le);ea(G,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,R!==null&&R.tag===6?(s(G,R.sibling),le=m(R,B),le.return=G,G=le):(s(G,R),le=jo(B,G.mode,le),le.return=G,G=le),b(G)):s(G,R)}return function(G,R,B,le){try{Ks=0;var _e=Xe(G,R,B,le);return is=null,_e}catch(Ce){if(Ce===ns||Ce===Ql)throw Ce;var Be=Lt(29,Ce,null,G.mode);return Be.lanes=le,Be.return=G,Be}finally{}}}var Ri=hd(!0),xd=hd(!1),Fn=!1;function Qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zo(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Yn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $n(e,n,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Fe&2)!==0){var m=o.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),o.pending=n,n=Fl(e),ed(e,null,s),n}return zl(e,o,n,s),Fl(e)}function Qs(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,rc(e,s)}}function Wo(e,n){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var m=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?m=g=b:g=g.next=b,s=s.next}while(s!==null);g===null?m=g=n:g=g.next=n}else m=g=n;s={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var er=!1;function Zs(){if(er){var e=ts;if(e!==null)throw e}}function Ws(e,n,s,o){er=!1;var m=e.updateQueue;Fn=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var A=T,P=A.next;A.next=null,b===null?g=P:b.next=P,b=A;var W=e.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==b&&(T===null?W.firstBaseUpdate=P:T.next=P,W.lastBaseUpdate=A))}if(g!==null){var re=m.baseState;b=0,W=P=A=null,T=g;do{var F=T.lane&-536870913,X=F!==T.lane;if(X?(Ge&F)===F:(o&F)===F){F!==0&&F===es&&(er=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Te=e,we=T;F=n;var Xe=s;switch(we.tag){case 1:if(Te=we.payload,typeof Te=="function"){re=Te.call(Xe,re,F);break e}re=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=we.payload,F=typeof Te=="function"?Te.call(Xe,re,F):Te,F==null)break e;re=S({},re,F);break e;case 2:Fn=!0}}F=T.callback,F!==null&&(e.flags|=64,X&&(e.flags|=8192),X=m.callbacks,X===null?m.callbacks=[F]:X.push(F))}else X={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(P=W=X,A=re):W=W.next=X,b|=F;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;X=T,T=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);W===null&&(A=re),m.baseState=A,m.firstBaseUpdate=P,m.lastBaseUpdate=W,g===null&&(m.shared.lanes=0),Zn|=b,e.lanes=b,e.memoizedState=re}}function yd(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function vd(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)yd(s[e],n)}var ss=E(null),ta=E(0);function Sd(e,n){e=kn,fe(ta,e),fe(ss,n),kn=e|n.baseLanes}function tr(){fe(ta,kn),fe(ss,ss.current)}function nr(){kn=ta.current,J(ss),J(ta)}var Ot=E(null),tn=null;function Jn(e){var n=e.alternate;fe(at,at.current&1),fe(Ot,e),tn===null&&(n===null||ss.current!==null||n.memoizedState!==null)&&(tn=e)}function ir(e){fe(at,at.current),fe(Ot,e),tn===null&&(tn=e)}function bd(e){e.tag===22?(fe(at,at.current),fe(Ot,e),tn===null&&(tn=e)):Kn()}function Kn(){fe(at,at.current),fe(Ot,Ot.current)}function Vt(e){J(Ot),tn===e&&(tn=null),J(at)}var at=E(0);function na(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||uu(s)||cu(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var En=0,De=null,Je=null,ut=null,ia=!1,ls=!1,Mi=!1,sa=0,el=0,as=null,sx=0;function it(){throw Error(a(321))}function sr(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!jt(e[s],n[s]))return!1;return!0}function lr(e,n,s,o,m,g){return En=g,De=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?lf:Sr,Mi=!1,g=s(o,m),Mi=!1,ls&&(g=Td(n,s,o,m)),Nd(e),g}function Nd(e){k.H=il;var n=Je!==null&&Je.next!==null;if(En=0,ut=Je=De=null,ia=!1,el=0,as=null,n)throw Error(a(300));e===null||ct||(e=e.dependencies,e!==null&&Jl(e)&&(ct=!0))}function Td(e,n,s,o){De=e;var m=0;do{if(ls&&(as=null),el=0,ls=!1,25<=m)throw Error(a(301));if(m+=1,ut=Je=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}k.H=af,g=n(s,o)}while(ls);return g}function lx(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?tl(n):n,e=e.useState()[0],(Je!==null?Je.memoizedState:null)!==e&&(De.flags|=1024),n}function ar(){var e=sa!==0;return sa=0,e}function or(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function rr(e){if(ia){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ia=!1}En=0,ut=Je=De=null,ls=!1,el=sa=0,as=null}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?De.memoizedState=ut=e:ut=ut.next=e,ut}function ot(){if(Je===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var n=ut===null?De.memoizedState:ut.next;if(n!==null)ut=n,Je=e;else{if(e===null)throw De.alternate===null?Error(a(467)):Error(a(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ut===null?De.memoizedState=ut=e:ut=ut.next=e}return ut}function la(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(e){var n=el;return el+=1,as===null&&(as=[]),e=md(as,e,n),n=De,(ut===null?n.memoizedState:ut.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?lf:Sr),e}function aa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tl(e);if(e.$$typeof===j)return St(e)}throw Error(a(438,String(e)))}function ur(e){var n=null,s=De.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=la(),De.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),o=0;o<e;o++)s[o]=V;return n.index++,s}function An(e,n){return typeof n=="function"?n(e):n}function oa(e){var n=ot();return cr(n,Je,e)}function cr(e,n,s){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var m=e.baseQueue,g=o.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}n.baseQueue=m=g,o.pending=null}if(g=e.baseState,m===null)e.memoizedState=g;else{n=m.next;var T=b=null,A=null,P=n,W=!1;do{var re=P.lane&-536870913;if(re!==P.lane?(Ge&re)===re:(En&re)===re){var F=P.revertLane;if(F===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),re===es&&(W=!0);else if((En&F)===F){P=P.next,F===es&&(W=!0);continue}else re={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(T=A=re,b=g):A=A.next=re,De.lanes|=F,Zn|=F;re=P.action,Mi&&s(g,re),g=P.hasEagerState?P.eagerState:s(g,re)}else F={lane:re,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(T=A=F,b=g):A=A.next=F,De.lanes|=re,Zn|=re;P=P.next}while(P!==null&&P!==n);if(A===null?b=g:A.next=T,!jt(g,e.memoizedState)&&(ct=!0,W&&(s=ts,s!==null)))throw s;e.memoizedState=g,e.baseState=b,e.baseQueue=A,o.lastRenderedState=g}return m===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function dr(e){var n=ot(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var o=s.dispatch,m=s.pending,g=n.memoizedState;if(m!==null){s.pending=null;var b=m=m.next;do g=e(g,b.action),b=b.next;while(b!==m);jt(g,n.memoizedState)||(ct=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,o]}function Cd(e,n,s){var o=De,m=ot(),g=Le;if(g){if(s===void 0)throw Error(a(407));s=s()}else s=n();var b=!jt((Je||m).memoizedState,s);if(b&&(m.memoizedState=s,ct=!0),m=m.queue,pr(_d.bind(null,o,m,e),[e]),m.getSnapshot!==n||b||ut!==null&&ut.memoizedState.tag&1){if(o.flags|=2048,os(9,{destroy:void 0},Ad.bind(null,o,m,s,n),null),Ze===null)throw Error(a(349));g||(En&127)!==0||Ed(o,n,s)}return s}function Ed(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=De.updateQueue,n===null?(n=la(),De.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Ad(e,n,s,o){n.value=s,n.getSnapshot=o,wd(n)&&Rd(e)}function _d(e,n,s){return s(function(){wd(n)&&Rd(e)})}function wd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!jt(e,s)}catch{return!0}}function Rd(e){var n=bi(e,2);n!==null&&Ht(n,e,2)}function fr(e){var n=wt();if(typeof e=="function"){var s=e;if(e=s(),Mi){mn(!0);try{s()}finally{mn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:e},n}function Md(e,n,s,o){return e.baseState=s,cr(e,Je,typeof o=="function"?o:An)}function ax(e,n,s,o,m){if(ca(e))throw Error(a(485));if(e=n.action,e!==null){var g={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};k.T!==null?s(!0):g.isTransition=!1,o(g),s=n.pending,s===null?(g.next=n.pending=g,Dd(n,g)):(g.next=s.next,n.pending=s.next=g)}}function Dd(e,n){var s=n.action,o=n.payload,m=e.state;if(n.isTransition){var g=k.T,b={};k.T=b;try{var T=s(m,o),A=k.S;A!==null&&A(b,T),Id(e,n,T)}catch(P){mr(e,n,P)}finally{g!==null&&b.types!==null&&(g.types=b.types),k.T=g}}else try{g=s(m,o),Id(e,n,g)}catch(P){mr(e,n,P)}}function Id(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){kd(e,n,o)},function(o){return mr(e,n,o)}):kd(e,n,s)}function kd(e,n,s){n.status="fulfilled",n.value=s,Ud(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Dd(e,s)))}function mr(e,n,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,Ud(n),n=n.next;while(n!==o)}e.action=null}function Ud(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function qd(e,n){return n}function Hd(e,n){if(Le){var s=Ze.formState;if(s!==null){e:{var o=De;if(Le){if(We){t:{for(var m=We,g=en;m.nodeType!==8;){if(!g){m=null;break t}if(m=nn(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){We=nn(m.nextSibling),o=m.data==="F!";break e}}Pn(o)}o=!1}o&&(n=s[0])}}return s=wt(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:n},s.queue=o,s=tf.bind(null,De,o),o.dispatch=s,o=fr(!1),g=vr.bind(null,De,!1,o.queue),o=wt(),m={state:n,dispatch:null,action:e,pending:null},o.queue=m,s=ax.bind(null,De,m,g,s),m.dispatch=s,o.memoizedState=e,[n,s,!1]}function Gd(e){var n=ot();return jd(n,Je,e)}function jd(e,n,s){if(n=cr(e,n,qd)[0],e=oa(An)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=tl(n)}catch(b){throw b===ns?Ql:b}else o=n;n=ot();var m=n.queue,g=m.dispatch;return s!==n.memoizedState&&(De.flags|=2048,os(9,{destroy:void 0},ox.bind(null,m,s),null)),[o,g,e]}function ox(e,n){e.action=n}function Ld(e){var n=ot(),s=Je;if(s!==null)return jd(n,s,e);ot(),n=n.memoizedState,s=ot();var o=s.queue.dispatch;return s.memoizedState=e,[n,o,!1]}function os(e,n,s,o){return e={tag:e,create:s,deps:o,inst:n,next:null},n=De.updateQueue,n===null&&(n=la(),De.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,n.lastEffect=e),e}function Od(){return ot().memoizedState}function ra(e,n,s,o){var m=wt();De.flags|=e,m.memoizedState=os(1|n,{destroy:void 0},s,o===void 0?null:o)}function ua(e,n,s,o){var m=ot();o=o===void 0?null:o;var g=m.memoizedState.inst;Je!==null&&o!==null&&sr(o,Je.memoizedState.deps)?m.memoizedState=os(n,g,s,o):(De.flags|=e,m.memoizedState=os(1|n,g,s,o))}function Vd(e,n){ra(8390656,8,e,n)}function pr(e,n){ua(2048,8,e,n)}function rx(e){De.flags|=4;var n=De.updateQueue;if(n===null)n=la(),De.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function Bd(e){var n=ot().memoizedState;return rx({ref:n,nextImpl:e}),function(){if((Fe&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function Pd(e,n){return ua(4,2,e,n)}function zd(e,n){return ua(4,4,e,n)}function Fd(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Yd(e,n,s){s=s!=null?s.concat([e]):null,ua(4,4,Fd.bind(null,n,e),s)}function gr(){}function $d(e,n){var s=ot();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&sr(n,o[1])?o[0]:(s.memoizedState=[e,n],e)}function Jd(e,n){var s=ot();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&sr(n,o[1]))return o[0];if(o=e(),Mi){mn(!0);try{e()}finally{mn(!1)}}return s.memoizedState=[o,n],o}function hr(e,n,s){return s===void 0||(En&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=Xf(),De.lanes|=e,Zn|=e,s)}function Kd(e,n,s,o){return jt(s,n)?s:ss.current!==null?(e=hr(e,s,o),jt(e,n)||(ct=!0),e):(En&42)===0||(En&1073741824)!==0&&(Ge&261930)===0?(ct=!0,e.memoizedState=s):(e=Xf(),De.lanes|=e,Zn|=e,n)}function Xd(e,n,s,o,m){var g=se.p;se.p=g!==0&&8>g?g:8;var b=k.T,T={};k.T=T,vr(e,!1,n,s);try{var A=m(),P=k.S;if(P!==null&&P(T,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var W=ix(A,o);nl(e,n,W,zt(e))}else nl(e,n,o,zt(e))}catch(re){nl(e,n,{then:function(){},status:"rejected",reason:re},zt())}finally{se.p=g,b!==null&&T.types!==null&&(b.types=T.types),k.T=b}}function ux(){}function xr(e,n,s,o){if(e.tag!==5)throw Error(a(476));var m=Qd(e).queue;Xd(e,m,n,ye,s===null?ux:function(){return Zd(e),s(o)})}function Qd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:ye},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Zd(e){var n=Qd(e);n.next===null&&(n=e.alternate.memoizedState),nl(e,n.next.queue,{},zt())}function yr(){return St(vl)}function Wd(){return ot().memoizedState}function ef(){return ot().memoizedState}function cx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=zt();e=Yn(s);var o=$n(n,e,s);o!==null&&(Ht(o,n,s),Qs(o,n,s)),n={cache:$o()},e.payload=n;return}n=n.return}}function dx(e,n,s){var o=zt();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ca(e)?nf(n,s):(s=Ho(e,n,s,o),s!==null&&(Ht(s,e,o),sf(s,n,o)))}function tf(e,n,s){var o=zt();nl(e,n,s,o)}function nl(e,n,s,o){var m={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ca(e))nf(n,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var b=n.lastRenderedState,T=g(b,s);if(m.hasEagerState=!0,m.eagerState=T,jt(T,b))return zl(e,n,m,0),Ze===null&&Pl(),!1}catch{}finally{}if(s=Ho(e,n,m,o),s!==null)return Ht(s,e,o),sf(s,n,o),!0}return!1}function vr(e,n,s,o){if(o={lane:2,revertLane:Qr(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ca(e)){if(n)throw Error(a(479))}else n=Ho(e,s,o,2),n!==null&&Ht(n,e,2)}function ca(e){var n=e.alternate;return e===De||n!==null&&n===De}function nf(e,n){ls=ia=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function sf(e,n,s){if((s&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,rc(e,s)}}var il={readContext:St,use:aa,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};il.useEffectEvent=it;var lf={readContext:St,use:aa,useCallback:function(e,n){return wt().memoizedState=[e,n===void 0?null:n],e},useContext:St,useEffect:Vd,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,ra(4194308,4,Fd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ra(4194308,4,e,n)},useInsertionEffect:function(e,n){ra(4,2,e,n)},useMemo:function(e,n){var s=wt();n=n===void 0?null:n;var o=e();if(Mi){mn(!0);try{e()}finally{mn(!1)}}return s.memoizedState=[o,n],o},useReducer:function(e,n,s){var o=wt();if(s!==void 0){var m=s(n);if(Mi){mn(!0);try{s(n)}finally{mn(!1)}}}else m=n;return o.memoizedState=o.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},o.queue=e,e=e.dispatch=dx.bind(null,De,e),[o.memoizedState,e]},useRef:function(e){var n=wt();return e={current:e},n.memoizedState=e},useState:function(e){e=fr(e);var n=e.queue,s=tf.bind(null,De,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:gr,useDeferredValue:function(e,n){var s=wt();return hr(s,e,n)},useTransition:function(){var e=fr(!1);return e=Xd.bind(null,De,e.queue,!0,!1),wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var o=De,m=wt();if(Le){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Ze===null)throw Error(a(349));(Ge&127)!==0||Ed(o,n,s)}m.memoizedState=s;var g={value:s,getSnapshot:n};return m.queue=g,Vd(_d.bind(null,o,g,e),[e]),o.flags|=2048,os(9,{destroy:void 0},Ad.bind(null,o,g,s,n),null),s},useId:function(){var e=wt(),n=Ze.identifierPrefix;if(Le){var s=gn,o=pn;s=(o&~(1<<32-_t(o)-1)).toString(32)+s,n="_"+n+"R_"+s,s=sa++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=sx++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:yr,useFormState:Hd,useActionState:Hd,useOptimistic:function(e){var n=wt();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=vr.bind(null,De,!0,s),s.dispatch=n,[e,n]},useMemoCache:ur,useCacheRefresh:function(){return wt().memoizedState=cx.bind(null,De)},useEffectEvent:function(e){var n=wt(),s={impl:e};return n.memoizedState=s,function(){if((Fe&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Sr={readContext:St,use:aa,useCallback:$d,useContext:St,useEffect:pr,useImperativeHandle:Yd,useInsertionEffect:Pd,useLayoutEffect:zd,useMemo:Jd,useReducer:oa,useRef:Od,useState:function(){return oa(An)},useDebugValue:gr,useDeferredValue:function(e,n){var s=ot();return Kd(s,Je.memoizedState,e,n)},useTransition:function(){var e=oa(An)[0],n=ot().memoizedState;return[typeof e=="boolean"?e:tl(e),n]},useSyncExternalStore:Cd,useId:Wd,useHostTransitionStatus:yr,useFormState:Gd,useActionState:Gd,useOptimistic:function(e,n){var s=ot();return Md(s,Je,e,n)},useMemoCache:ur,useCacheRefresh:ef};Sr.useEffectEvent=Bd;var af={readContext:St,use:aa,useCallback:$d,useContext:St,useEffect:pr,useImperativeHandle:Yd,useInsertionEffect:Pd,useLayoutEffect:zd,useMemo:Jd,useReducer:dr,useRef:Od,useState:function(){return dr(An)},useDebugValue:gr,useDeferredValue:function(e,n){var s=ot();return Je===null?hr(s,e,n):Kd(s,Je.memoizedState,e,n)},useTransition:function(){var e=dr(An)[0],n=ot().memoizedState;return[typeof e=="boolean"?e:tl(e),n]},useSyncExternalStore:Cd,useId:Wd,useHostTransitionStatus:yr,useFormState:Ld,useActionState:Ld,useOptimistic:function(e,n){var s=ot();return Je!==null?Md(s,Je,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ur,useCacheRefresh:ef};af.useEffectEvent=Bd;function br(e,n,s,o){n=e.memoizedState,s=s(o,n),s=s==null?n:S({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Nr={enqueueSetState:function(e,n,s){e=e._reactInternals;var o=zt(),m=Yn(o);m.payload=n,s!=null&&(m.callback=s),n=$n(e,m,o),n!==null&&(Ht(n,e,o),Qs(n,e,o))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var o=zt(),m=Yn(o);m.tag=1,m.payload=n,s!=null&&(m.callback=s),n=$n(e,m,o),n!==null&&(Ht(n,e,o),Qs(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=zt(),o=Yn(s);o.tag=2,n!=null&&(o.callback=n),n=$n(e,o,s),n!==null&&(Ht(n,e,s),Qs(n,e,s))}};function of(e,n,s,o,m,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,b):n.prototype&&n.prototype.isPureReactComponent?!Ps(s,o)||!Ps(m,g):!0}function rf(e,n,s,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==e&&Nr.enqueueReplaceState(n,n.state,null)}function Di(e,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(e=e.defaultProps){s===n&&(s=S({},s));for(var m in e)s[m]===void 0&&(s[m]=e[m])}return s}function uf(e){Bl(e)}function cf(e){console.error(e)}function df(e){Bl(e)}function da(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function ff(e,n,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Tr(e,n,s){return s=Yn(s),s.tag=3,s.payload={element:null},s.callback=function(){da(e,n)},s}function mf(e){return e=Yn(e),e.tag=3,e}function pf(e,n,s,o){var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var g=o.value;e.payload=function(){return m(g)},e.callback=function(){ff(n,s,o)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){ff(n,s,o),typeof m!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function fx(e,n,s,o,m){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&Wi(n,s,m,!0),s=Ot.current,s!==null){switch(s.tag){case 31:case 13:return tn===null?Ta():s.alternate===null&&st===0&&(st=3),s.flags&=-257,s.flags|=65536,s.lanes=m,o===Zl?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),Jr(e,o,m)),!1;case 22:return s.flags|=65536,o===Zl?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),Jr(e,o,m)),!1}throw Error(a(435,s.tag))}return Jr(e,o,m),Ta(),!1}if(Le)return n=Ot.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,o!==Bo&&(e=Error(a(422),{cause:o}),Ys(Qt(e,s)))):(o!==Bo&&(n=Error(a(423),{cause:o}),Ys(Qt(n,s))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,o=Qt(o,s),m=Tr(e.stateNode,o,m),Wo(e,m),st!==4&&(st=2)),!1;var g=Error(a(520),{cause:o});if(g=Qt(g,s),dl===null?dl=[g]:dl.push(g),st!==4&&(st=2),n===null)return!0;o=Qt(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=m&-m,s.lanes|=e,e=Tr(s.stateNode,o,e),Wo(s,e),!1;case 1:if(n=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wn===null||!Wn.has(g))))return s.flags|=65536,m&=-m,s.lanes|=m,m=mf(m),pf(m,e,s,o),Wo(s,m),!1}s=s.return}while(s!==null);return!1}var Cr=Error(a(461)),ct=!1;function bt(e,n,s,o){n.child=e===null?xd(n,null,s,o):Ri(n,e.child,s,o)}function gf(e,n,s,o,m){s=s.render;var g=n.ref;if("ref"in o){var b={};for(var T in o)T!=="ref"&&(b[T]=o[T])}else b=o;return Ei(n),o=lr(e,n,s,b,g,m),T=ar(),e!==null&&!ct?(or(e,n,m),_n(e,n,m)):(Le&&T&&Oo(n),n.flags|=1,bt(e,n,o,m),n.child)}function hf(e,n,s,o,m){if(e===null){var g=s.type;return typeof g=="function"&&!Go(g)&&g.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=g,xf(e,n,g,o,m)):(e=Yl(s.type,null,o,n,n.mode,m),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!Ir(e,m)){var b=g.memoizedProps;if(s=s.compare,s=s!==null?s:Ps,s(b,o)&&e.ref===n.ref)return _n(e,n,m)}return n.flags|=1,e=bn(g,o),e.ref=n.ref,e.return=n,n.child=e}function xf(e,n,s,o,m){if(e!==null){var g=e.memoizedProps;if(Ps(g,o)&&e.ref===n.ref)if(ct=!1,n.pendingProps=o=g,Ir(e,m))(e.flags&131072)!==0&&(ct=!0);else return n.lanes=e.lanes,_n(e,n,m)}return Er(e,n,s,o,m)}function yf(e,n,s,o){var m=o.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,e!==null){for(o=n.child=e.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~g}else o=0,n.child=null;return vf(e,n,g,s,o)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xl(n,g!==null?g.cachePool:null),g!==null?Sd(n,g):tr(),bd(n);else return o=n.lanes=536870912,vf(e,n,g!==null?g.baseLanes|s:s,s,o)}else g!==null?(Xl(n,g.cachePool),Sd(n,g),Kn(),n.memoizedState=null):(e!==null&&Xl(n,null),tr(),Kn());return bt(e,n,m,s),n.child}function sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function vf(e,n,s,o,m){var g=Ko();return g=g===null?null:{parent:rt._currentValue,pool:g},n.memoizedState={baseLanes:s,cachePool:g},e!==null&&Xl(n,null),tr(),bd(n),e!==null&&Wi(e,n,o,!0),n.childLanes=m,null}function fa(e,n){return n=pa({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Sf(e,n,s){return Ri(n,e.child,null,s),e=fa(n,n.pendingProps),e.flags|=2,Vt(n),n.memoizedState=null,e}function mx(e,n,s){var o=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Le){if(o.mode==="hidden")return e=fa(n,o),n.lanes=536870912,sl(null,e);if(ir(n),(e=We)?(e=Im(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:pn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},s=nd(e),s.return=n,n.child=s,vt=n,We=null)):e=null,e===null)throw Pn(n);return n.lanes=536870912,null}return fa(n,o)}var g=e.memoizedState;if(g!==null){var b=g.dehydrated;if(ir(n),m)if(n.flags&256)n.flags&=-257,n=Sf(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(ct||Wi(e,n,s,!1),m=(s&e.childLanes)!==0,ct||m){if(o=Ze,o!==null&&(b=uc(o,s),b!==0&&b!==g.retryLane))throw g.retryLane=b,bi(e,b),Ht(o,e,b),Cr;Ta(),n=Sf(e,n,s)}else e=g.treeContext,We=nn(b.nextSibling),vt=n,Le=!0,Bn=null,en=!1,e!==null&&ld(n,e),n=fa(n,o),n.flags|=4096;return n}return e=bn(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function ma(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Er(e,n,s,o,m){return Ei(n),s=lr(e,n,s,o,void 0,m),o=ar(),e!==null&&!ct?(or(e,n,m),_n(e,n,m)):(Le&&o&&Oo(n),n.flags|=1,bt(e,n,s,m),n.child)}function bf(e,n,s,o,m,g){return Ei(n),n.updateQueue=null,s=Td(n,o,s,m),Nd(e),o=ar(),e!==null&&!ct?(or(e,n,g),_n(e,n,g)):(Le&&o&&Oo(n),n.flags|=1,bt(e,n,s,g),n.child)}function Nf(e,n,s,o,m){if(Ei(n),n.stateNode===null){var g=Ki,b=s.contextType;typeof b=="object"&&b!==null&&(g=St(b)),g=new s(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Nr,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},Qo(n),b=s.contextType,g.context=typeof b=="object"&&b!==null?St(b):Ki,g.state=n.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(br(n,s,b,o),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Nr.enqueueReplaceState(g,g.state,null),Ws(n,o,g,m),Zs(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){g=n.stateNode;var T=n.memoizedProps,A=Di(s,T);g.props=A;var P=g.context,W=s.contextType;b=Ki,typeof W=="object"&&W!==null&&(b=St(W));var re=s.getDerivedStateFromProps;W=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||P!==b)&&rf(n,g,o,b),Fn=!1;var F=n.memoizedState;g.state=F,Ws(n,o,g,m),Zs(),P=n.memoizedState,T||F!==P||Fn?(typeof re=="function"&&(br(n,s,re,o),P=n.memoizedState),(A=Fn||of(n,s,A,o,F,P,b))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=P),g.props=o,g.state=P,g.context=b,o=A):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,Zo(e,n),b=n.memoizedProps,W=Di(s,b),g.props=W,re=n.pendingProps,F=g.context,P=s.contextType,A=Ki,typeof P=="object"&&P!==null&&(A=St(P)),T=s.getDerivedStateFromProps,(P=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==re||F!==A)&&rf(n,g,o,A),Fn=!1,F=n.memoizedState,g.state=F,Ws(n,o,g,m),Zs();var X=n.memoizedState;b!==re||F!==X||Fn||e!==null&&e.dependencies!==null&&Jl(e.dependencies)?(typeof T=="function"&&(br(n,s,T,o),X=n.memoizedState),(W=Fn||of(n,s,W,o,F,X,A)||e!==null&&e.dependencies!==null&&Jl(e.dependencies))?(P||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,X,A),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,X,A)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=X),g.props=o,g.state=X,g.context=A,o=W):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),o=!1)}return g=o,ma(e,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&o?(n.child=Ri(n,e.child,null,m),n.child=Ri(n,null,s,m)):bt(e,n,s,m),n.memoizedState=g.state,e=n.child):e=_n(e,n,m),e}function Tf(e,n,s,o){return Ti(),n.flags|=256,bt(e,n,s,o),n.child}var Ar={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _r(e){return{baseLanes:e,cachePool:dd()}}function wr(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=Pt),e}function Cf(e,n,s){var o=n.pendingProps,m=!1,g=(n.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),b&&(m=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(Le){if(m?Jn(n):Kn(),(e=We)?(e=Im(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:pn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},s=nd(e),s.return=n,n.child=s,vt=n,We=null)):e=null,e===null)throw Pn(n);return cu(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,m?(Kn(),m=n.mode,T=pa({mode:"hidden",children:T},m),o=Ni(o,m,s,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=_r(s),o.childLanes=wr(e,b,s),n.memoizedState=Ar,sl(null,o)):(Jn(n),Rr(n,T))}var A=e.memoizedState;if(A!==null&&(T=A.dehydrated,T!==null)){if(g)n.flags&256?(Jn(n),n.flags&=-257,n=Mr(e,n,s)):n.memoizedState!==null?(Kn(),n.child=e.child,n.flags|=128,n=null):(Kn(),T=o.fallback,m=n.mode,o=pa({mode:"visible",children:o.children},m),T=Ni(T,m,s,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Ri(n,e.child,null,s),o=n.child,o.memoizedState=_r(s),o.childLanes=wr(e,b,s),n.memoizedState=Ar,n=sl(null,o));else if(Jn(n),cu(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var P=b.dgst;b=P,o=Error(a(419)),o.stack="",o.digest=b,Ys({value:o,source:null,stack:null}),n=Mr(e,n,s)}else if(ct||Wi(e,n,s,!1),b=(s&e.childLanes)!==0,ct||b){if(b=Ze,b!==null&&(o=uc(b,s),o!==0&&o!==A.retryLane))throw A.retryLane=o,bi(e,o),Ht(b,e,o),Cr;uu(T)||Ta(),n=Mr(e,n,s)}else uu(T)?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,We=nn(T.nextSibling),vt=n,Le=!0,Bn=null,en=!1,e!==null&&ld(n,e),n=Rr(n,o.children),n.flags|=4096);return n}return m?(Kn(),T=o.fallback,m=n.mode,A=e.child,P=A.sibling,o=bn(A,{mode:"hidden",children:o.children}),o.subtreeFlags=A.subtreeFlags&65011712,P!==null?T=bn(P,T):(T=Ni(T,m,s,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,sl(null,o),o=n.child,T=e.child.memoizedState,T===null?T=_r(s):(m=T.cachePool,m!==null?(A=rt._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=dd(),T={baseLanes:T.baseLanes|s,cachePool:m}),o.memoizedState=T,o.childLanes=wr(e,b,s),n.memoizedState=Ar,sl(e.child,o)):(Jn(n),s=e.child,e=s.sibling,s=bn(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=s,n.memoizedState=null,s)}function Rr(e,n){return n=pa({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function pa(e,n){return e=Lt(22,e,null,n),e.lanes=0,e}function Mr(e,n,s){return Ri(n,e.child,null,s),e=Rr(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Ef(e,n,s){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Fo(e.return,n,s)}function Dr(e,n,s,o,m,g){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:m,treeForkCount:g}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=s,b.tailMode=m,b.treeForkCount=g)}function Af(e,n,s){var o=n.pendingProps,m=o.revealOrder,g=o.tail;o=o.children;var b=at.current,T=(b&2)!==0;if(T?(b=b&1|2,n.flags|=128):b&=1,fe(at,b),bt(e,n,o,s),o=Le?Fs:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,s,n);else if(e.tag===19)Ef(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(s=n.child,m=null;s!==null;)e=s.alternate,e!==null&&na(e)===null&&(m=s),s=s.sibling;s=m,s===null?(m=n.child,n.child=null):(m=s.sibling,s.sibling=null),Dr(n,!1,m,s,g,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,m=n.child,n.child=null;m!==null;){if(e=m.alternate,e!==null&&na(e)===null){n.child=m;break}e=m.sibling,m.sibling=s,s=m,m=e}Dr(n,!0,s,null,g,o);break;case"together":Dr(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function _n(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Zn|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(Wi(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=bn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=bn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Ir(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Jl(e)))}function px(e,n,s){switch(n.tag){case 3:Ee(n,n.stateNode.containerInfo),zn(n,rt,e.memoizedState.cache),Ti();break;case 27:case 5:Ve(n);break;case 4:Ee(n,n.stateNode.containerInfo);break;case 10:zn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ir(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Jn(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Cf(e,n,s):(Jn(n),e=_n(e,n,s),e!==null?e.sibling:null);Jn(n);break;case 19:var m=(e.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(Wi(e,n,s,!1),o=(s&n.childLanes)!==0),m){if(o)return Af(e,n,s);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),fe(at,at.current),o)break;return null;case 22:return n.lanes=0,yf(e,n,s,n.pendingProps);case 24:zn(n,rt,e.memoizedState.cache)}return _n(e,n,s)}function _f(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)ct=!0;else{if(!Ir(e,s)&&(n.flags&128)===0)return ct=!1,px(e,n,s);ct=(e.flags&131072)!==0}else ct=!1,Le&&(n.flags&1048576)!==0&&sd(n,Fs,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=_i(n.elementType),n.type=e,typeof e=="function")Go(e)?(o=Di(e,o),n.tag=1,n=Nf(null,n,e,o,s)):(n.tag=0,n=Er(null,n,e,o,s));else{if(e!=null){var m=e.$$typeof;if(m===ee){n.tag=11,n=gf(null,n,e,o,s);break e}else if(m===D){n.tag=14,n=hf(null,n,e,o,s);break e}}throw n=me(e)||e,Error(a(306,n,""))}}return n;case 0:return Er(e,n,n.type,n.pendingProps,s);case 1:return o=n.type,m=Di(o,n.pendingProps),Nf(e,n,o,m,s);case 3:e:{if(Ee(n,n.stateNode.containerInfo),e===null)throw Error(a(387));o=n.pendingProps;var g=n.memoizedState;m=g.element,Zo(e,n),Ws(n,o,null,s);var b=n.memoizedState;if(o=b.cache,zn(n,rt,o),o!==g.cache&&Yo(n,[rt],s,!0),Zs(),o=b.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Tf(e,n,o,s);break e}else if(o!==m){m=Qt(Error(a(424)),n),Ys(m),n=Tf(e,n,o,s);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(We=nn(e.firstChild),vt=n,Le=!0,Bn=null,en=!0,s=xd(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ti(),o===m){n=_n(e,n,s);break e}bt(e,n,o,s)}n=n.child}return n;case 26:return ma(e,n),e===null?(s=jm(n.type,null,n.pendingProps,null))?n.memoizedState=s:Le||(s=n.type,e=n.pendingProps,o=Ma(te.current).createElement(s),o[yt]=n,o[Mt]=e,Nt(o,s,e),mt(o),n.stateNode=o):n.memoizedState=jm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ve(n),e===null&&Le&&(o=n.stateNode=qm(n.type,n.pendingProps,te.current),vt=n,en=!0,m=We,ii(n.type)?(du=m,We=nn(o.firstChild)):We=m),bt(e,n,n.pendingProps.children,s),ma(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Le&&((m=o=We)&&(o=zx(o,n.type,n.pendingProps,en),o!==null?(n.stateNode=o,vt=n,We=nn(o.firstChild),en=!1,m=!0):m=!1),m||Pn(n)),Ve(n),m=n.type,g=n.pendingProps,b=e!==null?e.memoizedProps:null,o=g.children,au(m,g)?o=null:b!==null&&au(m,b)&&(n.flags|=32),n.memoizedState!==null&&(m=lr(e,n,lx,null,null,s),vl._currentValue=m),ma(e,n),bt(e,n,o,s),n.child;case 6:return e===null&&Le&&((e=s=We)&&(s=Fx(s,n.pendingProps,en),s!==null?(n.stateNode=s,vt=n,We=null,e=!0):e=!1),e||Pn(n)),null;case 13:return Cf(e,n,s);case 4:return Ee(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ri(n,null,o,s):bt(e,n,o,s),n.child;case 11:return gf(e,n,n.type,n.pendingProps,s);case 7:return bt(e,n,n.pendingProps,s),n.child;case 8:return bt(e,n,n.pendingProps.children,s),n.child;case 12:return bt(e,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,zn(n,n.type,o.value),bt(e,n,o.children,s),n.child;case 9:return m=n.type._context,o=n.pendingProps.children,Ei(n),m=St(m),o=o(m),n.flags|=1,bt(e,n,o,s),n.child;case 14:return hf(e,n,n.type,n.pendingProps,s);case 15:return xf(e,n,n.type,n.pendingProps,s);case 19:return Af(e,n,s);case 31:return mx(e,n,s);case 22:return yf(e,n,s,n.pendingProps);case 24:return Ei(n),o=St(rt),e===null?(m=Ko(),m===null&&(m=Ze,g=$o(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=s),m=g),n.memoizedState={parent:o,cache:m},Qo(n),zn(n,rt,m)):((e.lanes&s)!==0&&(Zo(e,n),Ws(n,null,null,s),Zs()),m=e.memoizedState,g=n.memoizedState,m.parent!==o?(m={parent:o,cache:o},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),zn(n,rt,o)):(o=g.cache,zn(n,rt,o),o!==m.cache&&Yo(n,[rt],s,!0))),bt(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function wn(e){e.flags|=4}function kr(e,n,s,o,m){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(em())e.flags|=8192;else throw wi=Zl,Xo}else e.flags&=-16777217}function wf(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pm(n))if(em())e.flags|=8192;else throw wi=Zl,Xo}function ga(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ac():536870912,e.lanes|=n,ds|=n)}function ll(e,n){if(!Le)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function et(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(n)for(var m=e.child;m!==null;)s|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)s|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=o,e.childLanes=s,n}function gx(e,n,s){var o=n.pendingProps;switch(Vo(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(n),null;case 1:return et(n),null;case 3:return s=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Cn(rt),Ne(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Zi(n)?wn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Po())),et(n),null;case 26:var m=n.type,g=n.memoizedState;return e===null?(wn(n),g!==null?(et(n),wf(n,g)):(et(n),kr(n,m,null,o,s))):g?g!==e.memoizedState?(wn(n),et(n),wf(n,g)):(et(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&wn(n),et(n),kr(n,m,e,o,s)),null;case 27:if(Ae(n),s=te.current,m=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&wn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return et(n),null}e=I.current,Zi(n)?ad(n):(e=qm(m,o,s),n.stateNode=e,wn(n))}return et(n),null;case 5:if(Ae(n),m=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&wn(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return et(n),null}if(g=I.current,Zi(n))ad(n);else{var b=Ma(te.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?b.createElement(m,{is:o.is}):b.createElement(m)}}g[yt]=n,g[Mt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=g;e:switch(Nt(g,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wn(n)}}return et(n),kr(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&wn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=te.current,Zi(n)){if(e=n.stateNode,s=n.memoizedProps,o=null,m=vt,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}e[yt]=n,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||Cm(e.nodeValue,s)),e||Pn(n,!0)}else e=Ma(e).createTextNode(o),e[yt]=n,n.stateNode=e}return et(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zi(n),s!==null){if(e===null){if(!o)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[yt]=n}else Ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;et(n),e=!1}else s=Po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(Vt(n),n):(Vt(n),null);if((n.flags&128)!==0)throw Error(a(558))}return et(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Zi(n),o!==null&&o.dehydrated!==null){if(e===null){if(!m)throw Error(a(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[yt]=n}else Ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;et(n),m=!1}else m=Po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Vt(n),n):(Vt(n),null)}return Vt(n),(n.flags&128)!==0?(n.lanes=s,n):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=n.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==m&&(o.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),ga(n,n.updateQueue),et(n),null);case 4:return Ne(),e===null&&tu(n.stateNode.containerInfo),et(n),null;case 10:return Cn(n.type),et(n),null;case 19:if(J(at),o=n.memoizedState,o===null)return et(n),null;if(m=(n.flags&128)!==0,g=o.rendering,g===null)if(m)ll(o,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=na(e),g!==null){for(n.flags|=128,ll(o,!1),e=g.updateQueue,n.updateQueue=e,ga(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)td(s,e),s=s.sibling;return fe(at,at.current&1|2),Le&&Nn(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&z()>Sa&&(n.flags|=128,m=!0,ll(o,!1),n.lanes=4194304)}else{if(!m)if(e=na(g),e!==null){if(n.flags|=128,m=!0,e=e.updateQueue,n.updateQueue=e,ga(n,e),ll(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Le)return et(n),null}else 2*z()-o.renderingStartTime>Sa&&s!==536870912&&(n.flags|=128,m=!0,ll(o,!1),n.lanes=4194304);o.isBackwards?(g.sibling=n.child,n.child=g):(e=o.last,e!==null?e.sibling=g:n.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=z(),e.sibling=null,s=at.current,fe(at,m?s&1|2:s&1),Le&&Nn(n,o.treeForkCount),e):(et(n),null);case 22:case 23:return Vt(n),nr(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(et(n),n.subtreeFlags&6&&(n.flags|=8192)):et(n),s=n.updateQueue,s!==null&&ga(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),e!==null&&J(Ai),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Cn(rt),et(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function hx(e,n){switch(Vo(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Cn(rt),Ne(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ae(n),null;case 31:if(n.memoizedState!==null){if(Vt(n),n.alternate===null)throw Error(a(340));Ti()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Vt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ti()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(at),null;case 4:return Ne(),null;case 10:return Cn(n.type),null;case 22:case 23:return Vt(n),nr(),e!==null&&J(Ai),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Cn(rt),null;case 25:return null;default:return null}}function Rf(e,n){switch(Vo(n),n.tag){case 3:Cn(rt),Ne();break;case 26:case 27:case 5:Ae(n);break;case 4:Ne();break;case 31:n.memoizedState!==null&&Vt(n);break;case 13:Vt(n);break;case 19:J(at);break;case 10:Cn(n.type);break;case 22:case 23:Vt(n),nr(),e!==null&&J(Ai);break;case 24:Cn(rt)}}function al(e,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var m=o.next;s=m;do{if((s.tag&e)===e){o=void 0;var g=s.create,b=s.inst;o=g(),b.destroy=o}s=s.next}while(s!==m)}}catch(T){$e(n,n.return,T)}}function Xn(e,n,s){try{var o=n.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var g=m.next;o=g;do{if((o.tag&e)===e){var b=o.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,m=n;var A=s,P=T;try{P()}catch(W){$e(m,A,W)}}}o=o.next}while(o!==g)}}catch(W){$e(n,n.return,W)}}function Mf(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{vd(n,s)}catch(o){$e(e,e.return,o)}}}function Df(e,n,s){s.props=Di(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){$e(e,n,o)}}function ol(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(m){$e(e,n,m)}}function hn(e,n){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(m){$e(e,n,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(m){$e(e,n,m)}else s.current=null}function If(e){var n=e.type,s=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(m){$e(e,e.return,m)}}function Ur(e,n,s){try{var o=e.stateNode;jx(o,e.type,s,n),o[Mt]=n}catch(m){$e(e,e.return,m)}}function kf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ii(e.type)||e.tag===4}function qr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ii(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hr(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=vn));else if(o!==4&&(o===27&&ii(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Hr(e,n,s),e=e.sibling;e!==null;)Hr(e,n,s),e=e.sibling}function ha(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(o!==4&&(o===27&&ii(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(ha(e,n,s),e=e.sibling;e!==null;)ha(e,n,s),e=e.sibling}function Uf(e){var n=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);Nt(n,o,s),n[yt]=e,n[Mt]=s}catch(g){$e(e,e.return,g)}}var Rn=!1,dt=!1,Gr=!1,qf=typeof WeakSet=="function"?WeakSet:Set,pt=null;function xx(e,n){if(e=e.containerInfo,su=Ga,e=Yc(e),Mo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var m=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var b=0,T=-1,A=-1,P=0,W=0,re=e,F=null;t:for(;;){for(var X;re!==s||m!==0&&re.nodeType!==3||(T=b+m),re!==g||o!==0&&re.nodeType!==3||(A=b+o),re.nodeType===3&&(b+=re.nodeValue.length),(X=re.firstChild)!==null;)F=re,re=X;for(;;){if(re===e)break t;if(F===s&&++P===m&&(T=b),F===g&&++W===o&&(A=b),(X=re.nextSibling)!==null)break;re=F,F=re.parentNode}re=X}s=T===-1||A===-1?null:{start:T,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;for(lu={focusedElem:e,selectionRange:s},Ga=!1,pt=n;pt!==null;)if(n=pt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,pt=e;else for(;pt!==null;){switch(n=pt,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)m=e[s],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=n,m=g.memoizedProps,g=g.memoizedState,o=s.stateNode;try{var Te=Di(s.type,m);e=o.getSnapshotBeforeUpdate(Te,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(we){$e(s,s.return,we)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)ru(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ru(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,pt=e;break}pt=n.return}}function Hf(e,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Dn(e,s),o&4&&al(5,s);break;case 1:if(Dn(e,s),o&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(b){$e(s,s.return,b)}else{var m=Di(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(m,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){$e(s,s.return,b)}}o&64&&Mf(s),o&512&&ol(s,s.return);break;case 3:if(Dn(e,s),o&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{vd(e,n)}catch(b){$e(s,s.return,b)}}break;case 27:n===null&&o&4&&Uf(s);case 26:case 5:Dn(e,s),n===null&&o&4&&If(s),o&512&&ol(s,s.return);break;case 12:Dn(e,s);break;case 31:Dn(e,s),o&4&&Lf(e,s);break;case 13:Dn(e,s),o&4&&Of(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Ax.bind(null,s),Yx(e,s))));break;case 22:if(o=s.memoizedState!==null||Rn,!o){n=n!==null&&n.memoizedState!==null||dt,m=Rn;var g=dt;Rn=o,(dt=n)&&!g?In(e,s,(s.subtreeFlags&8772)!==0):Dn(e,s),Rn=m,dt=g}break;case 30:break;default:Dn(e,s)}}function Gf(e){var n=e.alternate;n!==null&&(e.alternate=null,Gf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&mo(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,It=!1;function Mn(e,n,s){for(s=s.child;s!==null;)jf(e,n,s),s=s.sibling}function jf(e,n,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Tt,s)}catch{}switch(s.tag){case 26:dt||hn(s,n),Mn(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:dt||hn(s,n);var o=nt,m=It;ii(s.type)&&(nt=s.stateNode,It=!1),Mn(e,n,s),hl(s.stateNode),nt=o,It=m;break;case 5:dt||hn(s,n);case 6:if(o=nt,m=It,nt=null,Mn(e,n,s),nt=o,It=m,nt!==null)if(It)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(g){$e(s,n,g)}else try{nt.removeChild(s.stateNode)}catch(g){$e(s,n,g)}break;case 18:nt!==null&&(It?(e=nt,Mm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),vs(e)):Mm(nt,s.stateNode));break;case 4:o=nt,m=It,nt=s.stateNode.containerInfo,It=!0,Mn(e,n,s),nt=o,It=m;break;case 0:case 11:case 14:case 15:Xn(2,s,n),dt||Xn(4,s,n),Mn(e,n,s);break;case 1:dt||(hn(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&Df(s,n,o)),Mn(e,n,s);break;case 21:Mn(e,n,s);break;case 22:dt=(o=dt)||s.memoizedState!==null,Mn(e,n,s),dt=o;break;default:Mn(e,n,s)}}function Lf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vs(e)}catch(s){$e(n,n.return,s)}}}function Of(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vs(e)}catch(s){$e(n,n.return,s)}}function yx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new qf),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new qf),n;default:throw Error(a(435,e.tag))}}function xa(e,n){var s=yx(e);n.forEach(function(o){if(!s.has(o)){s.add(o);var m=_x.bind(null,e,o);o.then(m,m)}})}function kt(e,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var m=s[o],g=e,b=n,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(ii(T.type)){nt=T.stateNode,It=!1;break e}break;case 5:nt=T.stateNode,It=!1;break e;case 3:case 4:nt=T.stateNode.containerInfo,It=!0;break e}T=T.return}if(nt===null)throw Error(a(160));jf(g,b,m),nt=null,It=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Vf(n,e),n=n.sibling}var rn=null;function Vf(e,n){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(n,e),Ut(e),o&4&&(Xn(3,e,e.return),al(3,e),Xn(5,e,e.return));break;case 1:kt(n,e),Ut(e),o&512&&(dt||s===null||hn(s,s.return)),o&64&&Rn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var m=rn;if(kt(n,e),Ut(e),o&512&&(dt||s===null||hn(s,s.return)),o&4){var g=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){e:{o=e.type,s=e.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Us]||g[yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(o),m.head.insertBefore(g,m.querySelector("head > title"))),Nt(g,o,s),g[yt]=e,mt(g),o=g;break e;case"link":var b=Vm("link","href",m).get(o+(s.href||""));if(b){for(var T=0;T<b.length;T++)if(g=b[T],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(T,1);break t}}g=m.createElement(o),Nt(g,o,s),m.head.appendChild(g);break;case"meta":if(b=Vm("meta","content",m).get(o+(s.content||""))){for(T=0;T<b.length;T++)if(g=b[T],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(T,1);break t}}g=m.createElement(o),Nt(g,o,s),m.head.appendChild(g);break;default:throw Error(a(468,o))}g[yt]=e,mt(g),o=g}e.stateNode=o}else Bm(m,e.type,e.stateNode);else e.stateNode=Om(m,o,e.memoizedProps);else g!==o?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,o===null?Bm(m,e.type,e.stateNode):Om(m,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Ur(e,e.memoizedProps,s.memoizedProps)}break;case 27:kt(n,e),Ut(e),o&512&&(dt||s===null||hn(s,s.return)),s!==null&&o&4&&Ur(e,e.memoizedProps,s.memoizedProps);break;case 5:if(kt(n,e),Ut(e),o&512&&(dt||s===null||hn(s,s.return)),e.flags&32){m=e.stateNode;try{Bi(m,"")}catch(Te){$e(e,e.return,Te)}}o&4&&e.stateNode!=null&&(m=e.memoizedProps,Ur(e,m,s!==null?s.memoizedProps:m)),o&1024&&(Gr=!0);break;case 6:if(kt(n,e),Ut(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(Te){$e(e,e.return,Te)}}break;case 3:if(ka=null,m=rn,rn=Da(n.containerInfo),kt(n,e),rn=m,Ut(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{vs(n.containerInfo)}catch(Te){$e(e,e.return,Te)}Gr&&(Gr=!1,Bf(e));break;case 4:o=rn,rn=Da(e.stateNode.containerInfo),kt(n,e),Ut(e),rn=o;break;case 12:kt(n,e),Ut(e);break;case 31:kt(n,e),Ut(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,xa(e,o)));break;case 13:kt(n,e),Ut(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(va=z()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,xa(e,o)));break;case 22:m=e.memoizedState!==null;var A=s!==null&&s.memoizedState!==null,P=Rn,W=dt;if(Rn=P||m,dt=W||A,kt(n,e),dt=W,Rn=P,Ut(e),o&8192)e:for(n=e.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(s===null||A||Rn||dt||Ii(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){A=s=n;try{if(g=A.stateNode,m)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=A.stateNode;var re=A.memoizedProps.style,F=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Te){$e(A,A.return,Te)}}}else if(n.tag===6){if(s===null){A=n;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(Te){$e(A,A.return,Te)}}}else if(n.tag===18){if(s===null){A=n;try{var X=A.stateNode;m?Dm(X,!0):Dm(A.stateNode,!1)}catch(Te){$e(A,A.return,Te)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,xa(e,s))));break;case 19:kt(n,e),Ut(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,xa(e,o)));break;case 30:break;case 21:break;default:kt(n,e),Ut(e)}}function Ut(e){var n=e.flags;if(n&2){try{for(var s,o=e.return;o!==null;){if(kf(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var m=s.stateNode,g=qr(e);ha(e,g,m);break;case 5:var b=s.stateNode;s.flags&32&&(Bi(b,""),s.flags&=-33);var T=qr(e);ha(e,T,b);break;case 3:case 4:var A=s.stateNode.containerInfo,P=qr(e);Hr(e,P,A);break;default:throw Error(a(161))}}catch(W){$e(e,e.return,W)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Bf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Bf(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Dn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Hf(e,n.alternate,n),n=n.sibling}function Ii(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Xn(4,n,n.return),Ii(n);break;case 1:hn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Df(n,n.return,s),Ii(n);break;case 27:hl(n.stateNode);case 26:case 5:hn(n,n.return),Ii(n);break;case 22:n.memoizedState===null&&Ii(n);break;case 30:Ii(n);break;default:Ii(n)}e=e.sibling}}function In(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,m=e,g=n,b=g.flags;switch(g.tag){case 0:case 11:case 15:In(m,g,s),al(4,g);break;case 1:if(In(m,g,s),o=g,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(P){$e(o,o.return,P)}if(o=g,m=o.updateQueue,m!==null){var T=o.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)yd(A[m],T)}catch(P){$e(o,o.return,P)}}s&&b&64&&Mf(g),ol(g,g.return);break;case 27:Uf(g);case 26:case 5:In(m,g,s),s&&o===null&&b&4&&If(g),ol(g,g.return);break;case 12:In(m,g,s);break;case 31:In(m,g,s),s&&b&4&&Lf(m,g);break;case 13:In(m,g,s),s&&b&4&&Of(m,g);break;case 22:g.memoizedState===null&&In(m,g,s),ol(g,g.return);break;case 30:break;default:In(m,g,s)}n=n.sibling}}function jr(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&$s(s))}function Lr(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&$s(e))}function un(e,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Pf(e,n,s,o),n=n.sibling}function Pf(e,n,s,o){var m=n.flags;switch(n.tag){case 0:case 11:case 15:un(e,n,s,o),m&2048&&al(9,n);break;case 1:un(e,n,s,o);break;case 3:un(e,n,s,o),m&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&$s(e)));break;case 12:if(m&2048){un(e,n,s,o),e=n.stateNode;try{var g=n.memoizedProps,b=g.id,T=g.onPostCommit;typeof T=="function"&&T(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){$e(n,n.return,A)}}else un(e,n,s,o);break;case 31:un(e,n,s,o);break;case 13:un(e,n,s,o);break;case 23:break;case 22:g=n.stateNode,b=n.alternate,n.memoizedState!==null?g._visibility&2?un(e,n,s,o):rl(e,n):g._visibility&2?un(e,n,s,o):(g._visibility|=2,rs(e,n,s,o,(n.subtreeFlags&10256)!==0||!1)),m&2048&&jr(b,n);break;case 24:un(e,n,s,o),m&2048&&Lr(n.alternate,n);break;default:un(e,n,s,o)}}function rs(e,n,s,o,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,b=n,T=s,A=o,P=b.flags;switch(b.tag){case 0:case 11:case 15:rs(g,b,T,A,m),al(8,b);break;case 23:break;case 22:var W=b.stateNode;b.memoizedState!==null?W._visibility&2?rs(g,b,T,A,m):rl(g,b):(W._visibility|=2,rs(g,b,T,A,m)),m&&P&2048&&jr(b.alternate,b);break;case 24:rs(g,b,T,A,m),m&&P&2048&&Lr(b.alternate,b);break;default:rs(g,b,T,A,m)}n=n.sibling}}function rl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,o=n,m=o.flags;switch(o.tag){case 22:rl(s,o),m&2048&&jr(o.alternate,o);break;case 24:rl(s,o),m&2048&&Lr(o.alternate,o);break;default:rl(s,o)}n=n.sibling}}var ul=8192;function us(e,n,s){if(e.subtreeFlags&ul)for(e=e.child;e!==null;)zf(e,n,s),e=e.sibling}function zf(e,n,s){switch(e.tag){case 26:us(e,n,s),e.flags&ul&&e.memoizedState!==null&&sy(s,rn,e.memoizedState,e.memoizedProps);break;case 5:us(e,n,s);break;case 3:case 4:var o=rn;rn=Da(e.stateNode.containerInfo),us(e,n,s),rn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=ul,ul=16777216,us(e,n,s),ul=o):us(e,n,s));break;default:us(e,n,s)}}function Ff(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function cl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];pt=o,$f(o,e)}Ff(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Yf(e),e=e.sibling}function Yf(e){switch(e.tag){case 0:case 11:case 15:cl(e),e.flags&2048&&Xn(9,e,e.return);break;case 3:cl(e);break;case 12:cl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ya(e)):cl(e);break;default:cl(e)}}function ya(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];pt=o,$f(o,e)}Ff(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Xn(8,n,n.return),ya(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,ya(n));break;default:ya(n)}e=e.sibling}}function $f(e,n){for(;pt!==null;){var s=pt;switch(s.tag){case 0:case 11:case 15:Xn(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:$s(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,pt=o;else e:for(s=e;pt!==null;){o=pt;var m=o.sibling,g=o.return;if(Gf(o),o===s){pt=null;break e}if(m!==null){m.return=g,pt=m;break e}pt=g}}}var vx={getCacheForType:function(e){var n=St(rt),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return St(rt).controller.signal}},Sx=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Ze=null,qe=null,Ge=0,Ye=0,Bt=null,Qn=!1,cs=!1,Or=!1,kn=0,st=0,Zn=0,ki=0,Vr=0,Pt=0,ds=0,dl=null,qt=null,Br=!1,va=0,Jf=0,Sa=1/0,ba=null,Wn=null,ft=0,ei=null,fs=null,Un=0,Pr=0,zr=null,Kf=null,fl=0,Fr=null;function zt(){return(Fe&2)!==0&&Ge!==0?Ge&-Ge:k.T!==null?Qr():cc()}function Xf(){if(Pt===0)if((Ge&536870912)===0||Le){var e=Rl;Rl<<=1,(Rl&3932160)===0&&(Rl=262144),Pt=e}else Pt=536870912;return e=Ot.current,e!==null&&(e.flags|=32),Pt}function Ht(e,n,s){(e===Ze&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(ms(e,0),ti(e,Ge,Pt,!1)),ks(e,s),((Fe&2)===0||e!==Ze)&&(e===Ze&&((Fe&2)===0&&(ki|=s),st===4&&ti(e,Ge,Pt,!1)),xn(e))}function Qf(e,n,s){if((Fe&6)!==0)throw Error(a(327));var o=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Is(e,n),m=o?Tx(e,n):$r(e,n,!0),g=o;do{if(m===0){cs&&!o&&ti(e,n,0,!1);break}else{if(s=e.current.alternate,g&&!bx(s)){m=$r(e,n,!1),g=!1;continue}if(m===2){if(g=n,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var T=e;m=dl;var A=T.current.memoizedState.isDehydrated;if(A&&(ms(T,b).flags|=256),b=$r(T,b,!1),b!==2){if(Or&&!A){T.errorRecoveryDisabledLanes|=g,ki|=g,m=4;break e}g=qt,qt=m,g!==null&&(qt===null?qt=g:qt.push.apply(qt,g))}m=b}if(g=!1,m!==2)continue}}if(m===1){ms(e,0),ti(e,n,0,!0);break}e:{switch(o=e,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:ti(o,n,Pt,!Qn);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(m=va+300-z(),10<m)){if(ti(o,n,Pt,!Qn),Dl(o,0,!0)!==0)break e;Un=n,o.timeoutHandle=wm(Zf.bind(null,o,s,qt,ba,Br,n,Pt,ki,ds,Qn,g,"Throttled",-0,0),m);break e}Zf(o,s,qt,ba,Br,n,Pt,ki,ds,Qn,g,null,-0,0)}}break}while(!0);xn(e)}function Zf(e,n,s,o,m,g,b,T,A,P,W,re,F,X){if(e.timeoutHandle=-1,re=n.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vn},zf(n,g,re);var Te=(g&62914560)===g?va-z():(g&4194048)===g?Jf-z():0;if(Te=ly(re,Te),Te!==null){Un=g,e.cancelPendingCommit=Te(am.bind(null,e,n,g,s,o,m,b,T,A,W,re,null,F,X)),ti(e,g,b,!P);return}}am(e,n,g,s,o,m,b,T,A)}function bx(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var m=s[o],g=m.getSnapshot;m=m.value;try{if(!jt(g(),m))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ti(e,n,s,o){n&=~Vr,n&=~ki,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var m=n;0<m;){var g=31-_t(m),b=1<<g;o[g]=-1,m&=~b}s!==0&&oc(e,s,n)}function Na(){return(Fe&6)===0?(ml(0),!1):!0}function Yr(){if(qe!==null){if(Ye===0)var e=qe.return;else e=qe,Tn=Ci=null,rr(e),is=null,Ks=0,e=qe;for(;e!==null;)Rf(e.alternate,e),e=e.return;qe=null}}function ms(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Vx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Un=0,Yr(),Ze=e,qe=s=bn(e.current,null),Ge=n,Ye=0,Bt=null,Qn=!1,cs=Is(e,n),Or=!1,ds=Pt=Vr=ki=Zn=st=0,qt=dl=null,Br=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var m=31-_t(o),g=1<<m;n|=e[m],o&=~g}return kn=n,Pl(),s}function Wf(e,n){De=null,k.H=il,n===ns||n===Ql?(n=pd(),Ye=3):n===Xo?(n=pd(),Ye=4):Ye=n===Cr?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Bt=n,qe===null&&(st=1,da(e,Qt(n,e.current)))}function em(){var e=Ot.current;return e===null?!0:(Ge&4194048)===Ge?tn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===tn:!1}function tm(){var e=k.H;return k.H=il,e===null?il:e}function nm(){var e=k.A;return k.A=vx,e}function Ta(){st=4,Qn||(Ge&4194048)!==Ge&&Ot.current!==null||(cs=!0),(Zn&134217727)===0&&(ki&134217727)===0||Ze===null||ti(Ze,Ge,Pt,!1)}function $r(e,n,s){var o=Fe;Fe|=2;var m=tm(),g=nm();(Ze!==e||Ge!==n)&&(ba=null,ms(e,n)),n=!1;var b=st;e:do try{if(Ye!==0&&qe!==null){var T=qe,A=Bt;switch(Ye){case 8:Yr(),b=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(n=!0);var P=Ye;if(Ye=0,Bt=null,ps(e,T,A,P),s&&cs){b=0;break e}break;default:P=Ye,Ye=0,Bt=null,ps(e,T,A,P)}}Nx(),b=st;break}catch(W){Wf(e,W)}while(!0);return n&&e.shellSuspendCounter++,Tn=Ci=null,Fe=o,k.H=m,k.A=g,qe===null&&(Ze=null,Ge=0,Pl()),b}function Nx(){for(;qe!==null;)im(qe)}function Tx(e,n){var s=Fe;Fe|=2;var o=tm(),m=nm();Ze!==e||Ge!==n?(ba=null,Sa=z()+500,ms(e,n)):cs=Is(e,n);e:do try{if(Ye!==0&&qe!==null){n=qe;var g=Bt;t:switch(Ye){case 1:Ye=0,Bt=null,ps(e,n,g,1);break;case 2:case 9:if(fd(g)){Ye=0,Bt=null,sm(n);break}n=function(){Ye!==2&&Ye!==9||Ze!==e||(Ye=7),xn(e)},g.then(n,n);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:fd(g)?(Ye=0,Bt=null,sm(n)):(Ye=0,Bt=null,ps(e,n,g,7));break;case 5:var b=null;switch(qe.tag){case 26:b=qe.memoizedState;case 5:case 27:var T=qe;if(b?Pm(b):T.stateNode.complete){Ye=0,Bt=null;var A=T.sibling;if(A!==null)qe=A;else{var P=T.return;P!==null?(qe=P,Ca(P)):qe=null}break t}}Ye=0,Bt=null,ps(e,n,g,5);break;case 6:Ye=0,Bt=null,ps(e,n,g,6);break;case 8:Yr(),st=6;break e;default:throw Error(a(462))}}Cx();break}catch(W){Wf(e,W)}while(!0);return Tn=Ci=null,k.H=o,k.A=m,Fe=s,qe!==null?0:(Ze=null,Ge=0,Pl(),st)}function Cx(){for(;qe!==null&&!Ds();)im(qe)}function im(e){var n=_f(e.alternate,e,kn);e.memoizedProps=e.pendingProps,n===null?Ca(e):qe=n}function sm(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=bf(s,n,n.pendingProps,n.type,void 0,Ge);break;case 11:n=bf(s,n,n.pendingProps,n.type.render,n.ref,Ge);break;case 5:rr(n);default:Rf(s,n),n=qe=td(n,kn),n=_f(s,n,kn)}e.memoizedProps=e.pendingProps,n===null?Ca(e):qe=n}function ps(e,n,s,o){Tn=Ci=null,rr(n),is=null,Ks=0;var m=n.return;try{if(fx(e,m,n,s,Ge)){st=1,da(e,Qt(s,e.current)),qe=null;return}}catch(g){if(m!==null)throw qe=m,g;st=1,da(e,Qt(s,e.current)),qe=null;return}n.flags&32768?(Le||o===1?e=!0:cs||(Ge&536870912)!==0?e=!1:(Qn=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ot.current,o!==null&&o.tag===13&&(o.flags|=16384))),lm(n,e)):Ca(n)}function Ca(e){var n=e;do{if((n.flags&32768)!==0){lm(n,Qn);return}e=n.return;var s=gx(n.alternate,n,kn);if(s!==null){qe=s;return}if(n=n.sibling,n!==null){qe=n;return}qe=n=e}while(n!==null);st===0&&(st=5)}function lm(e,n){do{var s=hx(e.alternate,e);if(s!==null){s.flags&=32767,qe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){qe=e;return}qe=e=s}while(e!==null);st=6,qe=null}function am(e,n,s,o,m,g,b,T,A){e.cancelPendingCommit=null;do Ea();while(ft!==0);if((Fe&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(g=n.lanes|n.childLanes,g|=qo,i0(e,s,g,b,T,A),e===Ze&&(qe=Ze=null,Ge=0),fs=n,ei=e,Un=s,Pr=g,zr=m,Kf=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wx(pe,function(){return dm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,m=se.p,se.p=2,b=Fe,Fe|=4;try{xx(e,n,s)}finally{Fe=b,se.p=m,k.T=o}}ft=1,om(),rm(),um()}}function om(){if(ft===1){ft=0;var e=ei,n=fs,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=k.T,k.T=null;var o=se.p;se.p=2;var m=Fe;Fe|=4;try{Vf(n,e);var g=lu,b=Yc(e.containerInfo),T=g.focusedElem,A=g.selectionRange;if(b!==T&&T&&T.ownerDocument&&Fc(T.ownerDocument.documentElement,T)){if(A!==null&&Mo(T)){var P=A.start,W=A.end;if(W===void 0&&(W=P),"selectionStart"in T)T.selectionStart=P,T.selectionEnd=Math.min(W,T.value.length);else{var re=T.ownerDocument||document,F=re&&re.defaultView||window;if(F.getSelection){var X=F.getSelection(),Te=T.textContent.length,we=Math.min(A.start,Te),Xe=A.end===void 0?we:Math.min(A.end,Te);!X.extend&&we>Xe&&(b=Xe,Xe=we,we=b);var G=zc(T,we),R=zc(T,Xe);if(G&&R&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==R.node||X.focusOffset!==R.offset)){var B=re.createRange();B.setStart(G.node,G.offset),X.removeAllRanges(),we>Xe?(X.addRange(B),X.extend(R.node,R.offset)):(B.setEnd(R.node,R.offset),X.addRange(B))}}}}for(re=[],X=T;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var le=re[T];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Ga=!!su,lu=su=null}finally{Fe=m,se.p=o,k.T=s}}e.current=n,ft=2}}function rm(){if(ft===2){ft=0;var e=ei,n=fs,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=k.T,k.T=null;var o=se.p;se.p=2;var m=Fe;Fe|=4;try{Hf(e,n.alternate,n)}finally{Fe=m,se.p=o,k.T=s}}ft=3}}function um(){if(ft===4||ft===3){ft=0,gi();var e=ei,n=fs,s=Un,o=Kf;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,fs=ei=null,cm(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Wn=null),co(s),n=n.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Tt,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=k.T,m=se.p,se.p=2,k.T=null;try{for(var g=e.onRecoverableError,b=0;b<o.length;b++){var T=o[b];g(T.value,{componentStack:T.stack})}}finally{k.T=n,se.p=m}}(Un&3)!==0&&Ea(),xn(e),m=e.pendingLanes,(s&261930)!==0&&(m&42)!==0?e===Fr?fl++:(fl=0,Fr=e):fl=0,ml(0)}}function cm(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,$s(n)))}function Ea(){return om(),rm(),um(),dm()}function dm(){if(ft!==5)return!1;var e=ei,n=Pr;Pr=0;var s=co(Un),o=k.T,m=se.p;try{se.p=32>s?32:s,k.T=null,s=zr,zr=null;var g=ei,b=Un;if(ft=0,fs=ei=null,Un=0,(Fe&6)!==0)throw Error(a(331));var T=Fe;if(Fe|=4,Yf(g.current),Pf(g,g.current,b,s),Fe=T,ml(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Tt,g)}catch{}return!0}finally{se.p=m,k.T=o,cm(e,n)}}function fm(e,n,s){n=Qt(s,n),n=Tr(e.stateNode,n,2),e=$n(e,n,2),e!==null&&(ks(e,2),xn(e))}function $e(e,n,s){if(e.tag===3)fm(e,e,s);else for(;n!==null;){if(n.tag===3){fm(n,e,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Wn===null||!Wn.has(o))){e=Qt(s,e),s=mf(2),o=$n(n,s,2),o!==null&&(pf(s,o,n,e),ks(o,2),xn(o));break}}n=n.return}}function Jr(e,n,s){var o=e.pingCache;if(o===null){o=e.pingCache=new Sx;var m=new Set;o.set(n,m)}else m=o.get(n),m===void 0&&(m=new Set,o.set(n,m));m.has(s)||(Or=!0,m.add(s),e=Ex.bind(null,e,n,s),n.then(e,e))}function Ex(e,n,s){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ze===e&&(Ge&s)===s&&(st===4||st===3&&(Ge&62914560)===Ge&&300>z()-va?(Fe&2)===0&&ms(e,0):Vr|=s,ds===Ge&&(ds=0)),xn(e)}function mm(e,n){n===0&&(n=ac()),e=bi(e,n),e!==null&&(ks(e,n),xn(e))}function Ax(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),mm(e,s)}function _x(e,n){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,m=e.memoizedState;m!==null&&(s=m.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),mm(e,s)}function wx(e,n){return dn(e,n)}var Aa=null,gs=null,Kr=!1,_a=!1,Xr=!1,ni=0;function xn(e){e!==gs&&e.next===null&&(gs===null?Aa=gs=e:gs=gs.next=e),_a=!0,Kr||(Kr=!0,Mx())}function ml(e,n){if(!Xr&&_a){Xr=!0;do for(var s=!1,o=Aa;o!==null;){if(e!==0){var m=o.pendingLanes;if(m===0)var g=0;else{var b=o.suspendedLanes,T=o.pingedLanes;g=(1<<31-_t(42|e)+1)-1,g&=m&~(b&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,xm(o,g))}else g=Ge,g=Dl(o,o===Ze?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Is(o,g)||(s=!0,xm(o,g));o=o.next}while(s);Xr=!1}}function Rx(){pm()}function pm(){_a=Kr=!1;var e=0;ni!==0&&Ox()&&(e=ni);for(var n=z(),s=null,o=Aa;o!==null;){var m=o.next,g=gm(o,n);g===0?(o.next=null,s===null?Aa=m:s.next=m,m===null&&(gs=s)):(s=o,(e!==0||(g&3)!==0)&&(_a=!0)),o=m}ft!==0&&ft!==5||ml(e),ni!==0&&(ni=0)}function gm(e,n){for(var s=e.suspendedLanes,o=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-_t(g),T=1<<b,A=m[b];A===-1?((T&s)===0||(T&o)!==0)&&(m[b]=n0(T,n)):A<=n&&(e.expiredLanes|=T),g&=~T}if(n=Ze,s=Ge,s=Dl(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===n&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&fn(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Is(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(o!==null&&fn(o),co(s)){case 2:case 8:s=ae;break;case 32:s=pe;break;case 268435456:s=Re;break;default:s=pe}return o=hm.bind(null,e),s=dn(s,o),e.callbackPriority=n,e.callbackNode=s,n}return o!==null&&o!==null&&fn(o),e.callbackPriority=2,e.callbackNode=null,2}function hm(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Ea()&&e.callbackNode!==s)return null;var o=Ge;return o=Dl(e,e===Ze?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Qf(e,o,n),gm(e,z()),e.callbackNode!=null&&e.callbackNode===s?hm.bind(null,e):null)}function xm(e,n){if(Ea())return null;Qf(e,n,!0)}function Mx(){Bx(function(){(Fe&6)!==0?dn(Z,Rx):pm()})}function Qr(){if(ni===0){var e=es;e===0&&(e=wl,wl<<=1,(wl&261888)===0&&(wl=256)),ni=e}return ni}function ym(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ql(""+e)}function vm(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function Dx(e,n,s,o,m){if(n==="submit"&&s&&s.stateNode===m){var g=ym((m[Mt]||null).action),b=o.submitter;b&&(n=(n=b[Mt]||null)?ym(n.formAction):b.getAttribute("formAction"),n!==null&&(g=n,b=null));var T=new Ll("action","action",null,o,m);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ni!==0){var A=b?vm(m,b):new FormData(m);xr(s,{pending:!0,data:A,method:m.method,action:g},null,A)}}else typeof g=="function"&&(T.preventDefault(),A=b?vm(m,b):new FormData(m),xr(s,{pending:!0,data:A,method:m.method,action:g},g,A))},currentTarget:m}]})}}for(var Zr=0;Zr<Uo.length;Zr++){var Wr=Uo[Zr],Ix=Wr.toLowerCase(),kx=Wr[0].toUpperCase()+Wr.slice(1);on(Ix,"on"+kx)}on(Kc,"onAnimationEnd"),on(Xc,"onAnimationIteration"),on(Qc,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(K0,"onTransitionRun"),on(X0,"onTransitionStart"),on(Q0,"onTransitionCancel"),on(Zc,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ux=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function Sm(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],m=o.event;o=o.listeners;e:{var g=void 0;if(n)for(var b=o.length-1;0<=b;b--){var T=o[b],A=T.instance,P=T.currentTarget;if(T=T.listener,A!==g&&m.isPropagationStopped())break e;g=T,m.currentTarget=P;try{g(m)}catch(W){Bl(W)}m.currentTarget=null,g=A}else for(b=0;b<o.length;b++){if(T=o[b],A=T.instance,P=T.currentTarget,T=T.listener,A!==g&&m.isPropagationStopped())break e;g=T,m.currentTarget=P;try{g(m)}catch(W){Bl(W)}m.currentTarget=null,g=A}}}}function He(e,n){var s=n[fo];s===void 0&&(s=n[fo]=new Set);var o=e+"__bubble";s.has(o)||(bm(n,e,2,!1),s.add(o))}function eu(e,n,s){var o=0;n&&(o|=4),bm(s,e,o,n)}var wa="_reactListening"+Math.random().toString(36).slice(2);function tu(e){if(!e[wa]){e[wa]=!0,mc.forEach(function(s){s!=="selectionchange"&&(Ux.has(s)||eu(s,!1,e),eu(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wa]||(n[wa]=!0,eu("selectionchange",!1,n))}}function bm(e,n,s,o){switch(Xm(n)){case 2:var m=ry;break;case 8:m=uy;break;default:m=hu}s=m.bind(null,n,s,e),m=void 0,!bo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),o?m!==void 0?e.addEventListener(n,s,{capture:!0,passive:m}):e.addEventListener(n,s,!0):m!==void 0?e.addEventListener(n,s,{passive:m}):e.addEventListener(n,s,!1)}function nu(e,n,s,o,m){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var T=o.stateNode.containerInfo;if(T===m)break;if(b===4)for(b=o.return;b!==null;){var A=b.tag;if((A===3||A===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;T!==null;){if(b=Gi(T),b===null)return;if(A=b.tag,A===5||A===6||A===26||A===27){o=g=b;continue e}T=T.parentNode}}o=o.return}Ec(function(){var P=g,W=vo(s),re=[];e:{var F=Wc.get(e);if(F!==void 0){var X=Ll,Te=e;switch(e){case"keypress":if(Gl(s)===0)break e;case"keydown":case"keyup":X=_0;break;case"focusin":Te="focus",X=Eo;break;case"focusout":Te="blur",X=Eo;break;case"beforeblur":case"afterblur":X=Eo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=g0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=M0;break;case Kc:case Xc:case Qc:X=y0;break;case Zc:X=I0;break;case"scroll":case"scrollend":X=m0;break;case"wheel":X=U0;break;case"copy":case"cut":case"paste":X=S0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Mc;break;case"toggle":case"beforetoggle":X=H0}var we=(n&4)!==0,Xe=!we&&(e==="scroll"||e==="scrollend"),G=we?F!==null?F+"Capture":null:F;we=[];for(var R=P,B;R!==null;){var le=R;if(B=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||B===null||G===null||(le=Hs(R,G),le!=null&&we.push(gl(R,le,B))),Xe)break;R=R.return}0<we.length&&(F=new X(F,Te,null,s,W),re.push({event:F,listeners:we}))}}if((n&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",F&&s!==yo&&(Te=s.relatedTarget||s.fromElement)&&(Gi(Te)||Te[Hi]))break e;if((X||F)&&(F=W.window===W?W:(F=W.ownerDocument)?F.defaultView||F.parentWindow:window,X?(Te=s.relatedTarget||s.toElement,X=P,Te=Te?Gi(Te):null,Te!==null&&(Xe=d(Te),we=Te.tag,Te!==Xe||we!==5&&we!==27&&we!==6)&&(Te=null)):(X=null,Te=P),X!==Te)){if(we=wc,le="onMouseLeave",G="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(we=Mc,le="onPointerLeave",G="onPointerEnter",R="pointer"),Xe=X==null?F:qs(X),B=Te==null?F:qs(Te),F=new we(le,R+"leave",X,s,W),F.target=Xe,F.relatedTarget=B,le=null,Gi(W)===P&&(we=new we(G,R+"enter",Te,s,W),we.target=B,we.relatedTarget=Xe,le=we),Xe=le,X&&Te)t:{for(we=qx,G=X,R=Te,B=0,le=G;le;le=we(le))B++;le=0;for(var _e=R;_e;_e=we(_e))le++;for(;0<B-le;)G=we(G),B--;for(;0<le-B;)R=we(R),le--;for(;B--;){if(G===R||R!==null&&G===R.alternate){we=G;break t}G=we(G),R=we(R)}we=null}else we=null;X!==null&&Nm(re,F,X,we,!1),Te!==null&&Xe!==null&&Nm(re,Xe,Te,we,!0)}}e:{if(F=P?qs(P):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var Be=jc;else if(Hc(F))if(Lc)Be=Y0;else{Be=z0;var Ce=P0}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?P&&xo(P.elementType)&&(Be=jc):Be=F0;if(Be&&(Be=Be(e,P))){Gc(re,Be,s,W);break e}Ce&&Ce(e,F,P),e==="focusout"&&P&&F.type==="number"&&P.memoizedProps.value!=null&&ho(F,"number",F.value)}switch(Ce=P?qs(P):window,e){case"focusin":(Hc(Ce)||Ce.contentEditable==="true")&&(Yi=Ce,Do=P,zs=null);break;case"focusout":zs=Do=Yi=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,$c(re,s,W);break;case"selectionchange":if(J0)break;case"keydown":case"keyup":$c(re,s,W)}var Ie;if(_o)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Fi?Uc(e,s)&&(je="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(je="onCompositionStart");je&&(Dc&&s.locale!=="ko"&&(Fi||je!=="onCompositionStart"?je==="onCompositionEnd"&&Fi&&(Ie=Ac()):(On=W,No="value"in On?On.value:On.textContent,Fi=!0)),Ce=Ra(P,je),0<Ce.length&&(je=new Rc(je,e,null,s,W),re.push({event:je,listeners:Ce}),Ie?je.data=Ie:(Ie=qc(s),Ie!==null&&(je.data=Ie)))),(Ie=j0?L0(e,s):O0(e,s))&&(je=Ra(P,"onBeforeInput"),0<je.length&&(Ce=new Rc("onBeforeInput","beforeinput",null,s,W),re.push({event:Ce,listeners:je}),Ce.data=Ie)),Dx(re,e,P,s,W)}Sm(re,n)})}function gl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Ra(e,n){for(var s=n+"Capture",o=[];e!==null;){var m=e,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Hs(e,s),m!=null&&o.unshift(gl(e,m,g)),m=Hs(e,n),m!=null&&o.push(gl(e,m,g))),e.tag===3)return o;e=e.return}return[]}function qx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Nm(e,n,s,o,m){for(var g=n._reactName,b=[];s!==null&&s!==o;){var T=s,A=T.alternate,P=T.stateNode;if(T=T.tag,A!==null&&A===o)break;T!==5&&T!==26&&T!==27||P===null||(A=P,m?(P=Hs(s,g),P!=null&&b.unshift(gl(s,P,A))):m||(P=Hs(s,g),P!=null&&b.push(gl(s,P,A)))),s=s.return}b.length!==0&&e.push({event:n,listeners:b})}var Hx=/\r\n?/g,Gx=/\u0000|\uFFFD/g;function Tm(e){return(typeof e=="string"?e:""+e).replace(Hx,`
`).replace(Gx,"")}function Cm(e,n){return n=Tm(n),Tm(e)===n}function Ke(e,n,s,o,m,g){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Bi(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Bi(e,""+o);break;case"className":kl(e,"class",o);break;case"tabIndex":kl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(e,s,o);break;case"style":Tc(e,o,g);break;case"data":if(n!=="object"){kl(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=ql(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(n!=="input"&&Ke(e,n,"name",m.name,m,null),Ke(e,n,"formEncType",m.formEncType,m,null),Ke(e,n,"formMethod",m.formMethod,m,null),Ke(e,n,"formTarget",m.formTarget,m,null)):(Ke(e,n,"encType",m.encType,m,null),Ke(e,n,"method",m.method,m,null),Ke(e,n,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=ql(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=vn);break;case"onScroll":o!=null&&He("scroll",e);break;case"onScrollEnd":o!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=ql(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":He("beforetoggle",e),He("toggle",e),Il(e,"popover",o);break;case"xlinkActuate":yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":yn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":yn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":yn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":yn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Il(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=d0.get(s)||s,Il(e,s,o))}}function iu(e,n,s,o,m,g){switch(s){case"style":Tc(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof o=="string"?Bi(e,o):(typeof o=="number"||typeof o=="bigint")&&Bi(e,""+o);break;case"onScroll":o!=null&&He("scroll",e);break;case"onScrollEnd":o!=null&&He("scrollend",e);break;case"onClick":o!=null&&(e.onclick=vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pc.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(m=s.endsWith("Capture"),n=s.slice(2,m?s.length-7:void 0),g=e[Mt]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(n,g,m),typeof o=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,o,m);break e}s in e?e[s]=o:o===!0?e.setAttribute(s,""):Il(e,s,o)}}}function Nt(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var o=!1,m=!1,g;for(g in s)if(s.hasOwnProperty(g)){var b=s[g];if(b!=null)switch(g){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ke(e,n,g,b,s,null)}}m&&Ke(e,n,"srcSet",s.srcSet,s,null),o&&Ke(e,n,"src",s.src,s,null);return;case"input":He("invalid",e);var T=g=b=m=null,A=null,P=null;for(o in s)if(s.hasOwnProperty(o)){var W=s[o];if(W!=null)switch(o){case"name":m=W;break;case"type":b=W;break;case"checked":A=W;break;case"defaultChecked":P=W;break;case"value":g=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,n));break;default:Ke(e,n,o,W,s,null)}}vc(e,g,T,A,P,b,m,!1);return;case"select":He("invalid",e),o=b=g=null;for(m in s)if(s.hasOwnProperty(m)&&(T=s[m],T!=null))switch(m){case"value":g=T;break;case"defaultValue":b=T;break;case"multiple":o=T;default:Ke(e,n,m,T,s,null)}n=g,s=b,e.multiple=!!o,n!=null?Vi(e,!!o,n,!1):s!=null&&Vi(e,!!o,s,!0);return;case"textarea":He("invalid",e),g=m=o=null;for(b in s)if(s.hasOwnProperty(b)&&(T=s[b],T!=null))switch(b){case"value":o=T;break;case"defaultValue":m=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Ke(e,n,b,T,s,null)}bc(e,o,m,g);return;case"option":for(A in s)if(s.hasOwnProperty(A)&&(o=s[A],o!=null))switch(A){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ke(e,n,A,o,s,null)}return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(o=0;o<pl.length;o++)He(pl[o],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in s)if(s.hasOwnProperty(P)&&(o=s[P],o!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ke(e,n,P,o,s,null)}return;default:if(xo(n)){for(W in s)s.hasOwnProperty(W)&&(o=s[W],o!==void 0&&iu(e,n,W,o,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(o=s[T],o!=null&&Ke(e,n,T,o,s,null))}function jx(e,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,b=null,T=null,A=null,P=null,W=null;for(X in s){var re=s[X];if(s.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":A=re;default:o.hasOwnProperty(X)||Ke(e,n,X,null,o,re)}}for(var F in o){var X=o[F];if(re=s[F],o.hasOwnProperty(F)&&(X!=null||re!=null))switch(F){case"type":g=X;break;case"name":m=X;break;case"checked":P=X;break;case"defaultChecked":W=X;break;case"value":b=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:X!==re&&Ke(e,n,F,X,o,re)}}go(e,b,T,A,P,W,g,m);return;case"select":X=b=T=F=null;for(g in s)if(A=s[g],s.hasOwnProperty(g)&&A!=null)switch(g){case"value":break;case"multiple":X=A;default:o.hasOwnProperty(g)||Ke(e,n,g,null,o,A)}for(m in o)if(g=o[m],A=s[m],o.hasOwnProperty(m)&&(g!=null||A!=null))switch(m){case"value":F=g;break;case"defaultValue":T=g;break;case"multiple":b=g;default:g!==A&&Ke(e,n,m,g,o,A)}n=T,s=b,o=X,F!=null?Vi(e,!!s,F,!1):!!o!=!!s&&(n!=null?Vi(e,!!s,n,!0):Vi(e,!!s,s?[]:"",!1));return;case"textarea":X=F=null;for(T in s)if(m=s[T],s.hasOwnProperty(T)&&m!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ke(e,n,T,null,o,m)}for(b in o)if(m=o[b],g=s[b],o.hasOwnProperty(b)&&(m!=null||g!=null))switch(b){case"value":F=m;break;case"defaultValue":X=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&Ke(e,n,b,m,o,g)}Sc(e,F,X);return;case"option":for(var Te in s)if(F=s[Te],s.hasOwnProperty(Te)&&F!=null&&!o.hasOwnProperty(Te))switch(Te){case"selected":e.selected=!1;break;default:Ke(e,n,Te,null,o,F)}for(A in o)if(F=o[A],X=s[A],o.hasOwnProperty(A)&&F!==X&&(F!=null||X!=null))switch(A){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ke(e,n,A,F,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in s)F=s[we],s.hasOwnProperty(we)&&F!=null&&!o.hasOwnProperty(we)&&Ke(e,n,we,null,o,F);for(P in o)if(F=o[P],X=s[P],o.hasOwnProperty(P)&&F!==X&&(F!=null||X!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,n));break;default:Ke(e,n,P,F,o,X)}return;default:if(xo(n)){for(var Xe in s)F=s[Xe],s.hasOwnProperty(Xe)&&F!==void 0&&!o.hasOwnProperty(Xe)&&iu(e,n,Xe,void 0,o,F);for(W in o)F=o[W],X=s[W],!o.hasOwnProperty(W)||F===X||F===void 0&&X===void 0||iu(e,n,W,F,o,X);return}}for(var G in s)F=s[G],s.hasOwnProperty(G)&&F!=null&&!o.hasOwnProperty(G)&&Ke(e,n,G,null,o,F);for(re in o)F=o[re],X=s[re],!o.hasOwnProperty(re)||F===X||F==null&&X==null||Ke(e,n,re,F,o,X)}function Em(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var m=s[o],g=m.transferSize,b=m.initiatorType,T=m.duration;if(g&&T&&Em(b)){for(b=0,T=m.responseEnd,o+=1;o<s.length;o++){var A=s[o],P=A.startTime;if(P>T)break;var W=A.transferSize,re=A.initiatorType;W&&Em(re)&&(A=A.responseEnd,b+=W*(A<T?1:(T-P)/(A-P)))}if(--o,n+=8*(g+b)/(m.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var su=null,lu=null;function Ma(e){return e.nodeType===9?e:e.ownerDocument}function Am(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _m(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function au(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ou=null;function Ox(){var e=window.event;return e&&e.type==="popstate"?e===ou?!1:(ou=e,!0):(ou=null,!1)}var wm=typeof setTimeout=="function"?setTimeout:void 0,Vx=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(e){return Rm.resolve(null).then(e).catch(Px)}:wm;function Px(e){setTimeout(function(){throw e})}function ii(e){return e==="head"}function Mm(e,n){var s=n,o=0;do{var m=s.nextSibling;if(e.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(m),vs(n);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")hl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,hl(s);for(var g=s.firstChild;g;){var b=g.nextSibling,T=g.nodeName;g[Us]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=b}}else s==="body"&&hl(e.ownerDocument.body);s=m}while(s);vs(n)}function Dm(e,n){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function ru(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ru(s),mo(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function zx(e,n,s,o){for(;e.nodeType===1;){var m=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Us])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=nn(e.nextSibling),e===null)break}return null}function Fx(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=nn(e.nextSibling),e===null))return null;return e}function Im(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=nn(e.nextSibling),e===null))return null;return e}function uu(e){return e.data==="$?"||e.data==="$~"}function cu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Yx(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function nn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var du=null;function km(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return nn(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function Um(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function qm(e,n,s){switch(n=Ma(s),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function hl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);mo(e)}var sn=new Map,Hm=new Set;function Da(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qn=se.d;se.d={f:$x,r:Jx,D:Kx,C:Xx,L:Qx,m:Zx,X:ey,S:Wx,M:ty};function $x(){var e=qn.f(),n=Na();return e||n}function Jx(e){var n=ji(e);n!==null&&n.tag===5&&n.type==="form"?Zd(n):qn.r(e)}var hs=typeof document>"u"?null:document;function Gm(e,n,s){var o=hs;if(o&&typeof n=="string"&&n){var m=Kt(n);m='link[rel="'+e+'"][href="'+m+'"]',typeof s=="string"&&(m+='[crossorigin="'+s+'"]'),Hm.has(m)||(Hm.add(m),e={rel:e,crossOrigin:s,href:n},o.querySelector(m)===null&&(n=o.createElement("link"),Nt(n,"link",e),mt(n),o.head.appendChild(n)))}}function Kx(e){qn.D(e),Gm("dns-prefetch",e,null)}function Xx(e,n){qn.C(e,n),Gm("preconnect",e,n)}function Qx(e,n,s){qn.L(e,n,s);var o=hs;if(o&&e&&n){var m='link[rel="preload"][as="'+Kt(n)+'"]';n==="image"&&s&&s.imageSrcSet?(m+='[imagesrcset="'+Kt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(m+='[imagesizes="'+Kt(s.imageSizes)+'"]')):m+='[href="'+Kt(e)+'"]';var g=m;switch(n){case"style":g=xs(e);break;case"script":g=ys(e)}sn.has(g)||(e=S({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),sn.set(g,e),o.querySelector(m)!==null||n==="style"&&o.querySelector(xl(g))||n==="script"&&o.querySelector(yl(g))||(n=o.createElement("link"),Nt(n,"link",e),mt(n),o.head.appendChild(n)))}}function Zx(e,n){qn.m(e,n);var s=hs;if(s&&e){var o=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+Kt(o)+'"][href="'+Kt(e)+'"]',g=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ys(e)}if(!sn.has(g)&&(e=S({rel:"modulepreload",href:e},n),sn.set(g,e),s.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(yl(g)))return}o=s.createElement("link"),Nt(o,"link",e),mt(o),s.head.appendChild(o)}}}function Wx(e,n,s){qn.S(e,n,s);var o=hs;if(o&&e){var m=Li(o).hoistableStyles,g=xs(e);n=n||"default";var b=m.get(g);if(!b){var T={loading:0,preload:null};if(b=o.querySelector(xl(g)))T.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},s),(s=sn.get(g))&&fu(e,s);var A=b=o.createElement("link");mt(A),Nt(A,"link",e),A._p=new Promise(function(P,W){A.onload=P,A.onerror=W}),A.addEventListener("load",function(){T.loading|=1}),A.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ia(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:T},m.set(g,b)}}}function ey(e,n){qn.X(e,n);var s=hs;if(s&&e){var o=Li(s).hoistableScripts,m=ys(e),g=o.get(m);g||(g=s.querySelector(yl(m)),g||(e=S({src:e,async:!0},n),(n=sn.get(m))&&mu(e,n),g=s.createElement("script"),mt(g),Nt(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function ty(e,n){qn.M(e,n);var s=hs;if(s&&e){var o=Li(s).hoistableScripts,m=ys(e),g=o.get(m);g||(g=s.querySelector(yl(m)),g||(e=S({src:e,async:!0,type:"module"},n),(n=sn.get(m))&&mu(e,n),g=s.createElement("script"),mt(g),Nt(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function jm(e,n,s,o){var m=(m=te.current)?Da(m):null;if(!m)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=xs(s.href),s=Li(m).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=xs(s.href);var g=Li(m).hoistableStyles,b=g.get(e);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=m.querySelector(xl(e)))&&!g._p&&(b.instance=g,b.state.loading=5),sn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},sn.set(e,s),g||ny(m,e,s,b.state))),n&&o===null)throw Error(a(528,""));return b}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ys(s),s=Li(m).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function xs(e){return'href="'+Kt(e)+'"'}function xl(e){return'link[rel="stylesheet"]['+e+"]"}function Lm(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function ny(e,n,s,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Nt(n,"link",s),mt(n),e.head.appendChild(n))}function ys(e){return'[src="'+Kt(e)+'"]'}function yl(e){return"script[async]"+e}function Om(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Kt(s.href)+'"]');if(o)return n.instance=o,mt(o),o;var m=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),mt(o),Nt(o,"style",m),Ia(o,s.precedence,e),n.instance=o;case"stylesheet":m=xs(s.href);var g=e.querySelector(xl(m));if(g)return n.state.loading|=4,n.instance=g,mt(g),g;o=Lm(s),(m=sn.get(m))&&fu(o,m),g=(e.ownerDocument||e).createElement("link"),mt(g);var b=g;return b._p=new Promise(function(T,A){b.onload=T,b.onerror=A}),Nt(g,"link",o),n.state.loading|=4,Ia(g,s.precedence,e),n.instance=g;case"script":return g=ys(s.src),(m=e.querySelector(yl(g)))?(n.instance=m,mt(m),m):(o=s,(m=sn.get(g))&&(o=S({},s),mu(o,m)),e=e.ownerDocument||e,m=e.createElement("script"),mt(m),Nt(m,"link",o),e.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Ia(o,s.precedence,e));return n.instance}function Ia(e,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,g=m,b=0;b<o.length;b++){var T=o[b];if(T.dataset.precedence===n)g=T;else if(g!==m)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function fu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function mu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ka=null;function Vm(e,n,s){if(ka===null){var o=new Map,m=ka=new Map;m.set(s,o)}else m=ka,o=m.get(s),o||(o=new Map,m.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),m=0;m<s.length;m++){var g=s[m];if(!(g[Us]||g[yt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(n)||"";b=e+b;var T=o.get(b);T?T.push(g):o.set(b,[g])}}return o}function Bm(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function iy(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function sy(e,n,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=xs(o.href),g=n.querySelector(xl(m));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ua.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=g,mt(g);return}g=n.ownerDocument||n,o=Lm(o),(m=sn.get(m))&&fu(o,m),g=g.createElement("link"),mt(g);var b=g;b._p=new Promise(function(T,A){b.onload=T,b.onerror=A}),Nt(g,"link",o),s.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ua.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var pu=0;function ly(e,n){return e.stylesheets&&e.count===0&&Ha(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&Ha(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&pu===0&&(pu=62500*Lx());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ha(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>pu?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function Ua(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ha(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qa=null;function Ha(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qa=new Map,n.forEach(ay,e),qa=null,Ua.call(e))}function ay(e,n){if(!(n.state.loading&4)){var s=qa.get(e);if(s)var o=s.get(null);else{s=new Map,qa.set(e,s);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var b=m[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),o=b)}o&&s.set(null,o)}m=n.instance,b=m.getAttribute("data-precedence"),g=s.get(b)||o,g===o&&s.set(null,m),s.set(b,m),this.count++,o=Ua.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),g?g.parentNode.insertBefore(m,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),n.state.loading|=4}}var vl={$$typeof:j,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function oy(e,n,s,o,m,g,b,T,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ro(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ro(0),this.hiddenUpdates=ro(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function zm(e,n,s,o,m,g,b,T,A,P,W,re){return e=new oy(e,n,s,b,A,P,W,re,T),n=1,g===!0&&(n|=24),g=Lt(3,null,null,n),e.current=g,g.stateNode=e,n=$o(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:s,cache:n},Qo(g),e}function Fm(e){return e?(e=Ki,e):Ki}function Ym(e,n,s,o,m,g){m=Fm(m),o.context===null?o.context=m:o.pendingContext=m,o=Yn(n),o.payload={element:s},g=g===void 0?null:g,g!==null&&(o.callback=g),s=$n(e,o,n),s!==null&&(Ht(s,e,n),Qs(s,e,n))}function $m(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function gu(e,n){$m(e,n),(e=e.alternate)&&$m(e,n)}function Jm(e){if(e.tag===13||e.tag===31){var n=bi(e,67108864);n!==null&&Ht(n,e,67108864),gu(e,67108864)}}function Km(e){if(e.tag===13||e.tag===31){var n=zt();n=uo(n);var s=bi(e,n);s!==null&&Ht(s,e,n),gu(e,n)}}var Ga=!0;function ry(e,n,s,o){var m=k.T;k.T=null;var g=se.p;try{se.p=2,hu(e,n,s,o)}finally{se.p=g,k.T=m}}function uy(e,n,s,o){var m=k.T;k.T=null;var g=se.p;try{se.p=8,hu(e,n,s,o)}finally{se.p=g,k.T=m}}function hu(e,n,s,o){if(Ga){var m=xu(o);if(m===null)nu(e,n,o,ja,s),Qm(e,o);else if(dy(m,e,n,s,o))o.stopPropagation();else if(Qm(e,o),n&4&&-1<cy.indexOf(e)){for(;m!==null;){var g=ji(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=hi(g.pendingLanes);if(b!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var A=1<<31-_t(b);T.entanglements[1]|=A,b&=~A}xn(g),(Fe&6)===0&&(Sa=z()+500,ml(0))}}break;case 31:case 13:T=bi(g,2),T!==null&&Ht(T,g,2),Na(),gu(g,2)}if(g=xu(o),g===null&&nu(e,n,o,ja,s),g===m)break;m=g}m!==null&&o.stopPropagation()}else nu(e,n,o,null,s)}}function xu(e){return e=vo(e),yu(e)}var ja=null;function yu(e){if(ja=null,e=Gi(e),e!==null){var n=d(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=p(n),e!==null)return e;e=null}else if(s===31){if(e=x(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ja=e,null}function Xm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(q()){case Z:return 2;case ae:return 8;case pe:case xe:return 32;case Re:return 268435456;default:return 32}default:return 32}}var vu=!1,si=null,li=null,ai=null,Sl=new Map,bl=new Map,oi=[],cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qm(e,n){switch(e){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Sl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(n.pointerId)}}function Nl(e,n,s,o,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:g,targetContainers:[m]},n!==null&&(n=ji(n),n!==null&&Jm(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),e)}function dy(e,n,s,o,m){switch(n){case"focusin":return si=Nl(si,e,n,s,o,m),!0;case"dragenter":return li=Nl(li,e,n,s,o,m),!0;case"mouseover":return ai=Nl(ai,e,n,s,o,m),!0;case"pointerover":var g=m.pointerId;return Sl.set(g,Nl(Sl.get(g)||null,e,n,s,o,m)),!0;case"gotpointercapture":return g=m.pointerId,bl.set(g,Nl(bl.get(g)||null,e,n,s,o,m)),!0}return!1}function Zm(e){var n=Gi(e.target);if(n!==null){var s=d(n);if(s!==null){if(n=s.tag,n===13){if(n=p(s),n!==null){e.blockedOn=n,dc(e.priority,function(){Km(s)});return}}else if(n===31){if(n=x(s),n!==null){e.blockedOn=n,dc(e.priority,function(){Km(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function La(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=xu(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);yo=o,s.target.dispatchEvent(o),yo=null}else return n=ji(s),n!==null&&Jm(n),e.blockedOn=s,!1;n.shift()}return!0}function Wm(e,n,s){La(e)&&s.delete(n)}function fy(){vu=!1,si!==null&&La(si)&&(si=null),li!==null&&La(li)&&(li=null),ai!==null&&La(ai)&&(ai=null),Sl.forEach(Wm),bl.forEach(Wm)}function Oa(e,n){e.blockedOn===n&&(e.blockedOn=null,vu||(vu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,fy)))}var Va=null;function ep(e){Va!==e&&(Va=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Va===e&&(Va=null);for(var n=0;n<e.length;n+=3){var s=e[n],o=e[n+1],m=e[n+2];if(typeof o!="function"){if(yu(o||s)===null)continue;break}var g=ji(s);g!==null&&(e.splice(n,3),n-=3,xr(g,{pending:!0,data:m,method:s.method,action:o},o,m))}}))}function vs(e){function n(A){return Oa(A,e)}si!==null&&Oa(si,e),li!==null&&Oa(li,e),ai!==null&&Oa(ai,e),Sl.forEach(n),bl.forEach(n);for(var s=0;s<oi.length;s++){var o=oi[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<oi.length&&(s=oi[0],s.blockedOn===null);)Zm(s),s.blockedOn===null&&oi.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var m=s[o],g=s[o+1],b=m[Mt]||null;if(typeof g=="function")b||ep(s);else if(b){var T=null;if(g&&g.hasAttribute("formAction")){if(m=g,b=g[Mt]||null)T=b.formAction;else if(yu(m)!==null)continue}else T=b.action;typeof T=="function"?s[o+1]=T:(s.splice(o,3),o-=3),ep(s)}}}function tp(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Su(e){this._internalRoot=e}Ba.prototype.render=Su.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=zt();Ym(s,o,e,n,null,null)},Ba.prototype.unmount=Su.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ym(e.current,2,null,e,null,null),Na(),n[Hi]=null}};function Ba(e){this._internalRoot=e}Ba.prototype.unstable_scheduleHydration=function(e){if(e){var n=cc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<oi.length&&n!==0&&n<oi[s].priority;s++);oi.splice(s,0,e),s===0&&Zm(e)}};var np=t.version;if(np!=="19.2.0")throw Error(a(527,np,"19.2.0"));se.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=h(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var my={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pa.isDisabled&&Pa.supportsFiber)try{Tt=Pa.inject(my),At=Pa}catch{}}return Cl.createRoot=function(e,n){if(!r(e))throw Error(a(299));var s=!1,o="",m=uf,g=cf,b=df;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=zm(e,1,!1,null,null,s,o,null,m,g,b,tp),e[Hi]=n.current,tu(e),new Su(n)},Cl.hydrateRoot=function(e,n,s){if(!r(e))throw Error(a(299));var o=!1,m="",g=uf,b=cf,T=df,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.formState!==void 0&&(A=s.formState)),n=zm(e,1,!0,n,s??null,o,m,A,g,b,T,tp),n.context=Fm(null),s=n.current,o=zt(),o=uo(o),m=Yn(o),m.callback=null,$n(s,m,o),s=o,n.current.lanes=s,ks(n,s),xn(n),e[Hi]=n.current,tu(e),new Ba(n)},Cl.version="19.2.0",Cl}var fp;function Ny(){if(fp)return Tu.exports;fp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Tu.exports=by(),Tu.exports}var Ty=Ny();const Cy=zu(Ty),lh="https://docs.google.com/spreadsheets/d/14JyRBKyw6tKKtb_fYpxVJWOpaN6g28TilJXLTpQQY50/export?format=tsv",Ey="https://docs.google.com/spreadsheets/d/1PjMiR6A3B6FueLJWZ3C_oRc88F84sEcCb3rMW_QaGNE/export?format=tsv&gid=1474701905",mp="https://sites.google.com/view/afk-hispania",di={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7},ah={:"VEL",:"PM",:"PS",:"VA",:"DEF",:"PF",:"RDC",:"CDA",:"Crit",:"PER",MTK:"PRE",:"PRE",ATK:"ATK",:"ATK",:"Crit",". ":"PP",". ":"PM"},oh=[{level:1,tier:"TOP TIER"},{level:1,tier:"VERY GOOD"},{level:3,tier:"TOP TIER"},{level:1,tier:"GOOD"},{level:2,tier:"VERY GOOD"},{level:3,tier:"VERY GOOD"},{level:2,tier:"GOOD"},{level:1,tier:"AVERAGE"},{level:3,tier:"GOOD"},{level:2,tier:"AVERAGE"},{level:3,tier:"AVERAGE"},{level:1,tier:"BAD"},{level:1,tier:"VERY BAD"},{level:3,tier:"BAD"},{level:3,tier:"VERY BAD"}],Ay={Zohra:{top:"GOOD",middle:"VERY GOOD",bottom:"GOOD"},Lysander:{top:"BAD",middle:"AVERAGE",bottom:"VERY GOOD"},Knox:{top:"AVERAGE",middle:"BAD",bottom:"VERY GOOD"},Envydiel:{top:"VERY GOOD",middle:"TOP TIER",bottom:"VERY GOOD"},Alvida:{top:"GOOD",middle:"GOOD",bottom:"BAD"},AEstrilda:{top:"VERY GOOD",middle:"VERY GOOD",bottom:"AVERAGE"},Gorren:{top:"BAD",middle:"BAD",bottom:"BAD"},Randle:{top:"VERY BAD",middle:"BAD",bottom:"VERY BAD"},AThoran:{top:"VERY GOOD",middle:"AVERAGE",bottom:"GOOD"},Mira:{top:"BAD",middle:"BAD",bottom:"GOOD"},Skylan:{top:"VERY GOOD",middle:"VERY GOOD",bottom:"BAD"},Sion:{top:"VERY GOOD",middle:"TOP TIER",bottom:"VERY GOOD"},Haelia:{top:"AVERAGE",middle:"GOOD",bottom:"AVERAGE"},Velufira:{top:"AVERAGE",middle:"AVERAGE",bottom:"AVERAGE"},Leviathan:{top:"VERY GOOD",middle:"VERY GOOD",bottom:"TOP TIER"},Shalltear:{top:"AVERAGE",middle:"AVERAGE",bottom:"AVERAGE"},Laios:{top:"VERY GOOD",middle:"BAD",bottom:"VERY BAD"},Marcille:{top:"GOOD",middle:"GOOD",bottom:"VERY GOOD"},ALyca:{top:"GOOD",middle:"VERY GOOD",bottom:"AVERAGE"},ASolise:{top:"VERY BAD",middle:"VERY BAD",bottom:"VERY BAD"},Atheus:{top:"VERY GOOD",middle:"BAD",bottom:"BAD"},Misha:{top:"BAD",middle:"VERY GOOD",bottom:"TOP TIER"},Tamrus:{top:"VERY BAD",middle:"VERY BAD",bottom:"AVERAGE"},Trishea:{top:"GOOD",middle:"BAD",bottom:"GOOD"},ABaden:{top:"VERY BAD",middle:"VERY BAD",bottom:"BAD"},AShemira:{top:"VERY GOOD",middle:"AVERAGE",bottom:"BAD"},Ivan:{top:"GOOD",middle:"GOOD",bottom:"GOOD"},DGwyneth:{top:"AVERAGE",middle:"VERY BAD",bottom:"BAD"},Hildwin:{top:"AVERAGE",middle:"BAD",bottom:"BAD"},Lan:{top:"GOOD",middle:"VERY GOOD",bottom:"AVERAGE"},Kregor:{top:"AVERAGE",middle:"AVERAGE",bottom:"BAD"},Melion:{top:"BAD",middle:"AVERAGE",bottom:"GOOD"},Nyla:{top:"GOOD",middle:"BAD",bottom:"BAD"},Emilia:{top:"VERY BAD",middle:"AVERAGE",bottom:"VERY BAD"},Rem:{top:"BAD",middle:"AVERAGE",bottom:"GOOD"},Rimuru:{top:"VERY BAD",middle:"VERY BAD",bottom:"VERY BAD"},Shuna:{top:"GOOD",middle:"BAD",bottom:"BAD"},AAthalia:{top:"GOOD",middle:"VERY GOOD",bottom:"TOP TIER"},Gavus:{top:"GOOD",middle:"AVERAGE",bottom:"AVERAGE"},Aurelia:{top:"AVERAGE",middle:"GOOD",bottom:"BAD"},Alna:{top:"VERY BAD",middle:"VERY BAD",bottom:"GOOD"},Daemia:{top:"AVERAGE",middle:"GOOD",bottom:"VERY GOOD"},Liberta:{top:"AVERAGE",middle:"VERY GOOD",bottom:"VERY GOOD"},Veithael:{top:"BAD",middle:"VERY BAD",bottom:"BAD"},Eugene:{top:"BAD",middle:"VERY BAD",bottom:"BAD"},Maetria:{top:"GOOD",middle:"AVERAGE",bottom:"AVERAGE"},Kalthin:{top:"VERY BAD",middle:"BAD",bottom:"BAD"},Lavatune:{top:"GOOD",middle:"TOP TIER",bottom:"AVERAGE"},Lucilla:{top:"AVERAGE",middle:"AVERAGE",bottom:"GOOD"},ABelinda:{top:"VERY GOOD",middle:"AVERAGE",bottom:"GOOD"},ALucius:{top:"GOOD",middle:"VERY GOOD",bottom:"TOP TIER"},AThane:{top:"GOOD",middle:"GOOD",bottom:"VERY GOOD"},"Adrian & Elyse":{top:"GOOD",middle:"BAD",bottom:"VERY GOOD"},Jerome:{top:"AVERAGE",middle:"VERY GOOD",bottom:"GOOD"},Palmer:{top:"TOP TIER",middle:"GOOD",bottom:"VERY GOOD"},Rosaline:{top:"BAD",middle:"BAD",bottom:"BAD"},AAntandra:{top:"BAD",middle:"AVERAGE",bottom:"BAD"},ABrutus:{top:"BAD",middle:"VERY BAD",bottom:"VERY BAD"},ASafiya:{top:"VERY GOOD",middle:"BAD",bottom:"VERY GOOD"},Naroko:{top:"VERY BAD",middle:"AVERAGE",bottom:"VERY BAD"},Villanelle:{top:"AVERAGE",middle:"VERY BAD",bottom:"VERY BAD"},AEironn:{top:"AVERAGE",middle:"VERY GOOD",bottom:"AVERAGE"}},Yt=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),$t=({className:i})=>u.jsxs("svg",{className:`animate-spin ${i}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_y=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),rh=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),uh=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),wy=({className:i="",textClass:t="text-xl",logoHeightClass:l="h-10",flagHeightClass:a="h-6"})=>u.jsxs("span",{className:`font-bold text-white inline-flex items-center gap-2 ${i}`,children:[u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/LogoGUILD.png",alt:"Logo del Gremio HISPANIA",className:l}),u.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:a}),u.jsx("span",{className:t,children:"HISPANIA"}),u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:a})]})]}),gt=({onClick:i,href:t,isActive:l,children:a,className:r=""})=>{const d="bg-red-600 text-white",p="text-gray-300 hover:text-white hover:border-red-600/70 hover:shadow-[0_0_15px_-3px_rgba(220,38,38,0.6)]",x=`group px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 ${r} flex items-center border border-transparent`;return t?u.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`${x} ${p}`,children:a}):u.jsx("button",{onClick:i,className:`${x} ${l?d:p}`,children:a})},Ry=({navigate:i,currentPage:t,onToggleTips:l,showTips:a})=>{const[r,d]=w.useState(!1),p=S=>{i(S),d(!1)},x=()=>{l(),d(!1)},y="mr-2 w-5 text-center transition-colors duration-300",h=`group px-3 py-2 rounded-md text-sm font-medium transition-all duration-300 flex items-center border border-transparent ${a?"text-yellow-400 hover:border-yellow-500/70 hover:shadow-[0_0_15px_-3px_rgba(250,204,21,0.6)]":"text-gray-300 hover:text-white hover:border-red-600/70 hover:shadow-[0_0_15px_-3px_rgba(220,38,38,0.6)]"}`,v=`fas fa-lightbulb ${y} ${a?"text-yellow-400":"text-gray-400 group-hover:text-red-500"}`;return u.jsxs("header",{className:"bg-gray-800 shadow-lg",children:[u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(wy,{})}),u.jsx("nav",{className:"hidden md:block",children:u.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[u.jsxs(gt,{onClick:()=>i("landing"),isActive:t==="landing",children:[u.jsx("i",{className:`fas fa-home ${y} ${t==="landing"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Inicio"})]}),u.jsxs(gt,{onClick:()=>i("ranking"),isActive:t==="ranking",children:[u.jsx("i",{className:`fas fa-trophy ${y} ${t==="ranking"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Ranking Hroes"})]}),u.jsxs(gt,{onClick:()=>i("priority"),isActive:t==="priority",children:[u.jsx("i",{className:`fas fa-list-ol ${y} ${t==="priority"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Prioridad Recursos"})]}),u.jsxs(gt,{onClick:()=>i("furniture-duplicates"),isActive:t==="furniture-duplicates",children:[u.jsx("i",{className:`fas fa-clone ${y} ${t==="furniture-duplicates"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Duplicacin Muebles"})]}),u.jsxs(gt,{onClick:()=>i("roadmap"),isActive:t==="roadmap",children:[u.jsx("i",{className:`fas fa-route ${y} ${t==="roadmap"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Hoja de Ruta"})]}),u.jsxs(gt,{onClick:()=>i("roster"),isActive:t==="roster",children:[u.jsx("i",{className:`fas fa-users-cog ${y} ${t==="roster"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Mi Roster"})]}),u.jsxs(gt,{onClick:()=>i("database"),isActive:t==="database",children:[u.jsx("i",{className:`fas fa-database ${y} ${t==="database"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Base de Datos"})]}),u.jsxs(gt,{href:mp,isActive:!1,children:[u.jsx("i",{className:`fas fa-globe ${y} text-gray-400 group-hover:text-red-500`}),u.jsx("span",{children:"Web del Gremio"})]}),u.jsxs("button",{onClick:l,title:a?"Desactivar consejos rpidos":"Activar consejos rpidos",className:h,children:[u.jsx("i",{className:v}),u.jsx("span",{children:"Consejos"})]}),u.jsxs(gt,{onClick:()=>i("options"),isActive:t==="options",children:[u.jsx("i",{className:`fas fa-cog ${y} ${t==="options"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Opciones"})]})]})}),u.jsx("div",{className:"md:hidden",children:u.jsxs("button",{onClick:()=>d(!r),className:"text-gray-300 hover:text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":r,children:[u.jsx("span",{className:"sr-only",children:"Abrir men principal"}),r?u.jsx(Yt,{className:"block h-6 w-6"}):u.jsx(_y,{className:"block h-6 w-6"})]})})]})}),r&&u.jsx("div",{className:"md:hidden",id:"mobile-menu",children:u.jsxs("nav",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[u.jsxs(gt,{onClick:()=>p("landing"),isActive:t==="landing",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-home ${y} ${t==="landing"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Inicio"})]}),u.jsxs(gt,{onClick:()=>p("ranking"),isActive:t==="ranking",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-trophy ${y} ${t==="ranking"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Ranking Hroes"})]}),u.jsxs(gt,{onClick:()=>p("priority"),isActive:t==="priority",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-list-ol ${y} ${t==="priority"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Prioridad Recursos"})]}),u.jsxs(gt,{onClick:()=>p("furniture-duplicates"),isActive:t==="furniture-duplicates",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-clone ${y} ${t==="furniture-duplicates"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Duplicacin Muebles"})]}),u.jsxs(gt,{onClick:()=>p("roadmap"),isActive:t==="roadmap",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-route ${y} ${t==="roadmap"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Hoja de Ruta"})]}),u.jsxs(gt,{onClick:()=>p("roster"),isActive:t==="roster",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-users-cog ${y} ${t==="roster"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Mi Roster"})]}),u.jsxs(gt,{onClick:()=>p("database"),isActive:t==="database",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-database ${y} ${t==="database"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Base de Datos"})]}),u.jsxs(gt,{href:mp,isActive:!1,className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-globe ${y} text-gray-400 group-hover:text-red-500`}),u.jsx("span",{children:"Web del Gremio"})]}),u.jsxs("button",{onClick:x,title:a?"Desactivar consejos rpidos":"Activar consejos rpidos",className:`${h} block text-base text-left w-full`,children:[u.jsx("i",{className:v}),u.jsx("span",{children:"Consejos"})]}),u.jsxs(gt,{onClick:()=>p("options"),isActive:t==="options",className:"block text-base text-left w-full",children:[u.jsx("i",{className:`fas fa-cog ${y} ${t==="options"?"text-white":"text-gray-400 group-hover:text-red-500"}`}),u.jsx("span",{children:"Opciones"})]})]})})]})};function lt(i,t){const[l,a]=w.useState(()=>{try{const r=window.localStorage.getItem(i);return r?JSON.parse(r):t}catch(r){return console.error(r),t}});return w.useEffect(()=>{try{const r=typeof l=="function"?l(l):l;window.localStorage.setItem(i,JSON.stringify(r))}catch(r){console.error(r)}},[i,l]),[l,a]}const pp="https://ik.imagekit.io/optimizerhispania/",_u=["webp","png","jpg"],My=i=>i?i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s*&\s*/g," y ").replace(/'/g,"").replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"-"):"",za=new Map,gp=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),Rt=({heroName:i,className:t})=>{const[l,a]=w.useState(void 0),[r,d]=w.useState(0),p=My(i);w.useEffect(()=>{if(!p){a(null);return}za.has(p)?a(za.get(p)):(d(0),a(`${pp}${p}.${_u[0]}`))},[i,p]);const x=()=>{const h=r+1;h<_u.length?(d(h),a(`${pp}${p}.${_u[h]}`)):(za.set(p,null),a(null))},y=()=>{l&&za.set(p,l)};return l===void 0?u.jsx(gp,{className:`${t} text-gray-500`}):l?u.jsx("img",{src:l,alt:i,className:`${t} object-cover`,onError:x,onLoad:y,crossOrigin:"anonymous"}):u.jsx(gp,{className:`${t} text-gray-500`})},ch=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500",borderClass:"border-blue-400"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600",borderClass:"border-green-400"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400",borderClass:"border-lime-300"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400",borderClass:"border-yellow-300"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500",borderClass:"border-orange-400"};case"C":return{textClass:"text-white",bgClass:"bg-red-600",borderClass:"border-red-500"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800",borderClass:"border-amber-700"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700",borderClass:"border-gray-600"}}},Dy=i=>i>=100?"bg-gradient-to-r from-teal-400 to-cyan-500":i>75?"bg-gradient-to-r from-lime-400 to-green-500":i>40?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-600",Iy=i=>{switch(i){case"SSS":return"portrait-glow-sss";case"SS":return"portrait-glow-ss";case"S":return"portrait-glow-s";case"A":return"portrait-glow-a";case"B":return"portrait-glow-b";case"C":return"portrait-glow-c";case"D":return"portrait-glow-d";default:return""}},ky=({tier:i})=>{const{textClass:t,bgClass:l}=ch(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${l} px-2 py-0.5 shadow-md`,children:u.jsx("span",{className:`block transform skew-x-12 text-center text-xs font-bold tracking-wider ${t}`,children:i})})},Uy=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!l)return null;const a=`${t}${l}.png`;return u.jsx("img",{src:a,alt:i,title:i,className:"h-6 w-6"})},qy=({className:i})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),fi=({hero:i,tier:t,subText:l,onClick:a,onRemove:r,subTextFromColor:d,isDisappearing:p,isAwakened:x=!1,progress:y,rank:h})=>{const{borderClass:v}=ch(t),S=x?Iy(t):"",N=U=>{if(U==="-")return u.jsx("span",{className:"font-bold text-gray-200",children:"-"});const H=U.split(" ");return u.jsx("span",{className:"font-bold",children:H.map((M,O)=>{let j="text-gray-200";return M.startsWith("SI")?j="text-cyan-400":M.endsWith("F")?j="text-lime-400":M.startsWith("E")?j="text-yellow-400":M.startsWith("T")&&(j="text-red-400"),u.jsx("span",{className:`${j} ${O>0?"ml-1":""}`,children:M},O)})})},C=u.jsxs(u.Fragment,{children:[h&&u.jsx("div",{className:"absolute -top-2 -left-2 z-10 text-white font-black text-4xl text-shadow-heavy",children:h}),r&&u.jsx("button",{onClick:r,className:"absolute top-1 right-1 bg-gray-900/50 hover:bg-red-600 rounded-full w-6 h-6 flex items-center justify-center text-white transition-colors z-10","aria-label":`Dejar de observar a ${i.name}`,children:u.jsx(Yt,{className:"w-4 h-4"})}),u.jsx("div",{className:`w-20 h-20 bg-gray-900 rounded-full mb-2 flex items-center justify-center border-4 ${v} ${S} overflow-hidden shadow-inner`,children:u.jsx(Rt,{heroName:i.name,className:"h-full w-full"})}),u.jsx("h4",{className:`font-bold text-base truncate w-full ${i.isNameTranslated?"text-white":"text-red-400"}`,children:i.name}),u.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[u.jsx(Uy,{faction:i.faction}),u.jsx(ky,{tier:t||"?"})]}),u.jsxs("div",{className:"mt-2 w-full flex flex-col gap-1 pt-1",children:[l&&u.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs",children:[u.jsx("span",{className:`font-mono font-bold ${d||"text-gray-400"}`,children:l.from}),u.jsx(qy,{className:"h-3 w-3 text-red-500 flex-shrink-0"}),u.jsx("div",{className:"font-mono",children:N(l.to)})]}),y!==void 0&&u.jsxs("div",{className:"w-full bg-gray-900/70 shadow-inner rounded-full h-4 relative overflow-hidden mt-1",children:[u.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${Dy(y)}`,style:{width:`${Math.min(y,100).toFixed(1)}%`}}),u.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-bold text-white text-shadow-dark",children:[y.toFixed(1),"%"]})]})]})]}),_=`relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-3 w-44 h-[188px] flex-shrink-0 shadow-lg border border-gray-700 text-center flex flex-col items-center transition-all duration-300 ${p?"epic-disappear":""} ${x?"awakened-hero-card":""}`;return a?u.jsx("button",{onClick:()=>a(i),className:`${_} hover:scale-105 hover:shadow-red-500/20 cursor-pointer`,"aria-label":`Editar o adquirir a ${i.name}`,children:C}):u.jsx("div",{className:`${_} cursor-default`,children:C})},dh=({isOpen:i,onClose:t,hero:l,heroData:a,onSave:r,priorities:d,navigate:p})=>{const[x,y]=w.useState({top:[0,0,0],middle:[0,0,0],bottom:[0,0,0]}),[h,v]=w.useState(null),[S,N]=w.useState(!1);w.useEffect(()=>{if(l&&i){const M=(a==null?void 0:a.furnitureDupes)||{top:[0,0,0],middle:[0,0,0],bottom:[0,0,0]};y(JSON.parse(JSON.stringify(M)));const O=d[l.originalName]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"};if(O.top==="NO DEFINIDO"&&O.middle==="NO DEFINIDO"&&O.bottom==="NO DEFINIDO"){v("Prxima meta no definida, presiona aqui para configurar las prioridades de los muebles de este hroe."),N(!0);return}N(!1);let ee=!1;for(const ie of oh){if(O.top===ie.tier&&M.top.some(ue=>ue<ie.level)){v(`Subir un Mueble grande a +${ie.level}.`),ee=!0;break}if(O.middle===ie.tier&&M.middle.some(ue=>ue<ie.level)){v(`Subir un Mueble pequeo a +${ie.level}.`),ee=!0;break}if(O.bottom===ie.tier&&M.bottom.some(ue=>ue<ie.level)){v(`Subir un Mueble colgante a +${ie.level}.`),ee=!0;break}}ee||v("Felicidades! Has completado todos los duplicados recomendados para este hroe.")}},[l,i,a,d]);const C=(M,O,j)=>{y(ee=>{if(!ee)return{top:[0,0,0],middle:[0,0,0],bottom:[0,0,0]};const ie=JSON.parse(JSON.stringify(ee)),ue=ie[M][O];return j==="increment"?ie[M][O]=(ue+1)%4:ie[M][O]=(ue-1+4)%4,ie})},_=()=>{if(!l||!x)return;const M=[...x.top,...x.middle,...x.bottom].reduce((O,j)=>O+j,0);r({furniture:9+M,furnitureDupes:x}),t()},U=()=>{!S||!l||(sessionStorage.setItem("furniture-config-hero",l.name),sessionStorage.setItem("furniture-config-mode","config"),sessionStorage.setItem("furniture-config-filter","undefined"),t(),p("furniture-duplicates"))};if(!i||!l)return null;const H=[{key:"top",title:"Mueble grande",icon:"fa-door-closed"},{key:"middle",title:"Mueble pequeo",icon:"fa-chair"},{key:"bottom",title:"Mueble colgante",icon:"fa-border-all"}];return u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center z-[60] animate-[fade-in_0.3s_ease-out]",onClick:t,children:[u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-md flex flex-col",onClick:M=>M.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex flex-col items-center gap-2 relative",children:[u.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition-colors",children:u.jsx(Yt,{className:"w-6 h-6"})}),u.jsx("div",{className:"w-24 h-24 bg-gray-900 rounded-full flex items-center justify-center border-2 border-gray-600 overflow-hidden",children:u.jsx(Rt,{heroName:l.name,className:"h-full w-full"})}),u.jsxs("h2",{className:"text-xl font-bold",children:[l.name," - Duplicados"]})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[h&&u.jsx("div",{className:`bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-md text-center ${S?"cursor-pointer hover:bg-red-900 transition-colors":""}`,onClick:S?U:void 0,children:u.jsx("p",{children:S?h:u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-bullseye mr-2"}),u.jsx("strong",{children:"Prxima Meta:"})," ",h]})})}),H.map(({key:M,title:O,icon:j})=>u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-gray-300 mb-2 flex items-center justify-center gap-2",children:[u.jsx("i",{className:`fas ${j} text-red-400`})," ",O]}),u.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:Array.from({length:3}).map((ee,ie)=>u.jsxs("button",{onClick:()=>C(M,ie,"increment"),onContextMenu:ue=>{ue.preventDefault(),C(M,ie,"decrement")},className:"relative w-16 h-16 bg-gray-700 rounded-md flex items-center justify-center text-3xl text-gray-400 hover:bg-gray-600",children:[u.jsx("i",{className:`fas ${j}`}),x&&x[M][ie]>0&&u.jsxs("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-sm font-bold rounded-full h-6 w-6 flex items-center justify-center border-2 border-gray-800",children:["+",x[M][ie]]})]},ie))})]},M))]}),u.jsxs("div",{className:"bg-gray-900/50 px-6 py-4 sm:flex sm:flex-row-reverse",children:[u.jsx("button",{type:"button",onClick:_,className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-red-600 text-base font-bold text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Guardar"}),u.jsx("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-600 shadow-sm px-5 py-2.5 bg-gray-700 text-base font-medium text-gray-200 hover:bg-gray-600 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancelar"})]})]}),u.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
            `})]})},wu=({value:i,onChange:t,options:l,allowManualInput:a=!1,disabled:r=!1})=>u.jsxs("div",{className:`flex flex-col items-center space-y-2 ${r?"opacity-50":""}`,children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:l.map(d=>u.jsx("button",{onClick:()=>t(d),disabled:r,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors w-9 ${i===d?"bg-red-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"} ${r?"cursor-not-allowed":""}`,children:d},d))}),a&&u.jsx("input",{type:"number",value:i,disabled:r,onChange:d=>t(parseInt(d.target.value,10)||0),className:`w-20 bg-gray-900 border border-gray-600 rounded-md px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-red-500 text-center ${r?"cursor-not-allowed":""}`,min:"0",step:"1"})]}),Hy=({hero:i})=>u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("div",{className:"font-mono text-sm",children:[i.requiredSI>0&&u.jsxs("span",{className:"font-bold text-cyan-400",children:["SI",i.requiredSI]}),i.requiredFurniture>0&&u.jsxs("span",{className:"font-bold text-lime-400 ml-2",children:[i.requiredFurniture,"F"]}),i.requiredEngravings>0&&u.jsxs("span",{className:"font-bold text-yellow-400 ml-2",children:["E",i.requiredEngravings]}),i.requiredSI===0&&i.requiredFurniture===0&&i.requiredEngravings===0&&u.jsx("span",{children:"-"})]}),i.engravingNodes.length>0&&u.jsx("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1",children:i.engravingNodes.map((t,l)=>u.jsxs(_s.Fragment,{children:[u.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-md ${t.found?"bg-blue-800 text-blue-200":"bg-red-800 text-white"}`,children:t.found?t.translated:t.original}),l<i.engravingNodes.length-1&&u.jsx("span",{className:"text-gray-500 text-xs",children:""})]},l))})]}),Gy=i=>i>=100?"bg-gradient-to-r from-teal-400 to-cyan-500":i>75?"bg-gradient-to-r from-lime-400 to-green-500":i>40?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-600",jy=({isOpen:i,onClose:t,onReplace:l,currentHeroes:a,tierMap:r})=>i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center z-[80]",onClick:t,children:u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-4xl flex flex-col",onClick:d=>d.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Watchlist Llena"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:u.jsx(Yt,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("p",{className:"text-gray-300 mb-4 text-center",children:"Tu watchlist est llena. Selecciona un hroe de la lista para reemplazarlo por el nuevo."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:a.map((d,p)=>d?u.jsx(fi,{hero:d,tier:r.get(d.originalName)||"N/A",onClick:()=>l(p),isDisappearing:!1},d.originalName+p):null)})]})]})}):null,Yu=({isOpen:i,onClose:t,onSave:l,hero:a,playerData:r,recommendedBuilds:d,maxInvestment:p,watchlistSlots:x,setWatchlistSlots:y,allHeroes:h,tierMap:v,navigate:S,priorities:N})=>{const[C,_]=w.useState(!1),[U,H]=w.useState(!1),[M,O]=w.useState(null);if(w.useEffect(()=>{i&&r&&O(JSON.parse(JSON.stringify(r)))},[i,r]),!i||!a||!M)return null;const j=(V,oe)=>{O(Y=>Y?{...Y,[V]:oe}:null)},ee=()=>{a&&M&&l(a.originalName,M)},ie=x.includes(a.originalName),ue=()=>{if(ie)y(V=>V.map(oe=>oe===a.originalName?null:oe));else{const V=x.findIndex(oe=>oe===null);V!==-1?y(oe=>{const Y=[...oe];return Y[V]=a.originalName,Y}):_(!0)}},D=V=>{y(oe=>{const Y=[...oe];return Y[V]=a.originalName,Y}),_(!1)},Q=M;let $=0;if(p){const V=p,oe=V.si>0?Math.min(Q.si/V.si,1):1,Y=V.furniture>0?Math.min(Q.furniture/V.furniture,1):1,ge=V.engravings>0?Math.min(Q.engravings/V.engravings,1):1;$=(oe+Y+ge)/3*100}return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-gray-700/80 text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-md mx-4 animate-[slide-up_0.4s_ease-out] relative",onClick:V=>V.stopPropagation(),children:[u.jsx("button",{onClick:ee,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:u.jsx(Yt,{className:"w-6 h-6"})}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-900 rounded-full mb-3 flex items-center justify-center border-2 border-gray-600 overflow-hidden",children:u.jsx(Rt,{heroName:a.name,className:"h-full w-full"})}),u.jsx("h2",{className:"text-2xl font-bold",children:a.name}),u.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Lo poseo"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:M.owned,onChange:V=>j("owned",V.target.checked)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${M.owned?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${M.owned?"transform translate-x-4":""}`})]})]}),u.jsx("button",{onClick:ue,title:"Aadir/Quitar de la Watchlist",className:"flex items-center gap-2 cursor-pointer",children:u.jsx("i",{className:`fas fa-eye text-2xl transition-colors ${ie?"text-red-500 hover:text-red-400":"text-gray-500 hover:text-gray-300"}`})})]})]}),u.jsxs("div",{className:"mt-4 border-t border-gray-700 pt-4",children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Inversin Recomendada"}),u.jsx("div",{className:"space-y-2",children:d.map((V,oe)=>u.jsx("div",{className:"bg-gray-900/50 p-2 rounded-md",children:u.jsx(Hy,{hero:V})},oe))})]}),u.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Artculo de Firma (SI)"}),u.jsx(wu,{value:M.si,onChange:V=>j("si",V),options:[0,10,20,30,40],allowManualInput:!0})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Grabado (Engraving)"}),u.jsx(wu,{value:M.engravings,onChange:V=>j("engravings",V),options:[0,30,60,80],allowManualInput:!0})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Muebles (Furniture)"}),u.jsxs("div",{className:"flex justify-center items-center gap-4",children:[u.jsx(wu,{value:M.furniture,onChange:V=>j("furniture",V),options:[0,3,9],allowManualInput:!0}),M.furniture>=9&&u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsxs("p",{className:"text-lg font-bold text-lime-400",children:[M.furniture," / 36"]}),u.jsx("button",{onClick:()=>H(!0),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md text-sm",children:"Editar Duplicados"})]})]})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Armadura (Tier)"}),u.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:[0,1,2,3,4].map(V=>u.jsxs("button",{onClick:()=>j("armorTier",V),className:`px-3 py-1.5 text-sm font-semibold rounded-md transition-colors w-12 ${(M.armorTier??0)===V?"bg-red-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"}`,children:["T",V]},V))})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("h3",{className:"text-center font-semibold text-gray-300 mb-2",children:"Progreso Total"}),u.jsxs("div",{className:"w-full bg-gray-900/70 shadow-inner ring-1 ring-black/20 rounded-full h-5 relative overflow-hidden",children:[u.jsx("div",{className:`h-5 rounded-full transition-all duration-500 progress-bar-animated progress-bar-stripes ${Gy($)}`,style:{width:`${Math.min($,100).toFixed(1)}%`}}),u.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold text-white text-shadow-dark",children:[$.toFixed(1),"%"]})]})]})]}),u.jsxs("div",{className:"bg-gray-900/50 px-6 py-4 sm:flex sm:flex-row-reverse",children:[u.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-red-600 text-base font-bold text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-300 hover:shadow-[0_0_15px_rgba(220,38,38,0.6)]",onClick:ee,children:"Guardar"}),u.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-600 shadow-sm px-5 py-2.5 bg-gray-700 text-base font-medium text-gray-200 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-gray-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors",onClick:t,children:"Cancelar"})]})]}),u.jsx("style",{children:`
                    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes slide-up { from { transform: translateY(2rem) scale(0.95); opacity: 0; } to { opacity: 1; } }
                `})]}),u.jsx(dh,{isOpen:U,onClose:()=>H(!1),hero:a,heroData:M,onSave:({furniture:V,furnitureDupes:oe})=>{O(Y=>Y?{...Y,furniture:V,furnitureDupes:oe}:null)},priorities:N,navigate:S}),u.jsx(jy,{isOpen:C,onClose:()=>_(!1),onReplace:D,currentHeroes:x.map(V=>V?h.find(oe=>oe.originalName===V):void 0),tierMap:v})]})},Ly=({isOpen:i,onClose:t,heroes:l,ignoredHeroes:a,tierMap:r,onEdit:d,onIgnore:p,onUnignore:x})=>i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-[60] transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,children:u.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-lg shadow-xl text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"Hroes pendientes de Armadura T4"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:u.jsx(Yt,{className:"h-6 w-6"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto",children:[l.length>0?u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:l.map(y=>u.jsxs("div",{className:"relative",children:[u.jsx(fi,{hero:y,tier:r.get(y.originalName)||"N/A",onClick:()=>d(y),isDisappearing:!1}),u.jsx("button",{onClick:h=>p(h,y),className:"absolute top-1 right-1 bg-gray-900/50 hover:bg-red-600 rounded-full w-6 h-6 flex items-center justify-center text-white transition-colors","aria-label":`Ignorar recomendaciones para ${y.name}`,title:"Ignorar recomendaciones de armadura T4 para este hroe",children:u.jsx(Yt,{className:"w-4 h-4"})})]},y.originalName))}):u.jsx("p",{className:"text-center text-gray-400",children:"No hay hroes que cumplan los criterios para esta recomendacin en este momento."}),a.length>0&&u.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-700",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-400 mb-4",children:"Hroes Ignorados"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:a.map(y=>u.jsxs("div",{className:"relative filter grayscale opacity-70",children:[u.jsx(fi,{hero:y,tier:r.get(y.originalName)||"N/A",isDisappearing:!1}),u.jsx("button",{onClick:h=>x(h,y),className:"absolute top-1 right-1 bg-gray-900/50 hover:bg-green-600 rounded-full w-6 h-6 flex items-center justify-center text-white transition-colors","aria-label":`Restaurar recomendaciones para ${y.name}`,title:"Restaurar recomendaciones de armadura T4 para este hroe",children:u.jsx("i",{className:"fas fa-plus"})})]},y.originalName))})]})]})]})}):null,Oy=({navigate:i})=>{const[t]=lt("afk-settings",{sheetUrl:lh,autoUpdate:!0,cloudConfigured:!1,showTips:!0}),[l,a]=w.useState(null),[r,d]=w.useState(!1),[p,x]=w.useState(()=>sessionStorage.getItem("tipWidgetClosed")==="true"),[y]=lt("priority-heroes-data",[]),[h,v]=lt("player-hero-data",{}),[S,N]=lt("watchlist-slots",Array(5).fill(null)),[C]=lt("heroes-data",[]),[_,U]=lt("ignored-tips",{}),[H]=lt("furniture-priority-data",{}),[M,O]=w.useState(!1),[j,ee]=w.useState(null),[ie,ue]=w.useState([]),[D,Q]=w.useState(null),$=w.useCallback((I,K)=>{const te=di[I.group]||99,ce=di[K.group]||99;if(te!==ce)return te-ce;if(I.isAlternative!==K.isAlternative)return I.isAlternative?1:-1;if(K.score!==I.score)return K.score-I.score;if(I.isAlternative){if(I.requiredSI!==K.requiredSI)return I.requiredSI-K.requiredSI;if(I.requiredFurniture!==K.requiredFurniture)return I.requiredFurniture-K.requiredFurniture;if(I.requiredEngravings!==K.requiredEngravings)return I.requiredEngravings-K.requiredEngravings}return 0},[]),V=w.useMemo(()=>{const I=new Map;return y.forEach(K=>{const te=I.get(K.originalName)||{si:0,furniture:0,engravings:0};I.set(K.originalName,{si:Math.max(te.si,K.requiredSI),furniture:Math.max(te.furniture,K.requiredFurniture),engravings:Math.max(te.engravings,K.requiredEngravings)})}),I},[y]),oe=w.useMemo(()=>new Map(C.map(I=>[I.originalName,I.tier])),[C]),Y=w.useCallback(I=>Array.from(new Map(y.map(te=>[te.originalName,te])).values()).filter(te=>{var Ae;const ce=h[te.originalName];if(!ce||!ce.owned||(ce.armorTier??0)>=4||((Ae=I[te.originalName])==null?void 0:Ae.includes("t4")))return!1;const Ne=oe.get(te.originalName);if(Ne!=="S"&&Ne!=="SS"&&Ne!=="SSS")return!1;const Ve=V.get(te.originalName);return Ve?ce.si>=Ve.si&&ce.furniture>=Ve.furniture&&ce.engravings>=Ve.engravings:!1}).sort((te,ce)=>ce.score-te.score),[y,h,oe,V]),ge=w.useMemo(()=>Array.from(new Map(y.map(K=>[K.originalName,K])).values()).filter(K=>{var te,ce;return((te=_[K.originalName])==null?void 0:te.includes("t4"))&&((ce=h[K.originalName])==null?void 0:ce.owned)}).sort((K,te)=>te.score-K.score),[y,_,h]);w.useEffect(()=>{t.showTips&&x(sessionStorage.getItem("tipWidgetClosed")==="true")},[t.showTips]);const me=w.useCallback(()=>{if(M||j||!t.showTips)return;if(y.length===0||Object.keys(h).length===0){d(!1);return}const I=Y(_);if(I.length>0&&Math.random()<.33){const L=`Casi perfectos! Considera mejorar la armadura a T4 para estos hroes y desatar todo su poder: ${I.map(ne=>ne.name).join(", ")}.`;a({type:"finishT4",text:L,heroes:I}),d(!0);return}const te=["si","furniture","engravings"],ce=te[Math.floor(Math.random()*te.length)];let Ee=[],Ne="",Ve=()=>({from:"",to:""});switch(ce){case"si":Ee=y.filter(Ae=>{var L,ne;return((L=h[Ae.originalName])==null?void 0:L.owned)&&(((ne=h[Ae.originalName])==null?void 0:ne.si)??0)<Ae.requiredSI}).sort($),Ne="Considera subir el SI de {HERO} a {TO} para completar su build.",Ve=Ae=>{var L;return{from:`SI${((L=h[Ae.originalName])==null?void 0:L.si)??0}`,to:`SI${Ae.requiredSI}`}};break;case"furniture":Ee=y.filter(Ae=>{var L,ne;return((L=h[Ae.originalName])==null?void 0:L.owned)&&(((ne=h[Ae.originalName])==null?void 0:ne.furniture)??0)<Ae.requiredFurniture}).sort($),Ne="A por los muebles! Quizas te convenga usar las tarjetas rojas en {HERO} para subirle los muebles a {TO}.",Ve=Ae=>{var L;return{from:`${((L=h[Ae.originalName])==null?void 0:L.furniture)??0}F`,to:`${Ae.requiredFurniture}F`}};break;case"engravings":Ee=y.filter(Ae=>{var L,ne;return((L=h[Ae.originalName])==null?void 0:L.owned)&&(((ne=h[Ae.originalName])==null?void 0:ne.engravings)??0)<Ae.requiredEngravings}).sort($),Ne="Mejora los grabados de {HERO} a {TO} para estar ms cerca de completarlo.",Ve=Ae=>{var L;return{from:`E${((L=h[Ae.originalName])==null?void 0:L.engravings)??0}`,to:`E${Ae.requiredEngravings}`}};break}if(Ee.length>0){const Ae=Ee[0];if(Ae){const L=Ve(Ae),ne=Ne.replace("{HERO}",Ae.name).replace("{TO}",L.to);a({type:"regular",hero:Ae,text:ne,goal:L}),d(!0);return}}a(null),d(!1)},[M,j,t.showTips,y,h,Y,_,$]);w.useEffect(()=>{if(!l&&!p&&t.showTips){const I=setTimeout(me,500);return()=>clearTimeout(I)}},[l,p,t.showTips,me]);const Se=I=>{I.stopPropagation(),d(!1),sessionStorage.setItem("tipWidgetClosed","true"),x(!0)},k=w.useCallback(I=>{I.stopPropagation(),me()},[me]),se=w.useCallback(I=>{Q(S),ee(I);const K=y.filter(te=>te.originalName===I.originalName).sort($);ue(K)},[y,$,S]),ye=()=>{D&&N(D),ee(null),Q(null)},de=(I,K)=>{v(te=>({...te,[I]:K})),d(!1),a(null),x(!1),sessionStorage.removeItem("tipWidgetClosed"),Q(null),O(!1),ee(null)},be=(I,K)=>{I.stopPropagation();const te=K.originalName,ce={..._},Ee=ce[te]||[];ce[te]=Array.from(new Set([...Ee,"t4"])),U(ce),Y(ce).length===0&&(d(!1),O(!1),a(null))},E=(I,K)=>{I.stopPropagation();const te=K.originalName,ce={..._},Ne=(ce[te]||[]).filter(Ve=>Ve!=="t4");Ne.length>0?ce[te]=Ne:delete ce[te],U(ce)},J=I=>{if(I.startsWith("SI"))return"text-cyan-400";if(I.endsWith("F"))return"text-lime-400";if(I.startsWith("E"))return"text-yellow-400";if(I.startsWith("T"))switch(parseInt(I.substring(1),10)){case 1:return"text-cyan-400";case 2:return"text-violet-400";case 3:return"text-yellow-400";case 4:return"text-red-400";default:return"text-gray-400"}return"text-gray-400"};if(!l||!r||!t.showTips)return null;const fe=()=>{if(l.type==="finishT4"){const Ee=Y(_);return Ee.length===0&&!M?(setTimeout(()=>d(!1),0),null):u.jsxs("div",{className:"fixed bottom-4 right-4 sm:bottom-5 sm:right-5 bg-gray-800/95 backdrop-blur-sm border border-yellow-600/50 rounded-lg shadow-2xl p-4 max-w-2xl w-[calc(100%-2rem)] sm:w-full z-40 animate-[slide-in-right_0.5s_ease-out]",children:[u.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2 z-10",children:[u.jsx("button",{onClick:k,className:"text-gray-500 hover:text-white transition-colors","aria-label":"Obtener otro consejo",children:u.jsx("i",{className:"fas fa-sync-alt"})}),u.jsx("button",{onClick:Se,className:"text-gray-500 hover:text-white transition-colors","aria-label":"Cerrar consejo",children:u.jsx(Yt,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"pt-2",children:[u.jsx("h4",{className:"font-bold text-yellow-400 text-sm",children:"Consejo de Optimizacin "}),u.jsxs("div",{className:"text-white mt-1 text-sm",children:[u.jsx("p",{children:"Mejora la armadura de estos hroes a T4, ya que los tienes maxeados:"}),u.jsx("p",{className:"text-cyan-400 font-semibold mt-1",children:Ee.map(Ne=>Ne.name).join(", ")})]}),u.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[Ee.slice(0,2).map(Ne=>u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx(fi,{hero:Ne,tier:oe.get(Ne.originalName)||"N/A",onClick:()=>se(Ne),isDisappearing:!1}),u.jsx("button",{onClick:Ve=>be(Ve,Ne),className:"absolute top-1 right-1 bg-gray-900/50 hover:bg-red-600 rounded-full w-6 h-6 flex items-center justify-center text-white transition-colors","aria-label":`Ignorar recomendaciones para ${Ne.name}`,title:"Ignorar recomendaciones de armadura T4 para este hroe",children:u.jsx(Yt,{className:"w-4 h-4"})})]},Ne.originalName)),(Ee.length>0||ge.length>0)&&u.jsxs("button",{onClick:()=>O(!0),className:"bg-gray-700 hover:bg-gray-600 text-white rounded-lg w-44 h-[164px] flex-shrink-0 flex flex-col items-center justify-center transition-colors",children:[u.jsx("i",{className:"fas fa-ellipsis-h text-2xl"}),u.jsx("span",{className:"mt-2 text-sm font-semibold",children:"Ver ms"})]})]})]})]})}const{hero:I,text:K,goal:te}=l,ce=K.split(I.name);return u.jsxs("div",{className:"fixed bottom-4 right-4 sm:bottom-5 sm:right-5 bg-gray-800/95 backdrop-blur-sm border border-red-700/50 rounded-lg shadow-2xl p-4 max-w-xs sm:max-w-sm w-[calc(100%-2rem)] sm:w-full z-40 animate-[slide-in-right_0.5s_ease-out]",children:[u.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2 z-10",children:[u.jsx("button",{onClick:k,className:"text-gray-500 hover:text-white transition-colors","aria-label":"Obtener otro consejo",children:u.jsx("i",{className:"fas fa-sync-alt"})}),u.jsx("button",{onClick:Se,className:"text-gray-500 hover:text-white transition-colors","aria-label":"Cerrar consejo",children:u.jsx(Yt,{className:"h-5 w-5"})})]}),u.jsxs("div",{onClick:()=>se(I),className:"flex items-start gap-4 pt-2 cursor-pointer",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full flex items-center justify-center border-2 border-red-600 overflow-hidden",children:u.jsx(Rt,{heroName:I.name,className:"h-full w-full"})})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-red-400 text-sm",children:"Consejo Rpido "}),u.jsx("p",{className:"text-white mt-1 text-sm",children:ce.map((Ee,Ne)=>u.jsxs(_s.Fragment,{children:[Ee,Ne<ce.length-1&&u.jsx("span",{className:"font-bold text-cyan-400",children:I.name})]},Ne))}),u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[u.jsx("span",{className:"text-gray-400",children:"Progreso:"}),u.jsx("span",{className:`font-bold ${J(te.from)}`,children:te.from}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),u.jsx("span",{className:`font-bold ${J(te.to)}`,children:te.to})]})]})]})]})};return u.jsxs(u.Fragment,{children:[fe(),(l==null?void 0:l.type)==="finishT4"&&u.jsx(Ly,{isOpen:M,onClose:()=>O(!1),heroes:Y(_),ignoredHeroes:ge,tierMap:oe,onEdit:se,onIgnore:be,onUnignore:E}),u.jsx(Yu,{isOpen:!!j,onClose:ye,onSave:de,hero:j,playerData:j?h[j.originalName]:null,recommendedBuilds:ie,maxInvestment:j?V.get(j.originalName)??null:null,watchlistSlots:S,setWatchlistSlots:N,allHeroes:y,tierMap:oe,navigate:i,priorities:H}),u.jsx("style",{children:`
                    @keyframes slide-in-right {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes fade-in {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                     @keyframes slide-up {
                        from { transform: translateY(2rem) scale(0.95); opacity: 0; }
                        to { transform: translateY(0) scale(1); opacity: 1; }
                    }
                `})]})},Ss=({title:i,description:t,onClick:l,href:a,icon:r})=>{const d=u.jsxs("div",{className:"group relative bg-gray-800/70 backdrop-blur-sm p-6 rounded-xl border border-gray-700/80 overflow-hidden h-full flex flex-col text-left transition-all duration-300 hover:border-red-600/60 hover:shadow-[0_0_40px_8px_rgba(239,68,68,0.5)]",children:[u.jsx("div",{className:"absolute top-0 right-0 h-24 w-24 bg-gradient-to-bl from-red-900/50 to-transparent rounded-bl-full opacity-30 group-hover:opacity-60 group-hover:scale-150 transition-all duration-500 ease-in-out"}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[u.jsx("div",{className:"text-red-500 mb-4 transition-transform duration-300 group-hover:scale-110 w-fit",children:r}),u.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:i}),u.jsx("p",{className:"text-gray-400 flex-grow text-base",children:t}),u.jsx("div",{className:"mt-auto pt-4 self-start",children:u.jsxs("div",{className:"flex items-center text-red-400 font-semibold",children:[u.jsx("span",{children:"Acceder"}),u.jsx("i",{className:"fas fa-arrow-right ml-2 transition-transform duration-300 group-hover:translate-x-1.5"})]})})]})]}),p={className:"no-underline cursor-pointer"};return a?u.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",...p,children:d}):u.jsx("div",{onClick:l,...p,children:d})},Vy=({navigate:i})=>u.jsxs("div",{className:"flex flex-col gap-8 h-full",children:[u.jsxs("div",{className:"text-center py-8 px-6 bg-gray-800/40 rounded-xl border border-gray-700/50 shrink-0",children:[u.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold text-white mb-4 text-shadow-dark animate-fade-in-down",children:["Optimizer for"," ",u.jsxs("span",{className:"text-red-500 inline-flex items-center justify-center gap-3",children:[u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/LogoGUILD.png",alt:"Logo del Gremio HISPANIA",className:"h-10 md:h-12"}),u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-8 md:h-10"}),"HISPANIA",u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-8 md:h-10"})]})]}),u.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed animate-fade-in-up-delayed",children:"Tu centro de mando para optimizar recursos y gestionar tu roster. Todas las herramientas que necesitas, en un solo lugar."})]}),u.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-trophy fa-3x"}),title:"Ranking de Hroes",description:"Consulta el ranking general de hroes, sus puntuaciones y comentarios de la comunidad experta.",onClick:()=>i("ranking")}),u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-list-ol fa-3x"}),title:"Prioridad de Recursos",description:"Optimiza tu inversin. Revisa las prioridades para SI, Muebles y Grabados de cada hroe.",onClick:()=>i("priority")}),u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-clone fa-3x"}),title:"Duplicacin de Muebles",description:"Gestiona y prioriza los duplicados de muebles para tus hroes 9/9 y maximiza su potencial.",onClick:()=>i("furniture-duplicates")}),u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-users-cog fa-3x"}),title:"Mi Roster",description:"Gestiona tu coleccin personal de hroes, registra tu progreso y visualiza tu poder.",onClick:()=>i("roster")}),u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-route fa-3x"}),title:"Hoja de Ruta",description:"Tu gua personalizada. Descubre qu hroe adquirir o en quin invertir a continuacin.",onClick:()=>i("roadmap")}),u.jsx(Ss,{icon:u.jsx("i",{className:"fas fa-cog fa-3x"}),title:"Opciones y Datos",description:"Configura la aplicacin, gestiona copias de seguridad locales y restaura tus datos.",onClick:()=>i("options")})]}),u.jsx(Oy,{navigate:i})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let By,Py;function zy(){return{geminiUrl:By,vertexUrl:Py}}function Fy(i,t,l,a){var r,d;if(!(i!=null&&i.baseUrl)){const p=zy();return t?(r=p.vertexUrl)!==null&&r!==void 0?r:l:(d=p.geminiUrl)!==null&&d!==void 0?d:a}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gn{}function he(i,t){const l=/\{([^}]+)\}/g;return i.replace(l,(a,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const d=t[r];return d!=null?String(d):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(i,t,l){for(let d=0;d<t.length-1;d++){const p=t[d];if(p.endsWith("[]")){const x=p.slice(0,-2);if(!(x in i))if(Array.isArray(l))i[x]=Array.from({length:l.length},()=>({}));else throw new Error(`Value must be a list given an array path ${p}`);if(Array.isArray(i[x])){const y=i[x];if(Array.isArray(l))for(let h=0;h<y.length;h++){const v=y[h];f(v,t.slice(d+1),l[h])}else for(const h of y)f(h,t.slice(d+1),l)}return}else if(p.endsWith("[0]")){const x=p.slice(0,-3);x in i||(i[x]=[{}]);const y=i[x];f(y[0],t.slice(d+1),l);return}(!i[p]||typeof i[p]!="object")&&(i[p]={}),i=i[p]}const a=t[t.length-1],r=i[a];if(r!==void 0){if(!l||typeof l=="object"&&Object.keys(l).length===0||l===r)return;if(typeof r=="object"&&typeof l=="object"&&r!==null&&l!==null)Object.assign(r,l);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.assign(i,l):i[a]=l}function c(i,t,l=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let a=0;a<t.length;a++){if(typeof i!="object"||i===null)return l;const r=t[a];if(r.endsWith("[]")){const d=r.slice(0,-2);if(d in i){const p=i[d];return Array.isArray(p)?p.map(x=>c(x,t.slice(a+1),l)):l}else return l}else i=i[r]}return i}catch(a){if(a instanceof TypeError)return l;throw a}}function Yy(i,t){for(const[l,a]of Object.entries(t)){const r=l.split("."),d=a.split("."),p=new Set;let x=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){x=y;break}if(x!==-1&&d.length>x)for(let y=x;y<d.length;y++){const h=d[y];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&p.add(h)}Uu(i,r,d,0,p)}}function Uu(i,t,l,a,r){if(a>=t.length||typeof i!="object"||i===null)return;const d=t[a];if(d.endsWith("[]")){const p=d.slice(0,-2),x=i;if(p in x&&Array.isArray(x[p]))for(const y of x[p])Uu(y,t,l,a+1,r)}else if(d==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const p=i,x=Object.keys(p).filter(h=>!h.startsWith("_")&&!r.has(h)),y={};for(const h of x)y[h]=p[h];for(const[h,v]of Object.entries(y)){const S=[];for(const N of l.slice(a))N==="*"?S.push(h):S.push(N);f(p,S,v)}for(const h of x)delete p[h]}}else{const p=i;d in p&&Uu(p[d],t,l,a+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $u(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $y(i){const t={},l=c(i,["operationName"]);l!=null&&f(t,["operationName"],l);const a=c(i,["resourceName"]);return a!=null&&f(t,["_url","resourceName"],a),t}function Jy(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],Xy(p)),t}function Ky(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response"]);return p!=null&&f(t,["response"],Qy(p)),t}function Xy(i){const t={},l=c(i,["generatedSamples"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>Zy(p))),f(t,["generatedVideos"],d)}const a=c(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function Qy(i){const t={},l=c(i,["videos"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>Wy(p))),f(t,["generatedVideos"],d)}const a=c(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function Zy(i){const t={},l=c(i,["video"]);return l!=null&&f(t,["video"],lv(l)),t}function Wy(i){const t={},l=c(i,["_self"]);return l!=null&&f(t,["video"],av(l)),t}function ev(i){const t={},l=c(i,["operationName"]);return l!=null&&f(t,["_url","operationName"],l),t}function tv(i){const t={},l=c(i,["operationName"]);return l!=null&&f(t,["_url","operationName"],l),t}function nv(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response"]);return p!=null&&f(t,["response"],iv(p)),t}function iv(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["parent"]);a!=null&&f(t,["parent"],a);const r=c(i,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function fh(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response"]);return p!=null&&f(t,["response"],sv(p)),t}function sv(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["parent"]);a!=null&&f(t,["parent"],a);const r=c(i,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function lv(i){const t={},l=c(i,["uri"]);l!=null&&f(t,["uri"],l);const a=c(i,["encodedVideo"]);a!=null&&f(t,["videoBytes"],$u(a));const r=c(i,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function av(i){const t={},l=c(i,["gcsUri"]);l!=null&&f(t,["uri"],l);const a=c(i,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],$u(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(hp||(hp={}));var xp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(xp||(xp={}));var yp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(yp||(yp={}));var ui;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(ui||(ui={}));var vp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(vp||(vp={}));var Sp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Sp||(Sp={}));var bp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(bp||(bp={}));var Np;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Np||(Np={}));var Tp;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Tp||(Tp={}));var Cp;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cp||(Cp={}));var Ep;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Ep||(Ep={}));var Ap;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Ap||(Ap={}));var _p;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(_p||(_p={}));var wp;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(wp||(wp={}));var Rp;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Rp||(Rp={}));var Mp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Mp||(Mp={}));var Dp;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Dp||(Dp={}));var Ip;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ip||(Ip={}));var Ka;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Ka||(Ka={}));var kp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kp||(kp={}));var Up;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Up||(Up={}));var qp;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qp||(qp={}));var qu;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qu||(qu={}));var Hp;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Hp||(Hp={}));var Gp;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Gp||(Gp={}));var jp;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(jp||(jp={}));var Lp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Lp||(Lp={}));var Op;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Op||(Op={}));var Vp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Vp||(Vp={}));var Bp;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Bp||(Bp={}));var Pp;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Pp||(Pp={}));var zp;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(zp||(zp={}));var Fp;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fp||(Fp={}));var Yp;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Yp||(Yp={}));var $p;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($p||($p={}));var Jp;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Jp||(Jp={}));var Kp;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Kp||(Kp={}));var Xp;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Xp||(Xp={}));var Qp;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Qp||(Qp={}));var Zp;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Zp||(Zp={}));var Wp;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Wp||(Wp={}));var eg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(eg||(eg={}));var tg;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(tg||(tg={}));var ng;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(ng||(ng={}));var ig;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ig||(ig={}));var sg;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(sg||(sg={}));var lg;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(lg||(lg={}));var ag;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ag||(ag={}));var og;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(og||(og={}));var rg;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rg||(rg={}));var ug;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ug||(ug={}));var cg;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(cg||(cg={}));var Ts;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Ts||(Ts={}));class Hu{constructor(t){const l={};for(const a of t.headers.entries())l[a[0]]=a[1];this.headers=l,this.responseInternal=t}json(){return this.responseInternal.json()}}class El{get text(){var t,l,a,r,d,p,x,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const S=[];for(const N of(y=(x=(p=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content)===null||x===void 0?void 0:x.parts)!==null&&y!==void 0?y:[]){for(const[C,_]of Object.entries(N))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(_!==null||_!==void 0)&&S.push(C);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;v=!0,h+=N.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var t,l,a,r,d,p,x,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const S of(y=(x=(p=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content)===null||x===void 0?void 0:x.parts)!==null&&y!==void 0?y:[]){for(const[N,C]of Object.entries(S))N!=="inlineData"&&(C!==null||C!==void 0)&&v.push(N);S.inlineData&&typeof S.inlineData.data=="string"&&(h+=atob(S.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,l,a,r,d,p,x,y;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(x=(p=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content)===null||x===void 0?void 0:x.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,l,a,r,d,p,x,y,h;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(x=(p=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content)===null||x===void 0?void 0:x.parts)===null||y===void 0?void 0:y.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,l,a,r,d,p,x,y,h;if(((r=(a=(l=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||l===void 0?void 0:l.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(x=(p=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content)===null||x===void 0?void 0:x.parts)===null||y===void 0?void 0:y.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class dg{}class fg{}class ov{}class rv{}class uv{}class cv{}class mg{}class pg{}class gg{}class dv{}class Xa{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const a=new Xa;let r;const d=t;return l?r=Ky(d):r=Jy(d),Object.assign(a,r),a}}class hg{}class xg{}class yg{}class fv{}class mv{}class pv{}class Ju{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const a=new Ju,d=nv(t);return Object.assign(a,d),a}}class gv{}class hv{}class xv{}class vg{}class yv{get text(){var t,l,a;let r="",d=!1;const p=[];for(const x of(a=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&a!==void 0?a:[]){for(const[y,h]of Object.entries(x))y!=="text"&&y!=="thought"&&h!==null&&p.push(y);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;d=!0,r+=x.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?r:void 0}get data(){var t,l,a;let r="";const d=[];for(const p of(a=(l=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||l===void 0?void 0:l.parts)!==null&&a!==void 0?a:[]){for(const[x,y]of Object.entries(p))x!=="inlineData"&&y!==null&&d.push(x);p.inlineData&&typeof p.inlineData.data=="string"&&(r+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ku{_fromAPIResponse({apiResponse:t,_isVertexAI:l}){const a=new Ku,d=fh(t);return Object.assign(a,d),a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const l=t.split("/",2);return`publishers/${l[0]}/models/${l[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function mh(i,t){const l=ze(i,t);return l?l.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}`:l.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${l}`:l:""}function ph(i){return Array.isArray(i)?i.map(t=>Qa(t)):[Qa(i)]}function Qa(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function gh(i){const t=Qa(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hh(i){const t=Qa(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Sg(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function xh(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>Sg(t)):[Sg(i)]}function Gu(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function bg(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Ng(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Et(i){if(i==null)throw new Error("ContentUnion is required");return Gu(i)?i:{role:"user",parts:xh(i)}}function Xu(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(l=>{const a=Et(l);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(i.isVertexAI()){const l=Et(t);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]}return Array.isArray(t)?t.map(l=>Et(l)):[Et(t)]}function ln(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(bg(i)||Ng(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Et(i)]}const t=[],l=[],a=Gu(i[0]);for(const r of i){const d=Gu(r);if(d!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)t.push(r);else{if(bg(r)||Ng(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");l.push(r)}}return a||t.push({role:"user",parts:xh(l)}),t}function Sv(i,t){i.includes("null")&&(t.nullable=!0);const l=i.filter(a=>a!=="null");if(l.length===1)t.type=Object.values(ui).includes(l[0].toUpperCase())?l[0].toUpperCase():ui.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const a of l)t.anyOf.push({type:Object.values(ui).includes(a.toUpperCase())?a.toUpperCase():ui.TYPE_UNSPECIFIED})}}function Cs(i){const t={},l=["items"],a=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=i.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(t.nullable=!0,i=d[1]):d[1].type==="null"&&(t.nullable=!0,i=d[0])),i.type instanceof Array&&Sv(i.type,t);for(const[p,x]of Object.entries(i))if(x!=null)if(p=="type"){if(x==="null")throw new Error("type: null can not be the only possible type for the field.");if(x instanceof Array)continue;t.type=Object.values(ui).includes(x.toUpperCase())?x.toUpperCase():ui.TYPE_UNSPECIFIED}else if(l.includes(p))t[p]=Cs(x);else if(a.includes(p)){const y=[];for(const h of x){if(h.type=="null"){t.nullable=!0;continue}y.push(Cs(h))}t[p]=y}else if(r.includes(p)){const y={};for(const[h,v]of Object.entries(x))y[h]=Cs(v);t[p]=y}else{if(p==="additionalProperties")continue;t[p]=x}return t}function Qu(i){return Cs(i)}function Zu(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Wu(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function ws(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Cs(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Cs(t.response));return i}function Rs(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const l of i)t.push(l);return t}function bv(i,t,l,a=1){const r=!t.startsWith(`${l}/`)&&t.split("/").length===a;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${l}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${l}/${t}`:t:r?`${l}/${t}`:t}function jn(i,t){if(typeof t!="string")throw new Error("name must be a string");return bv(i,t,"cachedContents")}function yh(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function pi(i){return $u(i)}function Nv(i){return i!=null&&typeof i=="object"&&"name"in i}function Tv(i){return i!=null&&typeof i=="object"&&"video"in i}function Cv(i){return i!=null&&typeof i=="object"&&"uri"in i}function vh(i){var t;let l;if(Nv(i)&&(l=i.name),!(Cv(i)&&(l=i.uri,l===void 0))&&!(Tv(i)&&(l=(t=i.video)===null||t===void 0?void 0:t.uri,l===void 0))){if(typeof i=="string"&&(l=i),l===void 0)throw new Error("Could not extract file name from the provided input.");if(l.startsWith("https://")){const r=l.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${l}`);l=r[0]}else l.startsWith("files/")&&(l=l.split("files/")[1]);return l}}function Sh(i,t){let l;return i.isVertexAI()?l=t?"publishers/google/models":"models":l=t?"models":"tunedModels",l}function bh(i){for(const t of["models","tunedModels","publisherModels"])if(Ev(i,t))return i[t];return[]}function Ev(i,t){return i!==null&&typeof i=="object"&&t in i}function Av(i,t={}){const l=i,a={name:l.name,description:l.description,parametersJsonSchema:l.inputSchema};return l.outputSchema&&(a.responseJsonSchema=l.outputSchema),t.behavior&&(a.behavior=t.behavior),{functionDeclarations:[a]}}function _v(i,t={}){const l=[],a=new Set;for(const r of i){const d=r.name;if(a.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);a.add(d);const p=Av(r,t);p.functionDeclarations&&l.push(...p.functionDeclarations)}return{functionDeclarations:l}}function Nh(i,t){let l;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))l={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))l={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))l={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");l={inlinedRequests:t}}else l=t;const a=[l.gcsUri,l.bigqueryUri].filter(Boolean).length,r=[l.inlinedRequests,l.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return l}function wv(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Th(i){if(typeof i!="object"||i===null)return{};const t=i,l=t.inlinedResponses;if(typeof l!="object"||l===null)return i;const r=l.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let d=!1;for(const p of r){if(typeof p!="object"||p===null)continue;const y=p.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){d=!0;break}}return d&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Ms(i,t){const l=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(l))return l.split("/").pop();throw new Error(`Invalid batch job name: ${l}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(l))return l.split("/").pop();if(/^\d+$/.test(l))return l;throw new Error(`Invalid batch job name: ${l}.`)}function Ch(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(i){const t={},l=c(i,["responsesFile"]);l!=null&&f(t,["fileName"],l);const a=c(i,["inlinedResponses","inlinedResponses"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>aS(p))),f(t,["inlinedResponses"],d)}const r=c(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["inlinedEmbedContentResponses"],d)}return t}function Mv(i){const t={},l=c(i,["predictionsFormat"]);l!=null&&f(t,["format"],l);const a=c(i,["gcsDestination","outputUriPrefix"]);a!=null&&f(t,["gcsUri"],a);const r=c(i,["bigqueryDestination","outputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function Dv(i){const t={},l=c(i,["format"]);l!=null&&f(t,["predictionsFormat"],l);const a=c(i,["gcsUri"]);a!=null&&f(t,["gcsDestination","outputUriPrefix"],a);const r=c(i,["bigqueryUri"]);if(r!=null&&f(t,["bigqueryDestination","outputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function $a(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata","displayName"]);a!=null&&f(t,["displayName"],a);const r=c(i,["metadata","state"]);r!=null&&f(t,["state"],Ch(r));const d=c(i,["metadata","createTime"]);d!=null&&f(t,["createTime"],d);const p=c(i,["metadata","endTime"]);p!=null&&f(t,["endTime"],p);const x=c(i,["metadata","updateTime"]);x!=null&&f(t,["updateTime"],x);const y=c(i,["metadata","model"]);y!=null&&f(t,["model"],y);const h=c(i,["metadata","output"]);return h!=null&&f(t,["dest"],Rv(Th(h))),t}function ju(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(i,["state"]);r!=null&&f(t,["state"],Ch(r));const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["createTime"]);p!=null&&f(t,["createTime"],p);const x=c(i,["startTime"]);x!=null&&f(t,["startTime"],x);const y=c(i,["endTime"]);y!=null&&f(t,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(t,["updateTime"],h);const v=c(i,["model"]);v!=null&&f(t,["model"],v);const S=c(i,["inputConfig"]);S!=null&&f(t,["src"],Iv(S));const N=c(i,["outputConfig"]);N!=null&&f(t,["dest"],Mv(Th(N)));const C=c(i,["completionStats"]);return C!=null&&f(t,["completionStats"],C),t}function Iv(i){const t={},l=c(i,["instancesFormat"]);l!=null&&f(t,["format"],l);const a=c(i,["gcsSource","uris"]);a!=null&&f(t,["gcsUri"],a);const r=c(i,["bigquerySource","inputUri"]);return r!=null&&f(t,["bigqueryUri"],r),t}function kv(i,t){const l={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=c(t,["fileName"]);a!=null&&f(l,["fileName"],a);const r=c(t,["inlinedRequests"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>lS(i,p))),f(l,["requests","requests"],d)}return l}function Uv(i){const t={},l=c(i,["format"]);l!=null&&f(t,["instancesFormat"],l);const a=c(i,["gcsUri"]);a!=null&&f(t,["gcsSource","uris"],a);const r=c(i,["bigqueryUri"]);if(r!=null&&f(t,["bigquerySource","inputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function qv(i){const t={},l=c(i,["data"]);if(l!=null&&f(t,["data"],l),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Hv(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function Gv(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function jv(i){const t={},l=c(i,["content"]);l!=null&&f(t,["content"],l);const a=c(i,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],Lv(a));const r=c(i,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const d=c(i,["finishReason"]);d!=null&&f(t,["finishReason"],d);const p=c(i,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const x=c(i,["groundingMetadata"]);x!=null&&f(t,["groundingMetadata"],x);const y=c(i,["index"]);y!=null&&f(t,["index"],y);const h=c(i,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const v=c(i,["safetyRatings"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(C=>C)),f(t,["safetyRatings"],N)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(t,["urlContextMetadata"],S),t}function Lv(i){const t={},l=c(i,["citationSources"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function Eh(i){const t={},l=c(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>mS(d))),f(t,["parts"],r)}const a=c(i,["role"]);return a!=null&&f(t,["role"],a),t}function Ov(i,t){const l={},a=c(i,["displayName"]);if(t!==void 0&&a!=null&&f(t,["batch","displayName"],a),c(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return l}function Vv(i,t){const l={},a=c(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(i,["dest"]);return t!==void 0&&r!=null&&f(t,["outputConfig"],Dv(wv(r))),l}function Tg(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["src"]);r!=null&&f(l,["batch","inputConfig"],kv(i,Nh(i,r)));const d=c(t,["config"]);return d!=null&&Ov(d,l),l}function Bv(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["model"],ze(i,a));const r=c(t,["src"]);r!=null&&f(l,["inputConfig"],Uv(Nh(i,r)));const d=c(t,["config"]);return d!=null&&Vv(d,l),l}function Pv(i,t){const l={},a=c(i,["displayName"]);return t!==void 0&&a!=null&&f(t,["batch","displayName"],a),l}function zv(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["src"]);r!=null&&f(l,["batch","inputConfig"],Qv(i,r));const d=c(t,["config"]);return d!=null&&Pv(d,l),l}function Fv(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function Yv(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function $v(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["name"]);a!=null&&f(t,["name"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);return d!=null&&f(t,["error"],d),t}function Jv(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["name"]);a!=null&&f(t,["name"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);return d!=null&&f(t,["error"],d),t}function Kv(i,t){const l={},a=c(t,["contents"]);if(a!=null){let d=Xu(i,a);Array.isArray(d)&&(d=d.map(p=>p)),f(l,["requests[]","request","content"],d)}const r=c(t,["config"]);return r!=null&&(f(l,["_self"],Xv(r,l)),Yy(l,{"requests[].*":"requests[].request.*"})),l}function Xv(i,t){const l={},a=c(i,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=c(i,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const d=c(i,["outputDimensionality"]);if(t!==void 0&&d!=null&&f(t,["requests[]","outputDimensionality"],d),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function Qv(i,t){const l={},a=c(t,["fileName"]);a!=null&&f(l,["file_name"],a);const r=c(t,["inlinedRequests"]);return r!=null&&f(l,["requests"],Kv(i,r)),l}function Zv(i){const t={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=c(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Wv(i,t,l){const a={},r=c(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],Eh(Et(r)));const d=c(t,["temperature"]);d!=null&&f(a,["temperature"],d);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const x=c(t,["topK"]);x!=null&&f(a,["topK"],x);const y=c(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=c(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=c(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const S=c(t,["responseLogprobs"]);S!=null&&f(a,["responseLogprobs"],S);const N=c(t,["logprobs"]);N!=null&&f(a,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&f(a,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&f(a,["frequencyPenalty"],_);const U=c(t,["seed"]);U!=null&&f(a,["seed"],U);const H=c(t,["responseMimeType"]);H!=null&&f(a,["responseMimeType"],H);const M=c(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],Qu(M));const O=c(t,["responseJsonSchema"]);if(O!=null&&f(a,["responseJsonSchema"],O),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=c(t,["safetySettings"]);if(l!==void 0&&j!=null){let Y=j;Array.isArray(Y)&&(Y=Y.map(ge=>pS(ge))),f(l,["safetySettings"],Y)}const ee=c(t,["tools"]);if(l!==void 0&&ee!=null){let Y=Rs(ee);Array.isArray(Y)&&(Y=Y.map(ge=>gS(ws(ge)))),f(l,["tools"],Y)}const ie=c(t,["toolConfig"]);if(l!==void 0&&ie!=null&&f(l,["toolConfig"],ie),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=c(t,["cachedContent"]);l!==void 0&&ue!=null&&f(l,["cachedContent"],jn(i,ue));const D=c(t,["responseModalities"]);D!=null&&f(a,["responseModalities"],D);const Q=c(t,["mediaResolution"]);Q!=null&&f(a,["mediaResolution"],Q);const $=c(t,["speechConfig"]);if($!=null&&f(a,["speechConfig"],Zu($)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=c(t,["thinkingConfig"]);V!=null&&f(a,["thinkingConfig"],V);const oe=c(t,["imageConfig"]);return oe!=null&&f(a,["imageConfig"],oe),a}function eS(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(h=>jv(h))),f(t,["candidates"],y)}const r=c(i,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const d=c(i,["promptFeedback"]);d!=null&&f(t,["promptFeedback"],d);const p=c(i,["responseId"]);p!=null&&f(t,["responseId"],p);const x=c(i,["usageMetadata"]);return x!=null&&f(t,["usageMetadata"],x),t}function tS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function nS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],Ms(i,a)),l}function iS(i){const t={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=c(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function sS(i){const t={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=c(i,["timeRangeFilter"]);return l!=null&&f(t,["timeRangeFilter"],l),t}function lS(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["request","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let x=ln(r);Array.isArray(x)&&(x=x.map(y=>Eh(y))),f(l,["request","contents"],x)}const d=c(t,["metadata"]);d!=null&&f(l,["metadata"],d);const p=c(t,["config"]);return p!=null&&f(l,["request","generationConfig"],Wv(i,p,c(l,["request"],{}))),l}function aS(i){const t={},l=c(i,["response"]);l!=null&&f(t,["response"],eS(l));const a=c(i,["error"]);return a!=null&&f(t,["error"],a),t}function oS(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);if(t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),c(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return l}function rS(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);const d=c(i,["filter"]);return t!==void 0&&d!=null&&f(t,["_query","filter"],d),l}function uS(i){const t={},l=c(i,["config"]);return l!=null&&oS(l,t),t}function cS(i){const t={},l=c(i,["config"]);return l!=null&&rS(l,t),t}function dS(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["operations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>$a(p))),f(t,["batchJobs"],d)}return t}function fS(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["batchPredictionJobs"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>ju(p))),f(t,["batchJobs"],d)}return t}function mS(i){const t={},l=c(i,["functionCall"]);l!=null&&f(t,["functionCall"],l);const a=c(i,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(i,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(i,["fileData"]);d!=null&&f(t,["fileData"],Zv(d));const p=c(i,["functionResponse"]);p!=null&&f(t,["functionResponse"],p);const x=c(i,["inlineData"]);x!=null&&f(t,["inlineData"],qv(x));const y=c(i,["text"]);y!=null&&f(t,["text"],y);const h=c(i,["thought"]);h!=null&&f(t,["thought"],h);const v=c(i,["thoughtSignature"]);v!=null&&f(t,["thoughtSignature"],v);const S=c(i,["videoMetadata"]);return S!=null&&f(t,["videoMetadata"],S),t}function pS(i){const t={},l=c(i,["category"]);if(l!=null&&f(t,["category"],l),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(i,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function gS(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(t,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(i,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(i,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(i,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const p=c(i,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=c(i,["googleMaps"]);x!=null&&f(t,["googleMaps"],iS(x));const y=c(i,["googleSearch"]);y!=null&&f(t,["googleSearch"],sS(y));const h=c(i,["urlContext"]);return h!=null&&f(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hn;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Hn||(Hn={}));class qi{constructor(t,l,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=l,this.init(t,a,r)}init(t,l,a){var r,d;this.nameInternal=t,this.pageInternal=l[this.nameInternal]||[],this.sdkHttpResponseInternal=l==null?void 0:l.sdkHttpResponse,this.idxInternal=0;let p={config:{}};!a||Object.keys(a).length===0?p={config:{}}:typeof a=="object"?p=Object.assign({},a):p=a,p.config&&(p.config.pageToken=l.nextPageToken),this.paramsInternal=p,this.pageInternalSize=(d=(r=p.config)===null||r===void 0?void 0:r.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hS extends Gn{constructor(t){super(),this.apiClient=t,this.create=async l=>(this.apiClient.isVertexAI()&&(l.config=this.formatDestination(l.src,l.config)),this.createInternal(l)),this.createEmbeddings=async l=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(l)},this.list=async(l={})=>new qi(Hn.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(l),l)}createInlinedGenerateContentRequest(t){const l=Tg(this.apiClient,t),a=l._url,r=he("{model}:batchGenerateContent",a),x=l.batch.inputConfig.requests,y=x.requests,h=[];for(const v of y){const S=Object.assign({},v);if(S.systemInstruction){const N=S.systemInstruction;delete S.systemInstruction;const C=S.request;C.systemInstruction=N,S.request=C}h.push(S)}return x.requests=h,delete l.config,delete l._url,delete l._query,{path:r,body:l}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,l){const a=l?Object.assign({},l):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const d=this.getGcsUri(t),p=this.getBigqueryUri(t);if(d)d.endsWith(".jsonl")?a.dest=`${d.slice(0,-6)}/dest`:a.dest=`${d}_dest_${r}`;else if(p)a.dest=`${p}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=Bv(this.apiClient,t);return x=he("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>ju(v))}else{const h=Tg(this.apiClient,t);return x=he("{model}:batchGenerateContent",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>$a(v))}}async createEmbeddingsInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=zv(this.apiClient,t);return d=he("{model}:asyncBatchEmbedContent",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>$a(y))}}async get(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=nS(this.apiClient,t);return x=he("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>ju(v))}else{const h=tS(this.apiClient,t);return x=he("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>$a(v))}}async cancel(t){var l,a,r,d;let p="",x={};if(this.apiClient.isVertexAI()){const y=Gv(this.apiClient,t);p=he("batchPredictionJobs/{name}:cancel",y._url),x=y._query,delete y._url,delete y._query,await this.apiClient.request({path:p,queryParams:x,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=Hv(this.apiClient,t);p=he("batches/{name}:cancel",y._url),x=y._query,delete y._url,delete y._query,await this.apiClient.request({path:p,queryParams:x,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=cS(t);return x=he("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=fS(v),N=new vg;return Object.assign(N,S),N})}else{const h=uS(t);return x=he("batches",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=dS(v),N=new vg;return Object.assign(N,S),N})}}async delete(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=Yv(this.apiClient,t);return x=he("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>Jv(v))}else{const h=Fv(this.apiClient,t);return x=he("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>$v(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xS(i){const t={},l=c(i,["data"]);if(l!=null&&f(t,["data"],l),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Cg(i){const t={},l=c(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>jS(d))),f(t,["parts"],r)}const a=c(i,["role"]);return a!=null&&f(t,["role"],a),t}function yS(i,t){const l={},a=c(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(i,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const d=c(i,["displayName"]);t!==void 0&&d!=null&&f(t,["displayName"],d);const p=c(i,["contents"]);if(t!==void 0&&p!=null){let v=ln(p);Array.isArray(v)&&(v=v.map(S=>Cg(S))),f(t,["contents"],v)}const x=c(i,["systemInstruction"]);t!==void 0&&x!=null&&f(t,["systemInstruction"],Cg(Et(x)));const y=c(i,["tools"]);if(t!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>LS(S))),f(t,["tools"],v)}const h=c(i,["toolConfig"]);if(t!==void 0&&h!=null&&f(t,["toolConfig"],h),c(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return l}function vS(i,t){const l={},a=c(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(i,["expireTime"]);t!==void 0&&r!=null&&f(t,["expireTime"],r);const d=c(i,["displayName"]);t!==void 0&&d!=null&&f(t,["displayName"],d);const p=c(i,["contents"]);if(t!==void 0&&p!=null){let S=ln(p);Array.isArray(S)&&(S=S.map(N=>N)),f(t,["contents"],S)}const x=c(i,["systemInstruction"]);t!==void 0&&x!=null&&f(t,["systemInstruction"],Et(x));const y=c(i,["tools"]);if(t!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(N=>OS(N))),f(t,["tools"],S)}const h=c(i,["toolConfig"]);t!==void 0&&h!=null&&f(t,["toolConfig"],h);const v=c(i,["kmsKeyName"]);return t!==void 0&&v!=null&&f(t,["encryption_spec","kmsKeyName"],v),l}function SS(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["model"],mh(i,a));const r=c(t,["config"]);return r!=null&&yS(r,l),l}function bS(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["model"],mh(i,a));const r=c(t,["config"]);return r!=null&&vS(r,l),l}function NS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],jn(i,a)),l}function TS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],jn(i,a)),l}function CS(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function ES(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function AS(i){const t={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=c(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function _S(i){const t={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=c(i,["description"]);l!=null&&f(t,["description"],l);const a=c(i,["name"]);a!=null&&f(t,["name"],a);const r=c(i,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(i,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const p=c(i,["response"]);p!=null&&f(t,["response"],p);const x=c(i,["responseJsonSchema"]);return x!=null&&f(t,["responseJsonSchema"],x),t}function wS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],jn(i,a)),l}function RS(i,t){const l={},a=c(t,["name"]);return a!=null&&f(l,["_url","name"],jn(i,a)),l}function MS(i){const t={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=c(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function DS(i){const t={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=c(i,["timeRangeFilter"]);return l!=null&&f(t,["timeRangeFilter"],l),t}function IS(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function kS(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function US(i){const t={},l=c(i,["config"]);return l!=null&&IS(l,t),t}function qS(i){const t={},l=c(i,["config"]);return l!=null&&kS(l,t),t}function HS(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["cachedContents"],d)}return t}function GS(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["cachedContents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["cachedContents"],d)}return t}function jS(i){const t={},l=c(i,["functionCall"]);l!=null&&f(t,["functionCall"],l);const a=c(i,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(i,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(i,["fileData"]);d!=null&&f(t,["fileData"],AS(d));const p=c(i,["functionResponse"]);p!=null&&f(t,["functionResponse"],p);const x=c(i,["inlineData"]);x!=null&&f(t,["inlineData"],xS(x));const y=c(i,["text"]);y!=null&&f(t,["text"],y);const h=c(i,["thought"]);h!=null&&f(t,["thought"],h);const v=c(i,["thoughtSignature"]);v!=null&&f(t,["thoughtSignature"],v);const S=c(i,["videoMetadata"]);return S!=null&&f(t,["videoMetadata"],S),t}function LS(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(t,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(i,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(i,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(i,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const p=c(i,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=c(i,["googleMaps"]);x!=null&&f(t,["googleMaps"],MS(x));const y=c(i,["googleSearch"]);y!=null&&f(t,["googleSearch"],DS(y));const h=c(i,["urlContext"]);return h!=null&&f(t,["urlContext"],h),t}function OS(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(N=>_S(N))),f(t,["functionDeclarations"],S)}const a=c(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(i,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(i,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const x=c(i,["enterpriseWebSearch"]);x!=null&&f(t,["enterpriseWebSearch"],x);const y=c(i,["googleMaps"]);y!=null&&f(t,["googleMaps"],y);const h=c(i,["googleSearch"]);h!=null&&f(t,["googleSearch"],h);const v=c(i,["urlContext"]);return v!=null&&f(t,["urlContext"],v),t}function VS(i,t){const l={},a=c(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(i,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),l}function BS(i,t){const l={},a=c(i,["ttl"]);t!==void 0&&a!=null&&f(t,["ttl"],a);const r=c(i,["expireTime"]);return t!==void 0&&r!=null&&f(t,["expireTime"],r),l}function PS(i,t){const l={},a=c(t,["name"]);a!=null&&f(l,["_url","name"],jn(i,a));const r=c(t,["config"]);return r!=null&&VS(r,l),l}function zS(i,t){const l={},a=c(t,["name"]);a!=null&&f(l,["_url","name"],jn(i,a));const r=c(t,["config"]);return r!=null&&BS(r,l),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FS extends Gn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new qi(Hn.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(l),l)}async create(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=bS(this.apiClient,t);return x=he("cachedContents",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>v)}else{const h=SS(this.apiClient,t);return x=he("cachedContents",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>v)}}async get(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=RS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>v)}else{const h=wS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>v)}}async delete(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=TS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=ES(v),N=new xg;return Object.assign(N,S),N})}else{const h=NS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=CS(v),N=new xg;return Object.assign(N,S),N})}}async update(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=zS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>v)}else{const h=PS(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>v)}}async listInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=qS(t);return x=he("cachedContents",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=GS(v),N=new yg;return Object.assign(N,S),N})}else{const h=US(t);return x=he("cachedContents",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=HS(v),N=new yg;return Object.assign(N,S),N})}}}function Eg(i){var t=typeof Symbol=="function"&&Symbol.iterator,l=t&&i[t],a=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(i){return this instanceof tt?(this.v=i,this):new tt(i)}function Es(i,t,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=l.apply(i,t||[]),r,d=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",p),r[Symbol.asyncIterator]=function(){return this},r;function p(C){return function(_){return Promise.resolve(_).then(C,S)}}function x(C,_){a[C]&&(r[C]=function(U){return new Promise(function(H,M){d.push([C,U,H,M])>1||y(C,U)})},_&&(r[C]=_(r[C])))}function y(C,_){try{h(a[C](_))}catch(U){N(d[0][3],U)}}function h(C){C.value instanceof tt?Promise.resolve(C.value.v).then(v,S):N(d[0][2],C)}function v(C){y("next",C)}function S(C){y("throw",C)}function N(C,_){C(_),d.shift(),d.length&&y(d[0][0],d[0][1])}}function _l(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],l;return t?t.call(i):(i=typeof Eg=="function"?Eg(i):i[Symbol.iterator](),l={},a("next"),a("throw"),a("return"),l[Symbol.asyncIterator]=function(){return this},l);function a(d){l[d]=i[d]&&function(p){return new Promise(function(x,y){p=i[d](p),r(x,y,p.done,p.value)})}}function r(d,p,x,y){Promise.resolve(y).then(function(h){d({value:h,done:x})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YS(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const l=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return l===void 0?!1:Ah(l)}function Ah(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function $S(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ag(i){if(i===void 0||i.length===0)return[];const t=[],l=i.length;let a=0;for(;a<l;)if(i[a].role==="user")t.push(i[a]),a++;else{const r=[];let d=!0;for(;a<l&&i[a].role==="model";)r.push(i[a]),d&&!Ah(i[a])&&(d=!1),a++;d?t.push(...r):t.pop()}return t}class JS{constructor(t,l){this.modelsModule=t,this.apiClient=l}create(t){return new KS(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class KS{constructor(t,l,a,r={},d=[]){this.apiClient=t,this.modelsModule=l,this.model=a,this.config=r,this.history=d,this.sendPromise=Promise.resolve(),$S(d)}async sendMessage(t){var l;await this.sendPromise;const a=Et(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(l=t.config)!==null&&l!==void 0?l:this.config});return this.sendPromise=(async()=>{var d,p,x;const y=await r,h=(p=(d=y.candidates)===null||d===void 0?void 0:d[0])===null||p===void 0?void 0:p.content,v=y.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let N=[];v!=null&&(N=(x=v.slice(S))!==null&&x!==void 0?x:[]);const C=h?[h]:[];this.recordHistory(a,C,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var l;await this.sendPromise;const a=Et(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(l=t.config)!==null&&l!==void 0?l:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const d=await r;return this.processStreamResponse(d,a)}getHistory(t=!1){const l=t?Ag(this.history):this.history;return structuredClone(l)}processStreamResponse(t,l){var a,r;return Es(this,arguments,function*(){var p,x,y,h;const v=[];try{for(var S=!0,N=_l(t),C;C=yield tt(N.next()),p=C.done,!p;S=!0){h=C.value,S=!1;const _=h;if(YS(_)){const U=(r=(a=_.candidates)===null||a===void 0?void 0:a[0])===null||r===void 0?void 0:r.content;U!==void 0&&v.push(U)}yield yield tt(_)}}catch(_){x={error:_}}finally{try{!S&&!p&&(y=N.return)&&(yield tt(y.call(N)))}finally{if(x)throw x.error}}this.recordHistory(l,v)})}recordHistory(t,l,a){let r=[];l.length>0&&l.every(d=>d.role!==void 0)?r=l:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Ag(a)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class to extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,to.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XS(i){const t={},l=c(i,["file"]);return l!=null&&f(t,["file"],l),t}function QS(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function ZS(i){const t={},l=c(i,["name"]);return l!=null&&f(t,["_url","file"],vh(l)),t}function WS(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function eb(i){const t={},l=c(i,["name"]);return l!=null&&f(t,["_url","file"],vh(l)),t}function tb(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function nb(i){const t={},l=c(i,["config"]);return l!=null&&tb(l,t),t}function ib(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["files"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["files"],d)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sb extends Gn{constructor(t){super(),this.apiClient=t,this.list=async(l={})=>new qi(Hn.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(l),l)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(l=>l)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=nb(t);return d=he("files",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=ib(y),v=new gv;return Object.assign(v,h),v})}}async createInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=XS(t);return d=he("upload/v1beta/files",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=QS(y),v=new hv;return Object.assign(v,h),v})}}async get(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=eb(t);return d=he("files/{file}",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=ZS(t);return d=he("files/{file}",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=WS(y),v=new xv;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ja(i){const t={},l=c(i,["data"]);if(l!=null&&f(t,["data"],l),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function lb(i){const t={},l=c(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>Sb(d))),f(t,["parts"],r)}const a=c(i,["role"]);return a!=null&&f(t,["role"],a),t}function ab(i){const t={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=c(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function ob(i){const t={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=c(i,["description"]);l!=null&&f(t,["description"],l);const a=c(i,["name"]);a!=null&&f(t,["name"],a);const r=c(i,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(i,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const p=c(i,["response"]);p!=null&&f(t,["response"],p);const x=c(i,["responseJsonSchema"]);return x!=null&&f(t,["responseJsonSchema"],x),t}function rb(i){const t={},l=c(i,["modelSelectionConfig"]);l!=null&&f(t,["modelConfig"],l);const a=c(i,["responseJsonSchema"]);a!=null&&f(t,["responseJsonSchema"],a);const r=c(i,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const d=c(i,["candidateCount"]);d!=null&&f(t,["candidateCount"],d);const p=c(i,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const x=c(i,["frequencyPenalty"]);x!=null&&f(t,["frequencyPenalty"],x);const y=c(i,["logprobs"]);y!=null&&f(t,["logprobs"],y);const h=c(i,["maxOutputTokens"]);h!=null&&f(t,["maxOutputTokens"],h);const v=c(i,["mediaResolution"]);v!=null&&f(t,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(t,["presencePenalty"],S);const N=c(i,["responseLogprobs"]);N!=null&&f(t,["responseLogprobs"],N);const C=c(i,["responseMimeType"]);C!=null&&f(t,["responseMimeType"],C);const _=c(i,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const U=c(i,["responseSchema"]);U!=null&&f(t,["responseSchema"],U);const H=c(i,["routingConfig"]);H!=null&&f(t,["routingConfig"],H);const M=c(i,["seed"]);M!=null&&f(t,["seed"],M);const O=c(i,["speechConfig"]);O!=null&&f(t,["speechConfig"],_h(O));const j=c(i,["stopSequences"]);j!=null&&f(t,["stopSequences"],j);const ee=c(i,["temperature"]);ee!=null&&f(t,["temperature"],ee);const ie=c(i,["thinkingConfig"]);ie!=null&&f(t,["thinkingConfig"],ie);const ue=c(i,["topK"]);ue!=null&&f(t,["topK"],ue);const D=c(i,["topP"]);if(D!=null&&f(t,["topP"],D),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function ub(i){const t={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=c(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function cb(i){const t={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=c(i,["timeRangeFilter"]);return l!=null&&f(t,["timeRangeFilter"],l),t}function db(i,t){const l={},a=c(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=c(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(i,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const p=c(i,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const x=c(i,["topK"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","topK"],x);const y=c(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=c(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],Wu(S));const N=c(i,["thinkingConfig"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","thinkingConfig"],N);const C=c(i,["enableAffectiveDialog"]);t!==void 0&&C!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(i,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],lb(Et(_)));const U=c(i,["tools"]);if(t!==void 0&&U!=null){let ue=Rs(U);Array.isArray(ue)&&(ue=ue.map(D=>Nb(ws(D)))),f(t,["setup","tools"],ue)}const H=c(i,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],bb(H));const M=c(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const O=c(i,["outputAudioTranscription"]);t!==void 0&&O!=null&&f(t,["setup","outputAudioTranscription"],O);const j=c(i,["realtimeInputConfig"]);t!==void 0&&j!=null&&f(t,["setup","realtimeInputConfig"],j);const ee=c(i,["contextWindowCompression"]);t!==void 0&&ee!=null&&f(t,["setup","contextWindowCompression"],ee);const ie=c(i,["proactivity"]);return t!==void 0&&ie!=null&&f(t,["setup","proactivity"],ie),l}function fb(i,t){const l={},a=c(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],rb(a));const r=c(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(i,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const p=c(i,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const x=c(i,["topK"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","topK"],x);const y=c(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=c(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],_h(Wu(S)));const N=c(i,["thinkingConfig"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","thinkingConfig"],N);const C=c(i,["enableAffectiveDialog"]);t!==void 0&&C!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(i,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],Et(_));const U=c(i,["tools"]);if(t!==void 0&&U!=null){let ue=Rs(U);Array.isArray(ue)&&(ue=ue.map(D=>Tb(ws(D)))),f(t,["setup","tools"],ue)}const H=c(i,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],H);const M=c(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const O=c(i,["outputAudioTranscription"]);t!==void 0&&O!=null&&f(t,["setup","outputAudioTranscription"],O);const j=c(i,["realtimeInputConfig"]);t!==void 0&&j!=null&&f(t,["setup","realtimeInputConfig"],j);const ee=c(i,["contextWindowCompression"]);t!==void 0&&ee!=null&&f(t,["setup","contextWindowCompression"],ee);const ie=c(i,["proactivity"]);return t!==void 0&&ie!=null&&f(t,["setup","proactivity"],ie),l}function mb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["setup","model"],ze(i,a));const r=c(t,["config"]);return r!=null&&f(l,["config"],db(r,l)),l}function pb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["setup","model"],ze(i,a));const r=c(t,["config"]);return r!=null&&f(l,["config"],fb(r,l)),l}function gb(i){const t={},l=c(i,["musicGenerationConfig"]);return l!=null&&f(t,["musicGenerationConfig"],l),t}function hb(i){const t={},l=c(i,["weightedPrompts"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["weightedPrompts"],a)}return t}function xb(i){const t={},l=c(i,["media"]);if(l!=null){let h=ph(l);Array.isArray(h)&&(h=h.map(v=>Ja(v))),f(t,["mediaChunks"],h)}const a=c(i,["audio"]);a!=null&&f(t,["audio"],Ja(hh(a)));const r=c(i,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const d=c(i,["video"]);d!=null&&f(t,["video"],Ja(gh(d)));const p=c(i,["text"]);p!=null&&f(t,["text"],p);const x=c(i,["activityStart"]);x!=null&&f(t,["activityStart"],x);const y=c(i,["activityEnd"]);return y!=null&&f(t,["activityEnd"],y),t}function yb(i){const t={},l=c(i,["media"]);if(l!=null){let h=ph(l);Array.isArray(h)&&(h=h.map(v=>v)),f(t,["mediaChunks"],h)}const a=c(i,["audio"]);a!=null&&f(t,["audio"],hh(a));const r=c(i,["audioStreamEnd"]);r!=null&&f(t,["audioStreamEnd"],r);const d=c(i,["video"]);d!=null&&f(t,["video"],gh(d));const p=c(i,["text"]);p!=null&&f(t,["text"],p);const x=c(i,["activityStart"]);x!=null&&f(t,["activityStart"],x);const y=c(i,["activityEnd"]);return y!=null&&f(t,["activityEnd"],y),t}function vb(i){const t={},l=c(i,["setupComplete"]);l!=null&&f(t,["setupComplete"],l);const a=c(i,["serverContent"]);a!=null&&f(t,["serverContent"],a);const r=c(i,["toolCall"]);r!=null&&f(t,["toolCall"],r);const d=c(i,["toolCallCancellation"]);d!=null&&f(t,["toolCallCancellation"],d);const p=c(i,["usageMetadata"]);p!=null&&f(t,["usageMetadata"],Cb(p));const x=c(i,["goAway"]);x!=null&&f(t,["goAway"],x);const y=c(i,["sessionResumptionUpdate"]);return y!=null&&f(t,["sessionResumptionUpdate"],y),t}function Sb(i){const t={},l=c(i,["functionCall"]);l!=null&&f(t,["functionCall"],l);const a=c(i,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(i,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(i,["fileData"]);d!=null&&f(t,["fileData"],ab(d));const p=c(i,["functionResponse"]);p!=null&&f(t,["functionResponse"],p);const x=c(i,["inlineData"]);x!=null&&f(t,["inlineData"],Ja(x));const y=c(i,["text"]);y!=null&&f(t,["text"],y);const h=c(i,["thought"]);h!=null&&f(t,["thought"],h);const v=c(i,["thoughtSignature"]);v!=null&&f(t,["thoughtSignature"],v);const S=c(i,["videoMetadata"]);return S!=null&&f(t,["videoMetadata"],S),t}function bb(i){const t={},l=c(i,["handle"]);if(l!=null&&f(t,["handle"],l),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function _h(i){const t={},l=c(i,["languageCode"]);l!=null&&f(t,["languageCode"],l);const a=c(i,["voiceConfig"]);if(a!=null&&f(t,["voiceConfig"],a),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Nb(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(t,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(i,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(i,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(i,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const p=c(i,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=c(i,["googleMaps"]);x!=null&&f(t,["googleMaps"],ub(x));const y=c(i,["googleSearch"]);y!=null&&f(t,["googleSearch"],cb(y));const h=c(i,["urlContext"]);return h!=null&&f(t,["urlContext"],h),t}function Tb(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(N=>ob(N))),f(t,["functionDeclarations"],S)}const a=c(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(i,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(i,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const x=c(i,["enterpriseWebSearch"]);x!=null&&f(t,["enterpriseWebSearch"],x);const y=c(i,["googleMaps"]);y!=null&&f(t,["googleMaps"],y);const h=c(i,["googleSearch"]);h!=null&&f(t,["googleSearch"],h);const v=c(i,["urlContext"]);return v!=null&&f(t,["urlContext"],v),t}function Cb(i){const t={},l=c(i,["promptTokenCount"]);l!=null&&f(t,["promptTokenCount"],l);const a=c(i,["cachedContentTokenCount"]);a!=null&&f(t,["cachedContentTokenCount"],a);const r=c(i,["candidatesTokenCount"]);r!=null&&f(t,["responseTokenCount"],r);const d=c(i,["toolUsePromptTokenCount"]);d!=null&&f(t,["toolUsePromptTokenCount"],d);const p=c(i,["thoughtsTokenCount"]);p!=null&&f(t,["thoughtsTokenCount"],p);const x=c(i,["totalTokenCount"]);x!=null&&f(t,["totalTokenCount"],x);const y=c(i,["promptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(_=>_)),f(t,["promptTokensDetails"],C)}const h=c(i,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(_=>_)),f(t,["cacheTokensDetails"],C)}const v=c(i,["candidatesTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(_=>_)),f(t,["responseTokensDetails"],C)}const S=c(i,["toolUsePromptTokensDetails"]);if(S!=null){let C=S;Array.isArray(C)&&(C=C.map(_=>_)),f(t,["toolUsePromptTokensDetails"],C)}const N=c(i,["trafficType"]);return N!=null&&f(t,["trafficType"],N),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(i){const t={},l=c(i,["data"]);if(l!=null&&f(t,["data"],l),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function Ab(i){const t={},l=c(i,["content"]);l!=null&&f(t,["content"],l);const a=c(i,["citationMetadata"]);a!=null&&f(t,["citationMetadata"],_b(a));const r=c(i,["tokenCount"]);r!=null&&f(t,["tokenCount"],r);const d=c(i,["finishReason"]);d!=null&&f(t,["finishReason"],d);const p=c(i,["avgLogprobs"]);p!=null&&f(t,["avgLogprobs"],p);const x=c(i,["groundingMetadata"]);x!=null&&f(t,["groundingMetadata"],x);const y=c(i,["index"]);y!=null&&f(t,["index"],y);const h=c(i,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const v=c(i,["safetyRatings"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(C=>C)),f(t,["safetyRatings"],N)}const S=c(i,["urlContextMetadata"]);return S!=null&&f(t,["urlContextMetadata"],S),t}function _b(i){const t={},l=c(i,["citationSources"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>r)),f(t,["citations"],a)}return t}function wb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let d=ln(r);Array.isArray(d)&&(d=d.map(p=>p)),f(l,["contents"],d)}return l}function Rb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>d)),f(t,["tokensInfo"],r)}return t}function Mb(i){const t={},l=c(i,["values"]);l!=null&&f(t,["values"],l);const a=c(i,["statistics"]);return a!=null&&f(t,["statistics"],Db(a)),t}function Db(i){const t={},l=c(i,["truncated"]);l!=null&&f(t,["truncated"],l);const a=c(i,["token_count"]);return a!=null&&f(t,["tokenCount"],a),t}function no(i){const t={},l=c(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>HN(d))),f(t,["parts"],r)}const a=c(i,["role"]);return a!=null&&f(t,["role"],a),t}function Ib(i){const t={},l=c(i,["controlType"]);l!=null&&f(t,["controlType"],l);const a=c(i,["enableControlImageComputation"]);return a!=null&&f(t,["computeControl"],a),t}function kb(i){const t={};if(c(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ub(i,t){const l={},a=c(i,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Et(a));const r=c(i,["tools"]);if(t!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(x=>Ih(x))),f(t,["tools"],p)}const d=c(i,["generationConfig"]);return t!==void 0&&d!=null&&f(t,["generationConfig"],TN(d)),l}function qb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let p=ln(r);Array.isArray(p)&&(p=p.map(x=>no(x))),f(l,["contents"],p)}const d=c(t,["config"]);return d!=null&&kb(d),l}function Hb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let p=ln(r);Array.isArray(p)&&(p=p.map(x=>x)),f(l,["contents"],p)}const d=c(t,["config"]);return d!=null&&Ub(d,l),l}function Gb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["totalTokens"]);a!=null&&f(t,["totalTokens"],a);const r=c(i,["cachedContentTokenCount"]);return r!=null&&f(t,["cachedContentTokenCount"],r),t}function jb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["totalTokens"]);return a!=null&&f(t,["totalTokens"],a),t}function Lb(i,t){const l={},a=c(t,["model"]);return a!=null&&f(l,["_url","name"],ze(i,a)),l}function Ob(i,t){const l={},a=c(t,["model"]);return a!=null&&f(l,["_url","name"],ze(i,a)),l}function Vb(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function Bb(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}function Pb(i,t){const l={},a=c(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(i,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const d=c(i,["numberOfImages"]);t!==void 0&&d!=null&&f(t,["parameters","sampleCount"],d);const p=c(i,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const x=c(i,["guidanceScale"]);t!==void 0&&x!=null&&f(t,["parameters","guidanceScale"],x);const y=c(i,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const h=c(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const v=c(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);t!==void 0&&S!=null&&f(t,["parameters","includeSafetyAttributes"],S);const N=c(i,["includeRaiReason"]);t!==void 0&&N!=null&&f(t,["parameters","includeRaiReason"],N);const C=c(i,["language"]);t!==void 0&&C!=null&&f(t,["parameters","language"],C);const _=c(i,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const U=c(i,["outputCompressionQuality"]);t!==void 0&&U!=null&&f(t,["parameters","outputOptions","compressionQuality"],U);const H=c(i,["addWatermark"]);t!==void 0&&H!=null&&f(t,["parameters","addWatermark"],H);const M=c(i,["labels"]);t!==void 0&&M!=null&&f(t,["labels"],M);const O=c(i,["editMode"]);t!==void 0&&O!=null&&f(t,["parameters","editMode"],O);const j=c(i,["baseSteps"]);return t!==void 0&&j!=null&&f(t,["parameters","editConfig","baseSteps"],j),l}function zb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const d=c(t,["referenceImages"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(y=>BN(y))),f(l,["instances[0]","referenceImages"],x)}const p=c(t,["config"]);return p!=null&&Pb(p,l),l}function Fb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>io(d))),f(t,["generatedImages"],r)}return t}function Yb(i,t){const l={},a=c(i,["taskType"]);t!==void 0&&a!=null&&f(t,["requests[]","taskType"],a);const r=c(i,["title"]);t!==void 0&&r!=null&&f(t,["requests[]","title"],r);const d=c(i,["outputDimensionality"]);if(t!==void 0&&d!=null&&f(t,["requests[]","outputDimensionality"],d),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return l}function $b(i,t){const l={},a=c(i,["taskType"]);t!==void 0&&a!=null&&f(t,["instances[]","task_type"],a);const r=c(i,["title"]);t!==void 0&&r!=null&&f(t,["instances[]","title"],r);const d=c(i,["outputDimensionality"]);t!==void 0&&d!=null&&f(t,["parameters","outputDimensionality"],d);const p=c(i,["mimeType"]);t!==void 0&&p!=null&&f(t,["instances[]","mimeType"],p);const x=c(i,["autoTruncate"]);return t!==void 0&&x!=null&&f(t,["parameters","autoTruncate"],x),l}function Jb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let x=Xu(i,r);Array.isArray(x)&&(x=x.map(y=>y)),f(l,["requests[]","content"],x)}const d=c(t,["config"]);d!=null&&Yb(d,l);const p=c(t,["model"]);return p!==void 0&&f(l,["requests[]","model"],ze(i,p)),l}function Kb(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let p=Xu(i,r);Array.isArray(p)&&(p=p.map(x=>x)),f(l,["instances[]","content"],p)}const d=c(t,["config"]);return d!=null&&$b(d,l),l}function Xb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["embeddings"],d)}const r=c(i,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function Qb(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["predictions[]","embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>Mb(p))),f(t,["embeddings"],d)}const r=c(i,["metadata"]);return r!=null&&f(t,["metadata"],r),t}function Zb(i){const t={},l=c(i,["endpoint"]);l!=null&&f(t,["name"],l);const a=c(i,["deployedModelId"]);return a!=null&&f(t,["deployedModelId"],a),t}function Wb(i){const t={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=c(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function eN(i){const t={};if(c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const l=c(i,["description"]);l!=null&&f(t,["description"],l);const a=c(i,["name"]);a!=null&&f(t,["name"],a);const r=c(i,["parameters"]);r!=null&&f(t,["parameters"],r);const d=c(i,["parametersJsonSchema"]);d!=null&&f(t,["parametersJsonSchema"],d);const p=c(i,["response"]);p!=null&&f(t,["response"],p);const x=c(i,["responseJsonSchema"]);return x!=null&&f(t,["responseJsonSchema"],x),t}function tN(i,t,l){const a={},r=c(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],no(Et(r)));const d=c(t,["temperature"]);d!=null&&f(a,["temperature"],d);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const x=c(t,["topK"]);x!=null&&f(a,["topK"],x);const y=c(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=c(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=c(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const S=c(t,["responseLogprobs"]);S!=null&&f(a,["responseLogprobs"],S);const N=c(t,["logprobs"]);N!=null&&f(a,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&f(a,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&f(a,["frequencyPenalty"],_);const U=c(t,["seed"]);U!=null&&f(a,["seed"],U);const H=c(t,["responseMimeType"]);H!=null&&f(a,["responseMimeType"],H);const M=c(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],Qu(M));const O=c(t,["responseJsonSchema"]);if(O!=null&&f(a,["responseJsonSchema"],O),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=c(t,["safetySettings"]);if(l!==void 0&&j!=null){let Y=j;Array.isArray(Y)&&(Y=Y.map(ge=>PN(ge))),f(l,["safetySettings"],Y)}const ee=c(t,["tools"]);if(l!==void 0&&ee!=null){let Y=Rs(ee);Array.isArray(Y)&&(Y=Y.map(ge=>KN(ws(ge)))),f(l,["tools"],Y)}const ie=c(t,["toolConfig"]);if(l!==void 0&&ie!=null&&f(l,["toolConfig"],ie),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=c(t,["cachedContent"]);l!==void 0&&ue!=null&&f(l,["cachedContent"],jn(i,ue));const D=c(t,["responseModalities"]);D!=null&&f(a,["responseModalities"],D);const Q=c(t,["mediaResolution"]);Q!=null&&f(a,["mediaResolution"],Q);const $=c(t,["speechConfig"]);if($!=null&&f(a,["speechConfig"],Zu($)),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=c(t,["thinkingConfig"]);V!=null&&f(a,["thinkingConfig"],V);const oe=c(t,["imageConfig"]);return oe!=null&&f(a,["imageConfig"],oe),a}function nN(i,t,l){const a={},r=c(t,["systemInstruction"]);l!==void 0&&r!=null&&f(l,["systemInstruction"],Et(r));const d=c(t,["temperature"]);d!=null&&f(a,["temperature"],d);const p=c(t,["topP"]);p!=null&&f(a,["topP"],p);const x=c(t,["topK"]);x!=null&&f(a,["topK"],x);const y=c(t,["candidateCount"]);y!=null&&f(a,["candidateCount"],y);const h=c(t,["maxOutputTokens"]);h!=null&&f(a,["maxOutputTokens"],h);const v=c(t,["stopSequences"]);v!=null&&f(a,["stopSequences"],v);const S=c(t,["responseLogprobs"]);S!=null&&f(a,["responseLogprobs"],S);const N=c(t,["logprobs"]);N!=null&&f(a,["logprobs"],N);const C=c(t,["presencePenalty"]);C!=null&&f(a,["presencePenalty"],C);const _=c(t,["frequencyPenalty"]);_!=null&&f(a,["frequencyPenalty"],_);const U=c(t,["seed"]);U!=null&&f(a,["seed"],U);const H=c(t,["responseMimeType"]);H!=null&&f(a,["responseMimeType"],H);const M=c(t,["responseSchema"]);M!=null&&f(a,["responseSchema"],Qu(M));const O=c(t,["responseJsonSchema"]);O!=null&&f(a,["responseJsonSchema"],O);const j=c(t,["routingConfig"]);j!=null&&f(a,["routingConfig"],j);const ee=c(t,["modelSelectionConfig"]);ee!=null&&f(a,["modelConfig"],ee);const ie=c(t,["safetySettings"]);if(l!==void 0&&ie!=null){let k=ie;Array.isArray(k)&&(k=k.map(se=>se)),f(l,["safetySettings"],k)}const ue=c(t,["tools"]);if(l!==void 0&&ue!=null){let k=Rs(ue);Array.isArray(k)&&(k=k.map(se=>Ih(ws(se)))),f(l,["tools"],k)}const D=c(t,["toolConfig"]);l!==void 0&&D!=null&&f(l,["toolConfig"],D);const Q=c(t,["labels"]);l!==void 0&&Q!=null&&f(l,["labels"],Q);const $=c(t,["cachedContent"]);l!==void 0&&$!=null&&f(l,["cachedContent"],jn(i,$));const V=c(t,["responseModalities"]);V!=null&&f(a,["responseModalities"],V);const oe=c(t,["mediaResolution"]);oe!=null&&f(a,["mediaResolution"],oe);const Y=c(t,["speechConfig"]);Y!=null&&f(a,["speechConfig"],Dh(Zu(Y)));const ge=c(t,["audioTimestamp"]);ge!=null&&f(a,["audioTimestamp"],ge);const me=c(t,["thinkingConfig"]);me!=null&&f(a,["thinkingConfig"],me);const Se=c(t,["imageConfig"]);return Se!=null&&f(a,["imageConfig"],Se),a}function _g(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let p=ln(r);Array.isArray(p)&&(p=p.map(x=>no(x))),f(l,["contents"],p)}const d=c(t,["config"]);return d!=null&&f(l,["generationConfig"],tN(i,d,l)),l}function wg(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["contents"]);if(r!=null){let p=ln(r);Array.isArray(p)&&(p=p.map(x=>x)),f(l,["contents"],p)}const d=c(t,["config"]);return d!=null&&f(l,["generationConfig"],nN(i,d,l)),l}function Rg(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(h=>Ab(h))),f(t,["candidates"],y)}const r=c(i,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const d=c(i,["promptFeedback"]);d!=null&&f(t,["promptFeedback"],d);const p=c(i,["responseId"]);p!=null&&f(t,["responseId"],p);const x=c(i,["usageMetadata"]);return x!=null&&f(t,["usageMetadata"],x),t}function Mg(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["candidates"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(v=>v)),f(t,["candidates"],h)}const r=c(i,["createTime"]);r!=null&&f(t,["createTime"],r);const d=c(i,["modelVersion"]);d!=null&&f(t,["modelVersion"],d);const p=c(i,["promptFeedback"]);p!=null&&f(t,["promptFeedback"],p);const x=c(i,["responseId"]);x!=null&&f(t,["responseId"],x);const y=c(i,["usageMetadata"]);return y!=null&&f(t,["usageMetadata"],y),t}function iN(i,t){const l={};if(c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(i,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(i,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const d=c(i,["guidanceScale"]);if(t!==void 0&&d!=null&&f(t,["parameters","guidanceScale"],d),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&f(t,["parameters","safetySetting"],p);const x=c(i,["personGeneration"]);t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x);const y=c(i,["includeSafetyAttributes"]);t!==void 0&&y!=null&&f(t,["parameters","includeSafetyAttributes"],y);const h=c(i,["includeRaiReason"]);t!==void 0&&h!=null&&f(t,["parameters","includeRaiReason"],h);const v=c(i,["language"]);t!==void 0&&v!=null&&f(t,["parameters","language"],v);const S=c(i,["outputMimeType"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","mimeType"],S);const N=c(i,["outputCompressionQuality"]);if(t!==void 0&&N!=null&&f(t,["parameters","outputOptions","compressionQuality"],N),c(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(i,["imageSize"]);if(t!==void 0&&C!=null&&f(t,["parameters","sampleImageSize"],C),c(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return l}function sN(i,t){const l={},a=c(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(i,["negativePrompt"]);t!==void 0&&r!=null&&f(t,["parameters","negativePrompt"],r);const d=c(i,["numberOfImages"]);t!==void 0&&d!=null&&f(t,["parameters","sampleCount"],d);const p=c(i,["aspectRatio"]);t!==void 0&&p!=null&&f(t,["parameters","aspectRatio"],p);const x=c(i,["guidanceScale"]);t!==void 0&&x!=null&&f(t,["parameters","guidanceScale"],x);const y=c(i,["seed"]);t!==void 0&&y!=null&&f(t,["parameters","seed"],y);const h=c(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&f(t,["parameters","safetySetting"],h);const v=c(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const S=c(i,["includeSafetyAttributes"]);t!==void 0&&S!=null&&f(t,["parameters","includeSafetyAttributes"],S);const N=c(i,["includeRaiReason"]);t!==void 0&&N!=null&&f(t,["parameters","includeRaiReason"],N);const C=c(i,["language"]);t!==void 0&&C!=null&&f(t,["parameters","language"],C);const _=c(i,["outputMimeType"]);t!==void 0&&_!=null&&f(t,["parameters","outputOptions","mimeType"],_);const U=c(i,["outputCompressionQuality"]);t!==void 0&&U!=null&&f(t,["parameters","outputOptions","compressionQuality"],U);const H=c(i,["addWatermark"]);t!==void 0&&H!=null&&f(t,["parameters","addWatermark"],H);const M=c(i,["labels"]);t!==void 0&&M!=null&&f(t,["labels"],M);const O=c(i,["imageSize"]);t!==void 0&&O!=null&&f(t,["parameters","sampleImageSize"],O);const j=c(i,["enhancePrompt"]);return t!==void 0&&j!=null&&f(t,["parameters","enhancePrompt"],j),l}function lN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const d=c(t,["config"]);return d!=null&&iN(d,l),l}function aN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const d=c(t,["config"]);return d!=null&&sN(d,l),l}function oN(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>vN(p))),f(t,["generatedImages"],d)}const r=c(i,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],Rh(r)),t}function rN(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>io(p))),f(t,["generatedImages"],d)}const r=c(i,["positivePromptSafetyAttributes"]);return r!=null&&f(t,["positivePromptSafetyAttributes"],Mh(r)),t}function uN(i,t){const l={},a=c(i,["numberOfVideos"]);if(t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a),c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(i,["durationSeconds"]);if(t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(i,["aspectRatio"]);t!==void 0&&d!=null&&f(t,["parameters","aspectRatio"],d);const p=c(i,["resolution"]);t!==void 0&&p!=null&&f(t,["parameters","resolution"],p);const x=c(i,["personGeneration"]);if(t!==void 0&&x!=null&&f(t,["parameters","personGeneration"],x),c(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=c(i,["negativePrompt"]);t!==void 0&&y!=null&&f(t,["parameters","negativePrompt"],y);const h=c(i,["enhancePrompt"]);if(t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h),c(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=c(i,["lastFrame"]);t!==void 0&&v!=null&&f(t,["instances[0]","lastFrame"],so(v));const S=c(i,["referenceImages"]);if(t!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(C=>rT(C))),f(t,["instances[0]","referenceImages"],N)}if(c(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return l}function cN(i,t){const l={},a=c(i,["numberOfVideos"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(i,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);const d=c(i,["fps"]);t!==void 0&&d!=null&&f(t,["parameters","fps"],d);const p=c(i,["durationSeconds"]);t!==void 0&&p!=null&&f(t,["parameters","durationSeconds"],p);const x=c(i,["seed"]);t!==void 0&&x!=null&&f(t,["parameters","seed"],x);const y=c(i,["aspectRatio"]);t!==void 0&&y!=null&&f(t,["parameters","aspectRatio"],y);const h=c(i,["resolution"]);t!==void 0&&h!=null&&f(t,["parameters","resolution"],h);const v=c(i,["personGeneration"]);t!==void 0&&v!=null&&f(t,["parameters","personGeneration"],v);const S=c(i,["pubsubTopic"]);t!==void 0&&S!=null&&f(t,["parameters","pubsubTopic"],S);const N=c(i,["negativePrompt"]);t!==void 0&&N!=null&&f(t,["parameters","negativePrompt"],N);const C=c(i,["enhancePrompt"]);t!==void 0&&C!=null&&f(t,["parameters","enhancePrompt"],C);const _=c(i,["generateAudio"]);t!==void 0&&_!=null&&f(t,["parameters","generateAudio"],_);const U=c(i,["lastFrame"]);t!==void 0&&U!=null&&f(t,["instances[0]","lastFrame"],cn(U));const H=c(i,["referenceImages"]);if(t!==void 0&&H!=null){let j=H;Array.isArray(j)&&(j=j.map(ee=>uT(ee))),f(t,["instances[0]","referenceImages"],j)}const M=c(i,["mask"]);t!==void 0&&M!=null&&f(t,["instances[0]","mask"],oT(M));const O=c(i,["compressionQuality"]);return t!==void 0&&O!=null&&f(t,["parameters","compressionQuality"],O),l}function dN(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response","generateVideoResponse"]);return p!=null&&f(t,["response"],gN(p)),t}function fN(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response"]);return p!=null&&f(t,["response"],hN(p)),t}function mN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const d=c(t,["image"]);d!=null&&f(l,["instances[0]","image"],so(d));const p=c(t,["video"]);p!=null&&f(l,["instances[0]","video"],kh(p));const x=c(t,["source"]);x!=null&&xN(x,l);const y=c(t,["config"]);return y!=null&&uN(y,l),l}function pN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["prompt"]);r!=null&&f(l,["instances[0]","prompt"],r);const d=c(t,["image"]);d!=null&&f(l,["instances[0]","image"],cn(d));const p=c(t,["video"]);p!=null&&f(l,["instances[0]","video"],Uh(p));const x=c(t,["source"]);x!=null&&yN(x,l);const y=c(t,["config"]);return y!=null&&cN(y,l),l}function gN(i){const t={},l=c(i,["generatedSamples"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>bN(p))),f(t,["generatedVideos"],d)}const a=c(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function hN(i){const t={},l=c(i,["videos"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>NN(p))),f(t,["generatedVideos"],d)}const a=c(i,["raiMediaFilteredCount"]);a!=null&&f(t,["raiMediaFilteredCount"],a);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&f(t,["raiMediaFilteredReasons"],r),t}function xN(i,t){const l={},a=c(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],so(r));const d=c(i,["video"]);return t!==void 0&&d!=null&&f(t,["instances[0]","video"],kh(d)),l}function yN(i,t){const l={},a=c(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],cn(r));const d=c(i,["video"]);return t!==void 0&&d!=null&&f(t,["instances[0]","video"],Uh(d)),l}function vN(i){const t={},l=c(i,["_self"]);l!=null&&f(t,["image"],wN(l));const a=c(i,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=c(i,["_self"]);return r!=null&&f(t,["safetyAttributes"],Rh(r)),t}function io(i){const t={},l=c(i,["_self"]);l!=null&&f(t,["image"],wh(l));const a=c(i,["raiFilteredReason"]);a!=null&&f(t,["raiFilteredReason"],a);const r=c(i,["_self"]);r!=null&&f(t,["safetyAttributes"],Mh(r));const d=c(i,["prompt"]);return d!=null&&f(t,["enhancedPrompt"],d),t}function SN(i){const t={},l=c(i,["_self"]);l!=null&&f(t,["mask"],wh(l));const a=c(i,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>d)),f(t,["labels"],r)}return t}function bN(i){const t={},l=c(i,["video"]);return l!=null&&f(t,["video"],lT(l)),t}function NN(i){const t={},l=c(i,["_self"]);return l!=null&&f(t,["video"],aT(l)),t}function TN(i){const t={},l=c(i,["modelSelectionConfig"]);l!=null&&f(t,["modelConfig"],l);const a=c(i,["responseJsonSchema"]);a!=null&&f(t,["responseJsonSchema"],a);const r=c(i,["audioTimestamp"]);r!=null&&f(t,["audioTimestamp"],r);const d=c(i,["candidateCount"]);d!=null&&f(t,["candidateCount"],d);const p=c(i,["enableAffectiveDialog"]);p!=null&&f(t,["enableAffectiveDialog"],p);const x=c(i,["frequencyPenalty"]);x!=null&&f(t,["frequencyPenalty"],x);const y=c(i,["logprobs"]);y!=null&&f(t,["logprobs"],y);const h=c(i,["maxOutputTokens"]);h!=null&&f(t,["maxOutputTokens"],h);const v=c(i,["mediaResolution"]);v!=null&&f(t,["mediaResolution"],v);const S=c(i,["presencePenalty"]);S!=null&&f(t,["presencePenalty"],S);const N=c(i,["responseLogprobs"]);N!=null&&f(t,["responseLogprobs"],N);const C=c(i,["responseMimeType"]);C!=null&&f(t,["responseMimeType"],C);const _=c(i,["responseModalities"]);_!=null&&f(t,["responseModalities"],_);const U=c(i,["responseSchema"]);U!=null&&f(t,["responseSchema"],U);const H=c(i,["routingConfig"]);H!=null&&f(t,["routingConfig"],H);const M=c(i,["seed"]);M!=null&&f(t,["seed"],M);const O=c(i,["speechConfig"]);O!=null&&f(t,["speechConfig"],Dh(O));const j=c(i,["stopSequences"]);j!=null&&f(t,["stopSequences"],j);const ee=c(i,["temperature"]);ee!=null&&f(t,["temperature"],ee);const ie=c(i,["thinkingConfig"]);ie!=null&&f(t,["thinkingConfig"],ie);const ue=c(i,["topK"]);ue!=null&&f(t,["topK"],ue);const D=c(i,["topP"]);if(D!=null&&f(t,["topP"],D),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function CN(i,t){const l={},a=c(t,["model"]);return a!=null&&f(l,["_url","name"],ze(i,a)),l}function EN(i,t){const l={},a=c(t,["model"]);return a!=null&&f(l,["_url","name"],ze(i,a)),l}function AN(i){const t={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=c(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function _N(i){const t={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=c(i,["timeRangeFilter"]);return l!=null&&f(t,["timeRangeFilter"],l),t}function wN(i){const t={},l=c(i,["bytesBase64Encoded"]);l!=null&&f(t,["imageBytes"],pi(l));const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function wh(i){const t={},l=c(i,["gcsUri"]);l!=null&&f(t,["gcsUri"],l);const a=c(i,["bytesBase64Encoded"]);a!=null&&f(t,["imageBytes"],pi(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function so(i){const t={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const l=c(i,["imageBytes"]);l!=null&&f(t,["bytesBase64Encoded"],pi(l));const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function cn(i){const t={},l=c(i,["gcsUri"]);l!=null&&f(t,["gcsUri"],l);const a=c(i,["imageBytes"]);a!=null&&f(t,["bytesBase64Encoded"],pi(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function RN(i,t,l){const a={},r=c(t,["pageSize"]);l!==void 0&&r!=null&&f(l,["_query","pageSize"],r);const d=c(t,["pageToken"]);l!==void 0&&d!=null&&f(l,["_query","pageToken"],d);const p=c(t,["filter"]);l!==void 0&&p!=null&&f(l,["_query","filter"],p);const x=c(t,["queryBase"]);return l!==void 0&&x!=null&&f(l,["_url","models_url"],Sh(i,x)),a}function MN(i,t,l){const a={},r=c(t,["pageSize"]);l!==void 0&&r!=null&&f(l,["_query","pageSize"],r);const d=c(t,["pageToken"]);l!==void 0&&d!=null&&f(l,["_query","pageToken"],d);const p=c(t,["filter"]);l!==void 0&&p!=null&&f(l,["_query","filter"],p);const x=c(t,["queryBase"]);return l!==void 0&&x!=null&&f(l,["_url","models_url"],Sh(i,x)),a}function DN(i,t){const l={},a=c(t,["config"]);return a!=null&&RN(i,a,l),l}function IN(i,t){const l={},a=c(t,["config"]);return a!=null&&MN(i,a,l),l}function kN(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["_self"]);if(r!=null){let d=bh(r);Array.isArray(d)&&(d=d.map(p=>Lu(p))),f(t,["models"],d)}return t}function UN(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["_self"]);if(r!=null){let d=bh(r);Array.isArray(d)&&(d=d.map(p=>Ou(p))),f(t,["models"],d)}return t}function qN(i){const t={},l=c(i,["maskMode"]);l!=null&&f(t,["maskMode"],l);const a=c(i,["segmentationClasses"]);a!=null&&f(t,["maskClasses"],a);const r=c(i,["maskDilation"]);return r!=null&&f(t,["dilation"],r),t}function Lu(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(i,["description"]);r!=null&&f(t,["description"],r);const d=c(i,["version"]);d!=null&&f(t,["version"],d);const p=c(i,["_self"]);p!=null&&f(t,["tunedModelInfo"],XN(p));const x=c(i,["inputTokenLimit"]);x!=null&&f(t,["inputTokenLimit"],x);const y=c(i,["outputTokenLimit"]);y!=null&&f(t,["outputTokenLimit"],y);const h=c(i,["supportedGenerationMethods"]);h!=null&&f(t,["supportedActions"],h);const v=c(i,["temperature"]);v!=null&&f(t,["temperature"],v);const S=c(i,["maxTemperature"]);S!=null&&f(t,["maxTemperature"],S);const N=c(i,["topP"]);N!=null&&f(t,["topP"],N);const C=c(i,["topK"]);C!=null&&f(t,["topK"],C);const _=c(i,["thinking"]);return _!=null&&f(t,["thinking"],_),t}function Ou(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["displayName"]);a!=null&&f(t,["displayName"],a);const r=c(i,["description"]);r!=null&&f(t,["description"],r);const d=c(i,["versionId"]);d!=null&&f(t,["version"],d);const p=c(i,["deployedModels"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(N=>Zb(N))),f(t,["endpoints"],S)}const x=c(i,["labels"]);x!=null&&f(t,["labels"],x);const y=c(i,["_self"]);y!=null&&f(t,["tunedModelInfo"],QN(y));const h=c(i,["defaultCheckpointId"]);h!=null&&f(t,["defaultCheckpointId"],h);const v=c(i,["checkpoints"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(N=>N)),f(t,["checkpoints"],S)}return t}function HN(i){const t={},l=c(i,["functionCall"]);l!=null&&f(t,["functionCall"],l);const a=c(i,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(i,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(i,["fileData"]);d!=null&&f(t,["fileData"],Wb(d));const p=c(i,["functionResponse"]);p!=null&&f(t,["functionResponse"],p);const x=c(i,["inlineData"]);x!=null&&f(t,["inlineData"],Eb(x));const y=c(i,["text"]);y!=null&&f(t,["text"],y);const h=c(i,["thought"]);h!=null&&f(t,["thought"],h);const v=c(i,["thoughtSignature"]);v!=null&&f(t,["thoughtSignature"],v);const S=c(i,["videoMetadata"]);return S!=null&&f(t,["videoMetadata"],S),t}function GN(i){const t={},l=c(i,["productImage"]);return l!=null&&f(t,["image"],cn(l)),t}function jN(i,t){const l={},a=c(i,["numberOfImages"]);t!==void 0&&a!=null&&f(t,["parameters","sampleCount"],a);const r=c(i,["baseSteps"]);t!==void 0&&r!=null&&f(t,["parameters","baseSteps"],r);const d=c(i,["outputGcsUri"]);t!==void 0&&d!=null&&f(t,["parameters","storageUri"],d);const p=c(i,["seed"]);t!==void 0&&p!=null&&f(t,["parameters","seed"],p);const x=c(i,["safetyFilterLevel"]);t!==void 0&&x!=null&&f(t,["parameters","safetySetting"],x);const y=c(i,["personGeneration"]);t!==void 0&&y!=null&&f(t,["parameters","personGeneration"],y);const h=c(i,["addWatermark"]);t!==void 0&&h!=null&&f(t,["parameters","addWatermark"],h);const v=c(i,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const S=c(i,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);const N=c(i,["enhancePrompt"]);t!==void 0&&N!=null&&f(t,["parameters","enhancePrompt"],N);const C=c(i,["labels"]);return t!==void 0&&C!=null&&f(t,["labels"],C),l}function LN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["source"]);r!=null&&VN(r,l);const d=c(t,["config"]);return d!=null&&jN(d,l),l}function ON(i){const t={},l=c(i,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>io(r))),f(t,["generatedImages"],a)}return t}function VN(i,t){const l={},a=c(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(i,["personImage"]);t!==void 0&&r!=null&&f(t,["instances[0]","personImage","image"],cn(r));const d=c(i,["productImages"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(x=>GN(x))),f(t,["instances[0]","productImages"],p)}return l}function BN(i){const t={},l=c(i,["referenceImage"]);l!=null&&f(t,["referenceImage"],cn(l));const a=c(i,["referenceId"]);a!=null&&f(t,["referenceId"],a);const r=c(i,["referenceType"]);r!=null&&f(t,["referenceType"],r);const d=c(i,["maskImageConfig"]);d!=null&&f(t,["maskImageConfig"],qN(d));const p=c(i,["controlImageConfig"]);p!=null&&f(t,["controlImageConfig"],Ib(p));const x=c(i,["styleImageConfig"]);x!=null&&f(t,["styleImageConfig"],x);const y=c(i,["subjectImageConfig"]);return y!=null&&f(t,["subjectImageConfig"],y),t}function Rh(i){const t={},l=c(i,["safetyAttributes","categories"]);l!=null&&f(t,["categories"],l);const a=c(i,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=c(i,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function Mh(i){const t={},l=c(i,["safetyAttributes","categories"]);l!=null&&f(t,["categories"],l);const a=c(i,["safetyAttributes","scores"]);a!=null&&f(t,["scores"],a);const r=c(i,["contentType"]);return r!=null&&f(t,["contentType"],r),t}function PN(i){const t={},l=c(i,["category"]);if(l!=null&&f(t,["category"],l),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(i,["threshold"]);return a!=null&&f(t,["threshold"],a),t}function zN(i){const t={},l=c(i,["image"]);return l!=null&&f(t,["image"],cn(l)),t}function FN(i,t){const l={},a=c(i,["mode"]);t!==void 0&&a!=null&&f(t,["parameters","mode"],a);const r=c(i,["maxPredictions"]);t!==void 0&&r!=null&&f(t,["parameters","maxPredictions"],r);const d=c(i,["confidenceThreshold"]);t!==void 0&&d!=null&&f(t,["parameters","confidenceThreshold"],d);const p=c(i,["maskDilation"]);t!==void 0&&p!=null&&f(t,["parameters","maskDilation"],p);const x=c(i,["binaryColorThreshold"]);t!==void 0&&x!=null&&f(t,["parameters","binaryColorThreshold"],x);const y=c(i,["labels"]);return t!==void 0&&y!=null&&f(t,["labels"],y),l}function YN(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["source"]);r!=null&&JN(r,l);const d=c(t,["config"]);return d!=null&&FN(d,l),l}function $N(i){const t={},l=c(i,["predictions"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(r=>SN(r))),f(t,["generatedMasks"],a)}return t}function JN(i,t){const l={},a=c(i,["prompt"]);t!==void 0&&a!=null&&f(t,["instances[0]","prompt"],a);const r=c(i,["image"]);t!==void 0&&r!=null&&f(t,["instances[0]","image"],cn(r));const d=c(i,["scribbleImage"]);return t!==void 0&&d!=null&&f(t,["instances[0]","scribble"],zN(d)),l}function Dh(i){const t={},l=c(i,["languageCode"]);l!=null&&f(t,["languageCode"],l);const a=c(i,["voiceConfig"]);if(a!=null&&f(t,["voiceConfig"],a),c(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function KN(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(t,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(i,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(i,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(i,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const p=c(i,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=c(i,["googleMaps"]);x!=null&&f(t,["googleMaps"],AN(x));const y=c(i,["googleSearch"]);y!=null&&f(t,["googleSearch"],_N(y));const h=c(i,["urlContext"]);return h!=null&&f(t,["urlContext"],h),t}function Ih(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let S=l;Array.isArray(S)&&(S=S.map(N=>eN(N))),f(t,["functionDeclarations"],S)}const a=c(i,["retrieval"]);a!=null&&f(t,["retrieval"],a);const r=c(i,["googleSearchRetrieval"]);r!=null&&f(t,["googleSearchRetrieval"],r);const d=c(i,["computerUse"]);if(d!=null&&f(t,["computerUse"],d),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const p=c(i,["codeExecution"]);p!=null&&f(t,["codeExecution"],p);const x=c(i,["enterpriseWebSearch"]);x!=null&&f(t,["enterpriseWebSearch"],x);const y=c(i,["googleMaps"]);y!=null&&f(t,["googleMaps"],y);const h=c(i,["googleSearch"]);h!=null&&f(t,["googleSearch"],h);const v=c(i,["urlContext"]);return v!=null&&f(t,["urlContext"],v),t}function XN(i){const t={},l=c(i,["baseModel"]);l!=null&&f(t,["baseModel"],l);const a=c(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=c(i,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function QN(i){const t={},l=c(i,["labels","google-vertex-llm-tuning-base-model-id"]);l!=null&&f(t,["baseModel"],l);const a=c(i,["createTime"]);a!=null&&f(t,["createTime"],a);const r=c(i,["updateTime"]);return r!=null&&f(t,["updateTime"],r),t}function ZN(i,t){const l={},a=c(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(i,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const d=c(i,["defaultCheckpointId"]);return t!==void 0&&d!=null&&f(t,["defaultCheckpointId"],d),l}function WN(i,t){const l={},a=c(i,["displayName"]);t!==void 0&&a!=null&&f(t,["displayName"],a);const r=c(i,["description"]);t!==void 0&&r!=null&&f(t,["description"],r);const d=c(i,["defaultCheckpointId"]);return t!==void 0&&d!=null&&f(t,["defaultCheckpointId"],d),l}function eT(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","name"],ze(i,a));const r=c(t,["config"]);return r!=null&&ZN(r,l),l}function tT(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["config"]);return r!=null&&WN(r,l),l}function nT(i,t){const l={},a=c(i,["outputGcsUri"]);t!==void 0&&a!=null&&f(t,["parameters","storageUri"],a);const r=c(i,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const d=c(i,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);const p=c(i,["includeRaiReason"]);t!==void 0&&p!=null&&f(t,["parameters","includeRaiReason"],p);const x=c(i,["outputMimeType"]);t!==void 0&&x!=null&&f(t,["parameters","outputOptions","mimeType"],x);const y=c(i,["outputCompressionQuality"]);t!==void 0&&y!=null&&f(t,["parameters","outputOptions","compressionQuality"],y);const h=c(i,["enhanceInputImage"]);t!==void 0&&h!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],h);const v=c(i,["imagePreservationFactor"]);t!==void 0&&v!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],v);const S=c(i,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const N=c(i,["numberOfImages"]);t!==void 0&&N!=null&&f(t,["parameters","sampleCount"],N);const C=c(i,["mode"]);return t!==void 0&&C!=null&&f(t,["parameters","mode"],C),l}function iT(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["_url","model"],ze(i,a));const r=c(t,["image"]);r!=null&&f(l,["instances[0]","image"],cn(r));const d=c(t,["upscaleFactor"]);d!=null&&f(l,["parameters","upscaleConfig","upscaleFactor"],d);const p=c(t,["config"]);return p!=null&&nT(p,l),l}function sT(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>io(d))),f(t,["generatedImages"],r)}return t}function lT(i){const t={},l=c(i,["uri"]);l!=null&&f(t,["uri"],l);const a=c(i,["encodedVideo"]);a!=null&&f(t,["videoBytes"],pi(a));const r=c(i,["encoding"]);return r!=null&&f(t,["mimeType"],r),t}function aT(i){const t={},l=c(i,["gcsUri"]);l!=null&&f(t,["uri"],l);const a=c(i,["bytesBase64Encoded"]);a!=null&&f(t,["videoBytes"],pi(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}function oT(i){const t={},l=c(i,["image"]);l!=null&&f(t,["_self"],cn(l));const a=c(i,["maskMode"]);return a!=null&&f(t,["maskMode"],a),t}function rT(i){const t={},l=c(i,["image"]);l!=null&&f(t,["image"],so(l));const a=c(i,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function uT(i){const t={},l=c(i,["image"]);l!=null&&f(t,["image"],cn(l));const a=c(i,["referenceType"]);return a!=null&&f(t,["referenceType"],a),t}function kh(i){const t={},l=c(i,["uri"]);l!=null&&f(t,["uri"],l);const a=c(i,["videoBytes"]);a!=null&&f(t,["encodedVideo"],pi(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["encoding"],r),t}function Uh(i){const t={},l=c(i,["uri"]);l!=null&&f(t,["gcsUri"],l);const a=c(i,["videoBytes"]);a!=null&&f(t,["bytesBase64Encoded"],pi(a));const r=c(i,["mimeType"]);return r!=null&&f(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cT="Content-Type",dT="X-Server-Timeout",fT="User-Agent",Vu="x-goog-api-client",mT="1.29.1",pT=`google-genai-sdk/${mT}`,gT="v1beta1",hT="v1beta",Dg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class xT{constructor(t){var l,a;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:gT,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:hT,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&a.push(t.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),l=new URL(t);return l.protocol=l.protocol=="http:"?"ws":"wss",l.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,l,a){const r=[this.getRequestUrlInternal(l)];return a&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,a);if(t.queryParams)for(const[p,x]of Object.entries(t.queryParams))r.searchParams.append(p,String(x));let d={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=t.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,l,r.toString(),t.abortSignal),this.unaryApiCall(r,d,t.httpMethod)}patchHttpOptions(t,l){const a=JSON.parse(JSON.stringify(t));for(const[r,d]of Object.entries(l))typeof d=="object"?a[r]=Object.assign(Object.assign({},a[r]),d):d!==void 0&&(a[r]=d);return a}async requestStream(t){let l=this.clientOptions.httpOptions;t.httpOptions&&(l=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const a=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,l,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let d={};return d.body=t.body,d=await this.includeExtraHttpOptionsToRequestInit(d,l,r.toString(),t.abortSignal),this.streamApiCall(r,d,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,l,a,r){if(l&&l.timeout||r){const d=new AbortController,p=d.signal;if(l.timeout&&(l==null?void 0:l.timeout)>0){const x=setTimeout(()=>d.abort(),l.timeout);x&&typeof x.unref=="function"&&x.unref()}r&&r.addEventListener("abort",()=>{d.abort()}),t.signal=p}return l&&l.extraBody!==null&&yT(t,l.extraBody),t.headers=await this.getHeadersInternal(l,a),t}async unaryApiCall(t,l,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:a})).then(async r=>(await Ig(r),new Hu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,l,a){return this.apiCall(t.toString(),Object.assign(Object.assign({},l),{method:a})).then(async r=>(await Ig(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){var l;return Es(this,arguments,function*(){const r=(l=t==null?void 0:t.body)===null||l===void 0?void 0:l.getReader(),d=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let p="";for(;;){const{done:x,value:y}=yield tt(r.read());if(x){if(p.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=d.decode(y,{stream:!0});try{const S=JSON.parse(h);if("error"in S){const N=JSON.parse(JSON.stringify(S.error)),C=N.status,_=N.code,U=`got status: ${C}. ${JSON.stringify(S)}`;if(_>=400&&_<600)throw new to({message:U,status:_})}}catch(S){if(S.name==="ApiError")throw S}p+=h;let v=p.match(Dg);for(;v;){const S=v[1];try{const N=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield tt(new Hu(N)),p=p.slice(v[0].length),v=p.match(Dg)}catch(N){throw new Error(`exception parsing stream chunk ${S}. ${N}`)}}}}finally{r.releaseLock()}})}async apiCall(t,l){return fetch(t,l).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const t={},l=pT+" "+this.clientOptions.userAgentExtra;return t[fT]=l,t[Vu]=l,t[cT]="application/json",t}async getHeadersInternal(t,l){const a=new Headers;if(t&&t.headers){for(const[r,d]of Object.entries(t.headers))a.append(r,d);t.timeout&&t.timeout>0&&a.append(dT,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,l),a}getFileName(t){var l;let a="";return typeof t=="string"&&(a=t.replace(/[/\\]+$/,""),a=(l=a.split(/[/\\]/).pop())!==null&&l!==void 0?l:""),a}async uploadFile(t,l){var a;const r={};l!=null&&(r.mimeType=l.mimeType,r.name=l.name,r.displayName=l.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const d=this.clientOptions.uploader,p=await d.stat(t);r.sizeBytes=String(p.size);const x=(a=l==null?void 0:l.mimeType)!==null&&a!==void 0?a:p.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=x;const y={file:r},h=this.getFileName(t),v=he("upload/v1beta/files",y._url),S=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,h,y,l==null?void 0:l.httpOptions);return d.upload(t,S,this)}async uploadFileToFileSearchStore(t,l,a){var r;const d=this.clientOptions.uploader,p=await d.stat(l),x=String(p.size),y=(r=a==null?void 0:a.mimeType)!==null&&r!==void 0?r:p.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${t}:uploadToFileSearchStore`,v=this.getFileName(l),S={};a!=null&&a.customMetadata&&(S.customMetadata=a.customMetadata),a!=null&&a.chunkingConfig&&(S.chunkingConfig=a.chunkingConfig);const N=await this.fetchUploadUrl(h,x,y,v,S,a==null?void 0:a.httpOptions);return d.uploadToFileSearchStore(l,N,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,l,a,r,d,p){var x;let y={};p?y=p:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${l}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:t,body:JSON.stringify(d),httpMethod:"POST",httpOptions:y});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(x=h==null?void 0:h.headers)===null||x===void 0?void 0:x["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Ig(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const l=i.status;let a;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await i.json():a={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(a);throw l>=400&&l<600?new to({message:r,status:l}):new Error(r)}}function yT(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let l={};if(typeof i.body=="string"&&i.body.length>0)try{const d=JSON.parse(i.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))l=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(d,p){const x=Object.assign({},d);for(const y in p)if(Object.prototype.hasOwnProperty.call(p,y)){const h=p[y],v=x[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?x[y]=a(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),x[y]=h)}return x}const r=a(l,t);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vT="mcp_used/unknown";let ST=!1;function qh(i){for(const t of i)if(bT(t)||typeof t=="object"&&"inputSchema"in t)return!0;return ST}function Hh(i){var t;const l=(t=i[Vu])!==null&&t!==void 0?t:"";i[Vu]=(l+` ${vT}`).trimStart()}function bT(i){return i!==null&&typeof i=="object"&&i instanceof ec}function NT(i,t=100){return Es(this,arguments,function*(){let a,r=0;for(;r<t;){const d=yield tt(i.listTools({cursor:a}));for(const p of d.tools)yield yield tt(p),r++;if(!d.nextCursor)break;a=d.nextCursor}})}class ec{constructor(t=[],l){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=l}static create(t,l){return new ec(t,l)}async initialize(){var t,l,a,r;if(this.mcpTools.length>0)return;const d={},p=[];for(const v of this.mcpClients)try{for(var x=!0,y=(l=void 0,_l(NT(v))),h;h=await y.next(),t=h.done,!t;x=!0){r=h.value,x=!1;const S=r;p.push(S);const N=S.name;if(d[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);d[N]=v}}catch(S){l={error:S}}finally{try{!x&&!t&&(a=y.return)&&await a.call(y)}finally{if(l)throw l.error}}this.mcpTools=p,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),_v(this.mcpTools,this.config)}async callTool(t){await this.initialize();const l=[];for(const a of t)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const p=await r.callTool({name:a.name,arguments:a.args},void 0,d);l.push({functionResponse:{name:a.name,response:p.isError?{error:p}:p}})}return l}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TT(i,t,l){const a=new vv;let r;l.data instanceof Blob?r=JSON.parse(await l.data.text()):r=JSON.parse(l.data),Object.assign(a,r),t(a)}class CT{constructor(t,l,a){this.apiClient=t,this.auth=l,this.webSocketFactory=a}async connect(t){var l,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),p=_T(this.apiClient.getDefaultHeaders()),x=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${x}`;let h=()=>{};const v=new Promise(j=>{h=j}),S=t.callbacks,N=function(){h({})},C=this.apiClient,_={onopen:N,onmessage:j=>{TT(C,S.onmessage,j)},onerror:(l=S==null?void 0:S.onerror)!==null&&l!==void 0?l:function(j){},onclose:(a=S==null?void 0:S.onclose)!==null&&a!==void 0?a:function(j){}},U=this.webSocketFactory.create(y,AT(p),_);U.connect(),await v;const O={setup:{model:ze(this.apiClient,t.model)}};return U.send(JSON.stringify(O)),new ET(U,this.apiClient)}}class ET{constructor(t,l){this.conn=t,this.apiClient=l}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const l=hb(t);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const l=gb(t);this.conn.send(JSON.stringify(l))}sendPlaybackControl(t){const l={playbackControl:t};this.conn.send(JSON.stringify(l))}play(){this.sendPlaybackControl(Ts.PLAY)}pause(){this.sendPlaybackControl(Ts.PAUSE)}stop(){this.sendPlaybackControl(Ts.STOP)}resetContext(){this.sendPlaybackControl(Ts.RESET_CONTEXT)}close(){this.conn.close()}}function AT(i){const t={};return i.forEach((l,a)=>{t[a]=l}),t}function _T(i){const t=new Headers;for(const[l,a]of Object.entries(i))t.append(l,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RT(i,t,l){const a=new yv;let r;l.data instanceof Blob?r=await l.data.text():l.data instanceof ArrayBuffer?r=new TextDecoder().decode(l.data):r=l.data;const d=JSON.parse(r);if(i.isVertexAI()){const p=vb(d);Object.assign(a,p)}else Object.assign(a,d);t(a)}class MT{constructor(t,l,a){this.apiClient=t,this.auth=l,this.webSocketFactory=a,this.music=new CT(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var l,a,r,d,p,x;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const S=this.apiClient.getHeaders();t.config&&t.config.tools&&qh(t.config.tools)&&Hh(S);const N=UT(S);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N,v);else{const $=this.apiClient.getApiKey();let V="BidiGenerateContent",oe="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",oe="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${oe}=${$}`}let C=()=>{};const _=new Promise($=>{C=$}),U=t.callbacks,H=function(){var $;($=U==null?void 0:U.onopen)===null||$===void 0||$.call(U),C({})},M=this.apiClient,O={onopen:H,onmessage:$=>{RT(M,U.onmessage,$)},onerror:(l=U==null?void 0:U.onerror)!==null&&l!==void 0?l:function($){},onclose:(a=U==null?void 0:U.onclose)!==null&&a!==void 0?a:function($){}},j=this.webSocketFactory.create(v,kT(N),O);j.connect(),await _;let ee=ze(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const $=this.apiClient.getProject(),V=this.apiClient.getLocation();ee=`projects/${$}/locations/${V}/`+ee}let ie={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ka.AUDIO]}:t.config.responseModalities=[Ka.AUDIO]),!((d=t.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(x=(p=t.config)===null||p===void 0?void 0:p.tools)!==null&&x!==void 0?x:[],D=[];for(const $ of ue)if(this.isCallableTool($)){const V=$;D.push(await V.tool())}else D.push($);D.length>0&&(t.config.tools=D);const Q={model:ee,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ie=pb(this.apiClient,Q):ie=mb(this.apiClient,Q),delete ie.config,j.send(JSON.stringify(ie)),new IT(j,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const DT={turnComplete:!0};class IT{constructor(t,l){this.conn=t,this.apiClient=l}tLiveClientContent(t,l){if(l.turns!==null&&l.turns!==void 0){let a=[];try{a=ln(l.turns),t.isVertexAI()||(a=a.map(r=>no(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof l.turns}'`)}return{clientContent:{turns:a,turnComplete:l.turnComplete}}}return{clientContent:{turnComplete:l.turnComplete}}}tLiveClienttToolResponse(t,l){let a=[];if(l.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(l.functionResponses)?a=l.functionResponses:a=[l.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const d of a){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!t.isVertexAI()&&!("id"in d))throw new Error(wT)}return{toolResponse:{functionResponses:a}}}sendClientContent(t){t=Object.assign(Object.assign({},DT),t);const l=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(l))}sendRealtimeInput(t){let l={};this.apiClient.isVertexAI()?l={realtimeInput:yb(t)}:l={realtimeInput:xb(t)},this.conn.send(JSON.stringify(l))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const l=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(l))}close(){this.conn.close()}}function kT(i){const t={};return i.forEach((l,a)=>{t[a]=l}),t}function UT(i){const t=new Headers;for(const[l,a]of Object.entries(i))t.append(l,a);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kg=10;function Ug(i){var t,l,a;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const p of(l=i==null?void 0:i.tools)!==null&&l!==void 0?l:[])if(As(p)){r=!0;break}if(!r)return!0;const d=(a=i==null?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function As(i){return"callTool"in i&&typeof i.callTool=="function"}function qT(i){var t,l,a;return(a=(l=(t=i.config)===null||t===void 0?void 0:t.tools)===null||l===void 0?void 0:l.some(r=>As(r)))!==null&&a!==void 0?a:!1}function qg(i){var t;const l=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((a,r)=>{if(As(a))return;const d=a;d.functionDeclarations&&d.functionDeclarations.length>0&&l.push(r)}),l}function Hg(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HT extends Gn{constructor(t){super(),this.apiClient=t,this.generateContent=async l=>{var a,r,d,p,x;const y=await this.processParamsMaybeAddMcpUsage(l);if(this.maybeMoveToResponseJsonSchem(l),!qT(l)||Ug(l.config))return await this.generateContentInternal(y);const h=qg(l);if(h.length>0){const U=h.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let v,S;const N=ln(y.contents),C=(d=(r=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&d!==void 0?d:kg;let _=0;for(;_<C&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const U=v.candidates[0].content,H=[];for(const M of(x=(p=l.config)===null||p===void 0?void 0:p.tools)!==null&&x!==void 0?x:[])if(As(M)){const j=await M.callTool(v.functionCalls);H.push(...j)}_++,S={role:"user",parts:H},y.contents=ln(y.contents),y.contents.push(U),y.contents.push(S),Hg(y.config)&&(N.push(U),N.push(S))}return Hg(y.config)&&(v.automaticFunctionCallingHistory=N),v},this.generateContentStream=async l=>{if(this.maybeMoveToResponseJsonSchem(l),Ug(l.config)){const r=await this.processParamsMaybeAddMcpUsage(l);return await this.generateContentStreamInternal(r)}const a=qg(l);if(a.length>0){const r=a.map(d=>`tools[${d}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(l)},this.generateImages=async l=>await this.generateImagesInternal(l).then(a=>{var r;let d;const p=[];if(a!=null&&a.generatedImages)for(const y of a.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?d=y==null?void 0:y.safetyAttributes:p.push(y);let x;return d?x={generatedImages:p,positivePromptSafetyAttributes:d,sdkHttpResponse:a.sdkHttpResponse}:x={generatedImages:p,sdkHttpResponse:a.sdkHttpResponse},x}),this.list=async l=>{var a;const p={config:Object.assign(Object.assign({},{queryBase:!0}),l==null?void 0:l.config)};if(this.apiClient.isVertexAI()&&!p.config.queryBase){if(!((a=p.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");p.config.filter="labels.tune-type:*"}return new qi(Hn.PAGED_ITEM_MODELS,x=>this.listInternal(x),await this.listInternal(p),p)},this.editImage=async l=>{const a={model:l.model,prompt:l.prompt,referenceImages:[],config:l.config};return l.referenceImages&&l.referenceImages&&(a.referenceImages=l.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async l=>{let a={numberOfImages:1,mode:"upscale"};l.config&&(a=Object.assign(Object.assign({},a),l.config));const r={model:l.model,image:l.image,upscaleFactor:l.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async l=>{var a,r,d,p,x,y;if((l.prompt||l.image||l.video)&&l.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=l.video)===null||a===void 0)&&a.uri&&(!((r=l.video)===null||r===void 0)&&r.videoBytes)?l.video={uri:l.video.uri,mimeType:l.video.mimeType}:!((p=(d=l.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.uri&&(!((y=(x=l.source)===null||x===void 0?void 0:x.video)===null||y===void 0)&&y.videoBytes)&&(l.source.video={uri:l.source.video.uri,mimeType:l.source.video.mimeType})),await this.generateVideosInternal(l)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var l,a,r;const d=(l=t.config)===null||l===void 0?void 0:l.tools;if(!d)return t;const p=await Promise.all(d.map(async y=>As(y)?await y.tool():y)),x={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:p})};if(x.config.tools=p,t.config&&t.config.tools&&qh(t.config.tools)){const y=(r=(a=t.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Hh(h),x.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:h})}return x}async initAfcToolsMap(t){var l,a,r;const d=new Map;for(const p of(a=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&a!==void 0?a:[])if(As(p)){const x=p,y=await x.tool();for(const h of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(d.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);d.set(h.name,x)}}return d}async processAfcStream(t){var l,a,r;const d=(r=(a=(l=t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:kg;let p=!1,x=0;const y=await this.initAfcToolsMap(t);return(function(h,v,S){var N,C;return Es(this,arguments,function*(){for(var _,U,H,M;x<d;){p&&(x++,p=!1);const ie=yield tt(h.processParamsMaybeAddMcpUsage(S)),ue=yield tt(h.generateContentStreamInternal(ie)),D=[],Q=[];try{for(var O=!0,j=(U=void 0,_l(ue)),ee;ee=yield tt(j.next()),_=ee.done,!_;O=!0){M=ee.value,O=!1;const $=M;if(yield yield tt($),$.candidates&&(!((N=$.candidates[0])===null||N===void 0)&&N.content)){Q.push($.candidates[0].content);for(const V of(C=$.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(x<d&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const oe=yield tt(v.get(V.functionCall.name).callTool([V.functionCall]));D.push(...oe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch($){U={error:$}}finally{try{!O&&!_&&(H=j.return)&&(yield tt(H.call(j)))}finally{if(U)throw U.error}}if(D.length>0){p=!0;const $=new El;$.candidates=[{content:{role:"user",parts:D}}],yield yield tt($);const V=[];V.push(...Q),V.push({role:"user",parts:D});const oe=ln(S.contents).concat(V);S.contents=oe}else break}})})(this,y,t)}async generateContentInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=wg(this.apiClient,t);return x=he("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Mg(v),N=new El;return Object.assign(N,S),N})}else{const h=_g(this.apiClient,t);return x=he("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Rg(v),N=new El;return Object.assign(N,S),N})}}async generateContentStreamInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=wg(this.apiClient,t);return x=he("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.requestStream({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),p.then(function(S){return Es(this,arguments,function*(){var N,C,_,U;try{for(var H=!0,M=_l(S),O;O=yield tt(M.next()),N=O.done,!N;H=!0){U=O.value,H=!1;const j=U,ee=Mg(yield tt(j.json()));ee.sdkHttpResponse={headers:j.headers};const ie=new El;Object.assign(ie,ee),yield yield tt(ie)}}catch(j){C={error:j}}finally{try{!H&&!N&&(_=M.return)&&(yield tt(_.call(M)))}finally{if(C)throw C.error}}})})}else{const h=_g(this.apiClient,t);return x=he("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.requestStream({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}),p.then(function(S){return Es(this,arguments,function*(){var N,C,_,U;try{for(var H=!0,M=_l(S),O;O=yield tt(M.next()),N=O.done,!N;H=!0){U=O.value,H=!1;const j=U,ee=Rg(yield tt(j.json()));ee.sdkHttpResponse={headers:j.headers};const ie=new El;Object.assign(ie,ee),yield yield tt(ie)}}catch(j){C={error:j}}finally{try{!H&&!N&&(_=M.return)&&(yield tt(_.call(M)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=Kb(this.apiClient,t);return x=he("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Qb(v),N=new dg;return Object.assign(N,S),N})}else{const h=Jb(this.apiClient,t);return x=he("{model}:batchEmbedContents",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Xb(v),N=new dg;return Object.assign(N,S),N})}}async generateImagesInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=aN(this.apiClient,t);return x=he("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=rN(v),N=new fg;return Object.assign(N,S),N})}else{const h=lN(this.apiClient,t);return x=he("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=oN(v),N=new fg;return Object.assign(N,S),N})}}async editImageInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=zb(this.apiClient,t);return d=he("{model}:predict",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=Fb(y),v=new ov;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=iT(this.apiClient,t);return d=he("{model}:predict",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=sT(y),v=new rv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=LN(this.apiClient,t);return d=he("{model}:predict",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=ON(y),v=new uv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=YN(this.apiClient,t);return d=he("{model}:predict",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=$N(y),v=new cv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=EN(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>Ou(v))}else{const h=CN(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>Lu(v))}}async listInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=IN(this.apiClient,t);return x=he("{models_url}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=UN(v),N=new mg;return Object.assign(N,S),N})}else{const h=DN(this.apiClient,t);return x=he("{models_url}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=kN(v),N=new mg;return Object.assign(N,S),N})}}async update(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=tT(this.apiClient,t);return x=he("{model}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>Ou(v))}else{const h=eT(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>Lu(v))}}async delete(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=Ob(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Bb(v),N=new pg;return Object.assign(N,S),N})}else{const h=Lb(this.apiClient,t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Vb(v),N=new pg;return Object.assign(N,S),N})}}async countTokens(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=Hb(this.apiClient,t);return x=he("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=jb(v),N=new gg;return Object.assign(N,S),N})}else{const h=qb(this.apiClient,t);return x=he("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=Gb(v),N=new gg;return Object.assign(N,S),N})}}async computeTokens(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=wb(this.apiClient,t);return d=he("{model}:computeTokens",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const h=Rb(y),v=new dv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=pN(this.apiClient,t);return x=he("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p.then(v=>{const S=fN(v),N=new Xa;return Object.assign(N,S),N})}else{const h=mN(this.apiClient,t);return x=he("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p.then(v=>{const S=dN(v),N=new Xa;return Object.assign(N,S),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GT extends Gn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const l=t.operation,a=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let d;a&&"httpOptions"in a&&(d=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:d}});return l._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:a});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const l=t.operation,a=t.config;if(l.name===void 0||l.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=l.name.split("/operations/")[0];let d;a&&"httpOptions"in a&&(d=a.httpOptions);const p=await this.fetchPredictVideosOperationInternal({operationName:l.name,resourceName:r,config:{httpOptions:d}});return l._fromAPIResponse({apiResponse:p,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:l.name,config:a});return l._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=tv(t);return x=he("{operationName}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),p}else{const h=ev(t);return x=he("{operationName}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json()),p}}async fetchPredictVideosOperationInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=$y(t);return d=he("{resourceName}:fetchPredictOperation",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jT(i){const t={},l=c(i,["data"]);if(l!=null&&f(t,["data"],l),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function LT(i){const t={},l=c(i,["parts"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(d=>$T(d))),f(t,["parts"],r)}const a=c(i,["role"]);return a!=null&&f(t,["role"],a),t}function OT(i,t,l){const a={},r=c(t,["expireTime"]);l!==void 0&&r!=null&&f(l,["expireTime"],r);const d=c(t,["newSessionExpireTime"]);l!==void 0&&d!=null&&f(l,["newSessionExpireTime"],d);const p=c(t,["uses"]);l!==void 0&&p!=null&&f(l,["uses"],p);const x=c(t,["liveConnectConstraints"]);l!==void 0&&x!=null&&f(l,["bidiGenerateContentSetup"],YT(i,x));const y=c(t,["lockAdditionalFields"]);return l!==void 0&&y!=null&&f(l,["fieldMask"],y),a}function VT(i,t){const l={},a=c(t,["config"]);return a!=null&&f(l,["config"],OT(i,a,l)),l}function BT(i){const t={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const l=c(i,["fileUri"]);l!=null&&f(t,["fileUri"],l);const a=c(i,["mimeType"]);return a!=null&&f(t,["mimeType"],a),t}function PT(i){const t={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const l=c(i,["enableWidget"]);return l!=null&&f(t,["enableWidget"],l),t}function zT(i){const t={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const l=c(i,["timeRangeFilter"]);return l!=null&&f(t,["timeRangeFilter"],l),t}function FT(i,t){const l={},a=c(i,["generationConfig"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig"],a);const r=c(i,["responseModalities"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","responseModalities"],r);const d=c(i,["temperature"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","temperature"],d);const p=c(i,["topP"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","topP"],p);const x=c(i,["topK"]);t!==void 0&&x!=null&&f(t,["setup","generationConfig","topK"],x);const y=c(i,["maxOutputTokens"]);t!==void 0&&y!=null&&f(t,["setup","generationConfig","maxOutputTokens"],y);const h=c(i,["mediaResolution"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","mediaResolution"],h);const v=c(i,["seed"]);t!==void 0&&v!=null&&f(t,["setup","generationConfig","seed"],v);const S=c(i,["speechConfig"]);t!==void 0&&S!=null&&f(t,["setup","generationConfig","speechConfig"],Wu(S));const N=c(i,["thinkingConfig"]);t!==void 0&&N!=null&&f(t,["setup","generationConfig","thinkingConfig"],N);const C=c(i,["enableAffectiveDialog"]);t!==void 0&&C!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],C);const _=c(i,["systemInstruction"]);t!==void 0&&_!=null&&f(t,["setup","systemInstruction"],LT(Et(_)));const U=c(i,["tools"]);if(t!==void 0&&U!=null){let ue=Rs(U);Array.isArray(ue)&&(ue=ue.map(D=>KT(ws(D)))),f(t,["setup","tools"],ue)}const H=c(i,["sessionResumption"]);t!==void 0&&H!=null&&f(t,["setup","sessionResumption"],JT(H));const M=c(i,["inputAudioTranscription"]);t!==void 0&&M!=null&&f(t,["setup","inputAudioTranscription"],M);const O=c(i,["outputAudioTranscription"]);t!==void 0&&O!=null&&f(t,["setup","outputAudioTranscription"],O);const j=c(i,["realtimeInputConfig"]);t!==void 0&&j!=null&&f(t,["setup","realtimeInputConfig"],j);const ee=c(i,["contextWindowCompression"]);t!==void 0&&ee!=null&&f(t,["setup","contextWindowCompression"],ee);const ie=c(i,["proactivity"]);return t!==void 0&&ie!=null&&f(t,["setup","proactivity"],ie),l}function YT(i,t){const l={},a=c(t,["model"]);a!=null&&f(l,["setup","model"],ze(i,a));const r=c(t,["config"]);return r!=null&&f(l,["config"],FT(r,l)),l}function $T(i){const t={},l=c(i,["functionCall"]);l!=null&&f(t,["functionCall"],l);const a=c(i,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const r=c(i,["executableCode"]);r!=null&&f(t,["executableCode"],r);const d=c(i,["fileData"]);d!=null&&f(t,["fileData"],BT(d));const p=c(i,["functionResponse"]);p!=null&&f(t,["functionResponse"],p);const x=c(i,["inlineData"]);x!=null&&f(t,["inlineData"],jT(x));const y=c(i,["text"]);y!=null&&f(t,["text"],y);const h=c(i,["thought"]);h!=null&&f(t,["thought"],h);const v=c(i,["thoughtSignature"]);v!=null&&f(t,["thoughtSignature"],v);const S=c(i,["videoMetadata"]);return S!=null&&f(t,["videoMetadata"],S),t}function JT(i){const t={},l=c(i,["handle"]);if(l!=null&&f(t,["handle"],l),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function KT(i){const t={},l=c(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(S=>S)),f(t,["functionDeclarations"],v)}if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=c(i,["googleSearchRetrieval"]);a!=null&&f(t,["googleSearchRetrieval"],a);const r=c(i,["computerUse"]);r!=null&&f(t,["computerUse"],r);const d=c(i,["fileSearch"]);d!=null&&f(t,["fileSearch"],d);const p=c(i,["codeExecution"]);if(p!=null&&f(t,["codeExecution"],p),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const x=c(i,["googleMaps"]);x!=null&&f(t,["googleMaps"],PT(x));const y=c(i,["googleSearch"]);y!=null&&f(t,["googleSearch"],zT(y));const h=c(i,["urlContext"]);return h!=null&&f(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XT(i){const t=[];for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const a=i[l];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(d=>`${l}.${d}`);t.push(...r)}else t.push(l)}return t.join(",")}function QT(i,t){let l=null;const a=i.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const d=a.setup;typeof d=="object"&&d!==null?(i.bidiGenerateContentSetup=d,l=d):delete i.bidiGenerateContentSetup}else a!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(l){const d=XT(l);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)d?i.fieldMask=d:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const p=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let x=[];r.length>0&&(x=r.map(h=>p.includes(h)?`generationConfig.${h}`:h));const y=[];d&&y.push(d),x.length>0&&y.push(...x),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class ZT extends Gn{constructor(t){super(),this.apiClient=t}async create(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const x=VT(this.apiClient,t);d=he("auth_tokens",x._url),p=x._query,delete x.config,delete x._url,delete x._query;const y=QT(x,t.config);return r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WT(i,t){const l={},a=c(i,["displayName"]);return t!==void 0&&a!=null&&f(t,["displayName"],a),l}function eC(i){const t={},l=c(i,["config"]);return l!=null&&WT(l,t),t}function tC(i,t){const l={},a=c(i,["force"]);return t!==void 0&&a!=null&&f(t,["_query","force"],a),l}function nC(i){const t={},l=c(i,["name"]);l!=null&&f(t,["_url","name"],l);const a=c(i,["config"]);return a!=null&&tC(a,t),t}function iC(i){const t={},l=c(i,["name"]);return l!=null&&f(t,["_url","name"],l),t}function sC(i,t){const l={},a=c(i,["customMetadata"]);if(t!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["customMetadata"],d)}const r=c(i,["chunkingConfig"]);return t!==void 0&&r!=null&&f(t,["chunkingConfig"],r),l}function lC(i){const t={},l=c(i,["name"]);l!=null&&f(t,["name"],l);const a=c(i,["metadata"]);a!=null&&f(t,["metadata"],a);const r=c(i,["done"]);r!=null&&f(t,["done"],r);const d=c(i,["error"]);d!=null&&f(t,["error"],d);const p=c(i,["response"]);return p!=null&&f(t,["response"],oC(p)),t}function aC(i){const t={},l=c(i,["fileSearchStoreName"]);l!=null&&f(t,["_url","file_search_store_name"],l);const a=c(i,["fileName"]);a!=null&&f(t,["fileName"],a);const r=c(i,["config"]);return r!=null&&sC(r,t),t}function oC(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["parent"]);a!=null&&f(t,["parent"],a);const r=c(i,["documentName"]);return r!=null&&f(t,["documentName"],r),t}function rC(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function uC(i){const t={},l=c(i,["config"]);return l!=null&&rC(l,t),t}function cC(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["fileSearchStores"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["fileSearchStores"],d)}return t}function dC(i,t){const l={},a=c(i,["mimeType"]);t!==void 0&&a!=null&&f(t,["mimeType"],a);const r=c(i,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);const d=c(i,["customMetadata"]);if(t!==void 0&&d!=null){let x=d;Array.isArray(x)&&(x=x.map(y=>y)),f(t,["customMetadata"],x)}const p=c(i,["chunkingConfig"]);return t!==void 0&&p!=null&&f(t,["chunkingConfig"],p),l}function fC(i){const t={},l=c(i,["fileSearchStoreName"]);l!=null&&f(t,["_url","file_search_store_name"],l);const a=c(i,["config"]);return a!=null&&dC(a,t),t}function mC(i){const t={},l=c(i,["sdkHttpResponse"]);return l!=null&&f(t,["sdkHttpResponse"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pC(i,t){const l={},a=c(i,["force"]);return t!==void 0&&a!=null&&f(t,["_query","force"],a),l}function gC(i){const t={},l=c(i,["name"]);l!=null&&f(t,["_url","name"],l);const a=c(i,["config"]);return a!=null&&pC(a,t),t}function hC(i){const t={},l=c(i,["name"]);return l!=null&&f(t,["_url","name"],l),t}function xC(i,t){const l={},a=c(i,["pageSize"]);t!==void 0&&a!=null&&f(t,["_query","pageSize"],a);const r=c(i,["pageToken"]);return t!==void 0&&r!=null&&f(t,["_query","pageToken"],r),l}function yC(i){const t={},l=c(i,["parent"]);l!=null&&f(t,["_url","parent"],l);const a=c(i,["config"]);return a!=null&&xC(a,t),t}function vC(i){const t={},l=c(i,["sdkHttpResponse"]);l!=null&&f(t,["sdkHttpResponse"],l);const a=c(i,["nextPageToken"]);a!=null&&f(t,["nextPageToken"],a);const r=c(i,["documents"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["documents"],d)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends Gn{constructor(t){super(),this.apiClient=t,this.list=async l=>new qi(Hn.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:l.parent,config:a.config}),await this.listInternal(l),l)}async get(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=hC(t);return d=he("{name}",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,a;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=gC(t);r=he("{name}",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=yC(t);return d=he("{parent}/documents",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=vC(y),v=new fv;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bC extends Gn{constructor(t,l=new SC(t)){super(),this.apiClient=t,this.documents=l,this.list=async(a={})=>new qi(Hn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=eC(t);return d=he("fileSearchStores",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=iC(t);return d=he("{name}",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var l,a;let r="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nC(t);r=he("{name}",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:r,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=uC(t);return d=he("fileSearchStores",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=cC(y),v=new mv;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=fC(t);return d=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=mC(y),v=new pv;return Object.assign(v,h),v})}}async importFile(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=aC(t);return d=he("{file_search_store_name}:importFile",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),r.then(y=>{const h=lC(y),v=new Ju;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NC(i,t){const l={},a=c(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function TC(i,t){const l={},a=c(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function CC(i,t,l){const a={};if(c(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(i,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&f(t,["displayName"],r),c(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=c(i,["epochCount"]);t!==void 0&&d!=null&&f(t,["tuningTask","hyperparameters","epochCount"],d);const p=c(i,["learningRateMultiplier"]);if(p!=null&&f(a,["tuningTask","hyperparameters","learningRateMultiplier"],p),c(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const x=c(i,["batchSize"]);t!==void 0&&x!=null&&f(t,["tuningTask","hyperparameters","batchSize"],x);const y=c(i,["learningRate"]);if(t!==void 0&&y!=null&&f(t,["tuningTask","hyperparameters","learningRate"],y),c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function EC(i,t,l){const a={};let r=c(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=c(i,["validationDataset"]);t!==void 0&&C!=null&&f(t,["supervisedTuningSpec"],Gg(C))}else if(r==="PREFERENCE_TUNING"){const C=c(i,["validationDataset"]);t!==void 0&&C!=null&&f(t,["preferenceOptimizationSpec"],Gg(C))}const d=c(i,["tunedModelDisplayName"]);t!==void 0&&d!=null&&f(t,["tunedModelDisplayName"],d);const p=c(i,["description"]);t!==void 0&&p!=null&&f(t,["description"],p);let x=c(l,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const C=c(i,["epochCount"]);t!==void 0&&C!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(x==="PREFERENCE_TUNING"){const C=c(i,["epochCount"]);t!==void 0&&C!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let y=c(l,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=c(i,["learningRateMultiplier"]);t!==void 0&&C!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(y==="PREFERENCE_TUNING"){const C=c(i,["learningRateMultiplier"]);t!==void 0&&C!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=c(l,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=c(i,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=c(i,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let v=c(l,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const C=c(i,["adapterSize"]);t!==void 0&&C!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(v==="PREFERENCE_TUNING"){const C=c(i,["adapterSize"]);t!==void 0&&C!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(c(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=c(i,["labels"]);t!==void 0&&S!=null&&f(t,["labels"],S);const N=c(i,["beta"]);return t!==void 0&&N!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],N),a}function AC(i,t){const l={},a=c(i,["baseModel"]);a!=null&&f(l,["baseModel"],a);const r=c(i,["preTunedModel"]);r!=null&&f(l,["preTunedModel"],r);const d=c(i,["trainingDataset"]);d!=null&&GC(d);const p=c(i,["config"]);return p!=null&&CC(p,l),l}function _C(i,t){const l={},a=c(i,["baseModel"]);a!=null&&f(l,["baseModel"],a);const r=c(i,["preTunedModel"]);r!=null&&f(l,["preTunedModel"],r);const d=c(i,["trainingDataset"]);d!=null&&jC(d,l,t);const p=c(i,["config"]);return p!=null&&EC(p,l,t),l}function wC(i,t){const l={},a=c(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function RC(i,t){const l={},a=c(i,["name"]);return a!=null&&f(l,["_url","name"],a),l}function MC(i,t,l){const a={},r=c(i,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const d=c(i,["pageToken"]);t!==void 0&&d!=null&&f(t,["_query","pageToken"],d);const p=c(i,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),a}function DC(i,t,l){const a={},r=c(i,["pageSize"]);t!==void 0&&r!=null&&f(t,["_query","pageSize"],r);const d=c(i,["pageToken"]);t!==void 0&&d!=null&&f(t,["_query","pageToken"],d);const p=c(i,["filter"]);return t!==void 0&&p!=null&&f(t,["_query","filter"],p),a}function IC(i,t){const l={},a=c(i,["config"]);return a!=null&&MC(a,l),l}function kC(i,t){const l={},a=c(i,["config"]);return a!=null&&DC(a,l),l}function UC(i,t){const l={},a=c(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=c(i,["nextPageToken"]);r!=null&&f(l,["nextPageToken"],r);const d=c(i,["tunedModels"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(x=>Gh(x))),f(l,["tuningJobs"],p)}return l}function qC(i,t){const l={},a=c(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=c(i,["nextPageToken"]);r!=null&&f(l,["nextPageToken"],r);const d=c(i,["tuningJobs"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(x=>Bu(x))),f(l,["tuningJobs"],p)}return l}function HC(i,t){const l={},a=c(i,["name"]);a!=null&&f(l,["model"],a);const r=c(i,["name"]);return r!=null&&f(l,["endpoint"],r),l}function GC(i,t){const l={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=c(i,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(d=>d)),f(l,["examples","examples"],r)}return l}function jC(i,t,l){const a={};let r=c(l,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const p=c(i,["gcsUri"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(r==="PREFERENCE_TUNING"){const p=c(i,["gcsUri"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}let d=c(l,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const p=c(i,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],p)}else if(d==="PREFERENCE_TUNING"){const p=c(i,["vertexDatasetResource"]);t!==void 0&&p!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],p)}if(c(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function Gh(i,t){const l={},a=c(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=c(i,["name"]);r!=null&&f(l,["name"],r);const d=c(i,["state"]);d!=null&&f(l,["state"],yh(d));const p=c(i,["createTime"]);p!=null&&f(l,["createTime"],p);const x=c(i,["tuningTask","startTime"]);x!=null&&f(l,["startTime"],x);const y=c(i,["tuningTask","completeTime"]);y!=null&&f(l,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(l,["updateTime"],h);const v=c(i,["description"]);v!=null&&f(l,["description"],v);const S=c(i,["baseModel"]);S!=null&&f(l,["baseModel"],S);const N=c(i,["_self"]);return N!=null&&f(l,["tunedModel"],HC(N)),l}function Bu(i,t){const l={},a=c(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=c(i,["name"]);r!=null&&f(l,["name"],r);const d=c(i,["state"]);d!=null&&f(l,["state"],yh(d));const p=c(i,["createTime"]);p!=null&&f(l,["createTime"],p);const x=c(i,["startTime"]);x!=null&&f(l,["startTime"],x);const y=c(i,["endTime"]);y!=null&&f(l,["endTime"],y);const h=c(i,["updateTime"]);h!=null&&f(l,["updateTime"],h);const v=c(i,["error"]);v!=null&&f(l,["error"],v);const S=c(i,["description"]);S!=null&&f(l,["description"],S);const N=c(i,["baseModel"]);N!=null&&f(l,["baseModel"],N);const C=c(i,["tunedModel"]);C!=null&&f(l,["tunedModel"],C);const _=c(i,["preTunedModel"]);_!=null&&f(l,["preTunedModel"],_);const U=c(i,["supervisedTuningSpec"]);U!=null&&f(l,["supervisedTuningSpec"],U);const H=c(i,["preferenceOptimizationSpec"]);H!=null&&f(l,["preferenceOptimizationSpec"],H);const M=c(i,["tuningDataStats"]);M!=null&&f(l,["tuningDataStats"],M);const O=c(i,["encryptionSpec"]);O!=null&&f(l,["encryptionSpec"],O);const j=c(i,["partnerModelTuningSpec"]);j!=null&&f(l,["partnerModelTuningSpec"],j);const ee=c(i,["customBaseModel"]);ee!=null&&f(l,["customBaseModel"],ee);const ie=c(i,["experiment"]);ie!=null&&f(l,["experiment"],ie);const ue=c(i,["labels"]);ue!=null&&f(l,["labels"],ue);const D=c(i,["outputUri"]);D!=null&&f(l,["outputUri"],D);const Q=c(i,["pipelineJob"]);Q!=null&&f(l,["pipelineJob"],Q);const $=c(i,["serviceAccount"]);$!=null&&f(l,["serviceAccount"],$);const V=c(i,["tunedModelDisplayName"]);V!=null&&f(l,["tunedModelDisplayName"],V);const oe=c(i,["veoTuningSpec"]);return oe!=null&&f(l,["veoTuningSpec"],oe),l}function LC(i,t){const l={},a=c(i,["sdkHttpResponse"]);a!=null&&f(l,["sdkHttpResponse"],a);const r=c(i,["name"]);r!=null&&f(l,["name"],r);const d=c(i,["metadata"]);d!=null&&f(l,["metadata"],d);const p=c(i,["done"]);p!=null&&f(l,["done"],p);const x=c(i,["error"]);return x!=null&&f(l,["error"],x),l}function Gg(i,t){const l={},a=c(i,["gcsUri"]);a!=null&&f(l,["validationDatasetUri"],a);const r=c(i,["vertexDatasetResource"]);return r!=null&&f(l,["validationDatasetUri"],r),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OC extends Gn{constructor(t){super(),this.apiClient=t,this.get=async l=>await this.getInternal(l),this.list=async(l={})=>new qi(Hn.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(l),l),this.tune=async l=>{var a;if(this.apiClient.isVertexAI())if(l.baseModel.startsWith("projects/")){const r={tunedModelName:l.baseModel};!((a=l.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=l.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},l),{preTunedModel:r});return d.baseModel=void 0,await this.tuneInternal(d)}else{const r=Object.assign({},l);return await this.tuneInternal(r)}else{const r=Object.assign({},l),d=await this.tuneMldevInternal(r);let p="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?p=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(p=d.name.split("/operations/")[0]),{name:p,state:qu.JOB_STATE_QUEUED}}}}async getInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=RC(t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>Bu(v))}else{const h=wC(t);return x=he("{name}",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>Gh(v))}}async listInternal(t){var l,a,r,d;let p,x="",y={};if(this.apiClient.isVertexAI()){const h=kC(t);return x=he("tuningJobs",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=qC(v),N=new hg;return Object.assign(N,S),N})}else{const h=IC(t);return x=he("tunedModels",h._url),y=h._query,delete h._url,delete h._query,p=this.apiClient.request({path:x,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal}).then(v=>v.json().then(S=>{const N=S;return N.sdkHttpResponse={headers:v.headers},N})),p.then(v=>{const S=UC(v),N=new hg;return Object.assign(N,S),N})}}async cancel(t){var l,a,r,d;let p="",x={};if(this.apiClient.isVertexAI()){const y=TC(t);p=he("{name}:cancel",y._url),x=y._query,delete y._url,delete y._query,await this.apiClient.request({path:p,queryParams:x,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=NC(t);p=he("{name}:cancel",y._url),x=y._query,delete y._url,delete y._query,await this.apiClient.request({path:p,queryParams:x,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(d=t.config)===null||d===void 0?void 0:d.abortSignal})}}async tuneInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI()){const x=_C(t,t);return d=he("tuningJobs",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Bu(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var l,a;let r,d="",p={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const x=AC(t);return d=he("tunedModels",x._url),p=x._query,delete x._url,delete x._query,r=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(l=t.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>LC(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VC{async download(t,l){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BC=1024*1024*8,PC=3,zC=1e3,FC=2,Za="x-goog-upload-status";async function YC(i,t,l){var a;const r=await jh(i,t,l),d=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[Za])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function $C(i,t,l){var a;const r=await jh(i,t,l),d=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[Za])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const p=fh(d),x=new Ku;return Object.assign(x,p),x}async function jh(i,t,l){var a,r;let d=0,p=0,x=new Hu(new Response),y="upload";for(d=i.size;p<d;){const h=Math.min(BC,d-p),v=i.slice(p,p+h);p+h>=d&&(y+=", finalize");let S=0,N=zC;for(;S<PC&&(x=await l.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(p),"Content-Length":String(h)}}}),!(!((a=x==null?void 0:x.headers)===null||a===void 0)&&a[Za]));)S++,await KC(N),N=N*FC;if(p+=h,((r=x==null?void 0:x.headers)===null||r===void 0?void 0:r[Za])!=="active")break;if(d<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return x}async function JC(i){return{size:i.size,type:i.type}}function KC(i){return new Promise(t=>setTimeout(t,i))}class XC{async upload(t,l,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await YC(t,l,a)}async uploadToFileSearchStore(t,l,a){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await $C(t,l,a)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await JC(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC{create(t,l,a){return new ZC(t,l,a)}}class ZC{constructor(t,l,a){this.url=t,this.headers=l,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jg="x-goog-api-key";class WC{constructor(t){this.apiKey=t}async addAuthHeaders(t,l){if(t.get(jg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(jg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eE="gl-node/";class tE{constructor(t){var l;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(l=t.vertexai)!==null&&l!==void 0?l:!1,this.apiKey=t.apiKey;const a=Fy(t.httpOptions,t.vertexai,void 0,void 0);a&&(t.httpOptions?t.httpOptions.baseUrl=a:t.httpOptions={baseUrl:a}),this.apiVersion=t.apiVersion;const r=new WC(this.apiKey);this.apiClient=new xT({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:eE+"web",uploader:new XC,downloader:new VC}),this.models=new HT(this.apiClient),this.live=new MT(this.apiClient,r,new QC),this.batches=new hS(this.apiClient),this.chats=new JS(this.models,this.apiClient),this.caches=new FS(this.apiClient),this.files=new sb(this.apiClient),this.operations=new GT(this.apiClient),this.authTokens=new ZT(this.apiClient),this.tunings=new OC(this.apiClient),this.fileSearchStores=new bC(this.apiClient)}}const nE=()=>new tE({apiKey:"PLACEHOLDER_API_KEY"}),iE=`Eres un traductor experto especializado en el videojuego AFK Arena.
Tu tarea es traducir una frase del ruso al espaol.
Debes mantener el significado original pero adaptando la traduccin a la jerga y terminologa comnmente usada en la comunidad de habla hispana de AFK Arena.
Por ejemplo, "" es "grabado", "" es "muebles", "" es "prioridad", etc.
Responde nicamente con la frase traducida.`,Lh=async i=>{if(!i||i.trim()==="")return"";try{return(await nE().models.generateContent({model:"gemini-2.5-flash",contents:`Traduce la siguiente frase del ruso al espaol, usando la jerga de AFK Arena: "${i}"`,config:{systemInstruction:iE}})).text.trim().replace(/^"|"$/g,"")}catch(t){return console.error("Error translating single comment:",t),i}},Lg={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7},Og=i=>{switch(i){case"SSS":return"bg-blue-600 text-white shadow-lg";case"SS":return"bg-green-700 text-white shadow-lg";case"S":return"bg-lime-600 text-black shadow-lg";case"A":return"bg-yellow-500 text-black shadow-lg";case"B":return"bg-orange-600 text-white shadow-lg";case"C":return"bg-red-700 text-white shadow-lg";case"D":return"bg-amber-800 text-white shadow-lg";default:return"bg-gray-600 text-white"}},tc=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!l)return null;const a=`${t}${l}.png`;return u.jsx("img",{src:a,alt:i,title:i,className:"h-6 w-6 flex-shrink-0"})},lo=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500",borderClass:"border-blue-400"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600",borderClass:"border-green-500"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400",borderClass:"border-lime-300"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400",borderClass:"border-yellow-300"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500",borderClass:"border-orange-400"};case"C":return{textClass:"text-white",bgClass:"bg-red-600",borderClass:"border-red-500"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800",borderClass:"border-amber-700"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700",borderClass:"border-gray-600"}}},nc=({tier:i})=>{const{textClass:t,bgClass:l}=lo(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${l} px-2 py-0.5 shadow-sm`,children:u.jsx("span",{className:`block transform skew-x-12 text-center text-xs font-bold tracking-wider ${t}`,children:i})})},sE=({hero:i,onTranslateComment:t,translatingHeroName:l})=>{const[a,r]=w.useState(!1),d=i.score===7,{borderClass:p}=lo(i.tier);return u.jsxs("div",{className:`group bg-gradient-to-br from-gray-800 to-gray-900 p-4 rounded-xl border border-gray-700/80 flex items-center gap-4 transition-all duration-300 hover:border-red-600/60 hover:shadow-[0_0_25px_5px_rgba(239,68,68,0.4)] ${d?"perfect-card-glow":""}`,children:[u.jsx("div",{className:`w-24 h-24 bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center border-4 ${p} overflow-hidden shadow-inner`,children:u.jsx(Rt,{heroName:i.name,className:"h-full w-full"})}),u.jsxs("div",{className:"flex-grow flex flex-col items-start text-left self-stretch",children:[u.jsx("h3",{className:`text-lg font-bold ${d?"text-yellow-400":i.isNameTranslated?"text-white":"text-red-400"}`,children:i.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx(tc,{faction:i.faction}),u.jsx(nc,{tier:i.tier})]}),u.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[u.jsx("span",{className:"text-sm text-gray-400",children:"Puntuacin:"}),u.jsx("span",{className:`text-xl font-bold ${d?"text-cyan-300":"text-cyan-400"}`,children:i.score.toFixed(2)}),u.jsxs("span",{className:"text-xs text-gray-400",children:["(",(i.score/7*100).toFixed(1),"%)"]})]}),u.jsxs("div",{className:"border-t border-gray-700/50 pt-2 mt-auto w-full",children:[i.comments&&i.comments.trim()?u.jsxs("button",{onClick:()=>r(!a),className:"flex items-center justify-between w-full text-xs text-gray-400 hover:text-white transition-colors py-1","aria-expanded":a,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-comment-dots"}),u.jsx("span",{children:a?"Ocultar Comentarios":"Comentarios"})]}),u.jsx("i",{className:`fas fa-chevron-down transition-transform duration-300 ${a?"rotate-180":""}`})]}):u.jsxs("div",{className:"py-1 text-xs text-gray-500 italic flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-comment-slash"}),u.jsx("span",{children:"Sin comentarios"})]}),u.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden text-left ${a?"max-h-96 mt-2":"max-h-0"}`,children:u.jsxs("div",{className:"text-sm text-gray-400 border-l-2 border-gray-600 pl-2",children:[u.jsx("p",{className:"whitespace-normal",children:i.comments}),l===i.originalName?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mt-2 self-start",children:[u.jsx($t,{className:"h-3 w-3"}),u.jsx("span",{children:"Traduciendo..."})]}):!i.commentIsTranslated&&i.comments&&i.comments.trim()&&u.jsx("button",{onClick:()=>t(i.originalName),className:"mt-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-semibold py-1 px-2 rounded-md transition-colors self-start",title:"Traducir comentario",children:"Traducir"})]})})]})]})]})},lE=({hero:i})=>{const t=i.tier,{borderClass:l}=lo(t),a=i.score===7;return u.jsxs("div",{className:"group bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-3 w-full flex-shrink-0 shadow-lg border border-gray-700 text-center flex flex-col items-center transition-all duration-300 hover:scale-105 hover:shadow-red-500/20",children:[u.jsx("div",{className:`w-20 h-20 bg-gray-900 rounded-full mb-2 flex items-center justify-center border-4 ${l} overflow-hidden shadow-inner`,children:u.jsx(Rt,{heroName:i.name,className:"h-full w-full"})}),u.jsx("h4",{className:`font-bold text-base truncate w-full ${i.isNameTranslated?"text-white":"text-red-400"}`,children:i.name}),u.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[u.jsx(tc,{faction:i.faction}),u.jsx(nc,{tier:t})]}),u.jsxs("div",{className:"flex items-baseline justify-center gap-2 mt-2 text-sm border-t border-gray-700/50 pt-2 w-full",children:[u.jsx("span",{className:"text-gray-400",children:"Puntuacin:"}),u.jsx("span",{className:`font-bold text-lg ${a?"text-cyan-300 perfect-hero-glow":"text-cyan-400"}`,children:i.score.toFixed(2)})]})]})},aE=({heroes:i,factionFilter:t,awakenedFilter:l,tierFilter:a,onTranslateComment:r,translatingHeroName:d,viewMode:p,isGrouped:x})=>{const y=w.useMemo(()=>{const h=i.filter(N=>(l?N.isAwakened:!0)&&(t.size===0||t.has(N.faction))&&(a.size===0||a.has(N.tier)));if(!x){const N=h.sort((_,U)=>U.score-_.score),C=new Map;return C.set("Todos",N),C}const v=new Map;h.forEach(N=>{const C=v.get(N.tier);C?C.push(N):v.set(N.tier,[N])});const S=new Map([...v.entries()].sort((N,C)=>(Lg[N[0]]||99)-(Lg[C[0]]||99)));for(const N of S.values())N.sort((C,_)=>_.score-C.score);return S},[i,t,l,a,x]);return i.length===0?u.jsx("div",{className:"text-center py-10",children:"No se encontraron datos de hroes."}):Array.from(y.values()).every(h=>h.length===0)?u.jsx("div",{className:"text-center py-10 text-gray-400",children:"Ningn hroe coincide con los filtros seleccionados."}):p==="table"?u.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-lg shadow-md",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-700 text-sm",children:[u.jsx("thead",{className:"bg-gray-900/70 text-xs uppercase text-gray-300",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Hroe"}),!x&&u.jsx("th",{className:"px-4 py-3 text-center font-medium",children:"Tier"}),u.jsx("th",{className:"px-4 py-3 text-center font-medium",children:"Puntuacin"}),u.jsx("th",{className:"px-4 py-3 text-left font-medium w-1/2",children:"Comentarios"})]})}),Array.from(y.entries()).map(([h,v])=>u.jsxs("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:[x&&v.length>0&&u.jsx("tr",{className:Og(h),children:u.jsxs("th",{colSpan:3,className:"px-4 py-2 text-left text-lg font-bold",children:["Tier ",h]})}),v.map((S,N)=>u.jsxs("tr",{className:"hover:bg-gray-700/50",children:[u.jsx("td",{className:"px-4 py-3 align-top",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-14 h-14 bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center border-2 ${lo(S.tier).borderClass} overflow-hidden`,children:u.jsx(Rt,{heroName:S.name,className:"h-full w-full"})}),u.jsxs("div",{children:[u.jsx("div",{className:`font-bold ${S.isNameTranslated?"text-white":"text-red-400"}`,children:S.name}),u.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1.5 mt-1",children:[u.jsx(tc,{faction:S.faction}),u.jsx("span",{children:S.faction})]})]})]})}),!x&&u.jsx("td",{className:"px-4 py-3 align-middle text-center",children:u.jsx(nc,{tier:S.tier})}),u.jsx("td",{className:"px-4 py-3 align-middle text-center",children:u.jsx("div",{className:`text-lg font-bold ${S.score===7?"text-cyan-300 perfect-hero-glow":"text-cyan-400"}`,children:S.score.toFixed(2)})}),u.jsx("td",{className:"px-4 py-3 text-gray-300 align-top",children:u.jsxs("div",{className:"flex flex-col items-start max-w-prose",children:[u.jsx("p",{className:"whitespace-normal",children:S.comments}),d===S.originalName?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mt-2",children:[u.jsx($t,{className:"h-3 w-3"}),u.jsx("span",{children:"Traduciendo..."})]}):!S.commentIsTranslated&&S.comments&&S.comments.trim()&&u.jsx("button",{onClick:()=>r(S.originalName),className:"mt-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-semibold py-1 px-2 rounded-md transition-colors",title:"Traducir comentario",children:"Traducir"})]})})]},`${S.originalName}-${N}`))]},h))]})}):u.jsx("div",{className:"space-y-10",children:Array.from(y.entries()).map(([h,v])=>v.length>0&&u.jsxs("div",{children:[x&&u.jsxs("h2",{className:`text-3xl font-extrabold p-4 rounded-lg ${Og(h)} mb-6 shadow-xl`,children:["Tier ",h]}),u.jsx("div",{className:p==="card"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4":"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-3",children:v.map((S,N)=>p==="card"?u.jsx(sE,{hero:S,onTranslateComment:r,translatingHeroName:d},`${S.originalName}-${N}`):u.jsx(lE,{hero:S},`${S.originalName}-${N}`))})]},h))})};function oE(i,t){if(i.match(/^[a-z]+:\/\//i))return i;if(i.match(/^\/\//))return window.location.protocol+i;if(i.match(/^[a-z]+:/i))return i;const l=document.implementation.createHTMLDocument(),a=l.createElement("base"),r=l.createElement("a");return l.head.appendChild(a),l.body.appendChild(r),t&&(a.href=t),r.href=i,r.href}const rE=(()=>{let i=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${t()}${i}`)})();function ci(i){const t=[];for(let l=0,a=i.length;l<a;l++)t.push(i[l]);return t}let bs=null;function Oh(i={}){return bs||(i.includeStyleProperties?(bs=i.includeStyleProperties,bs):(bs=ci(window.getComputedStyle(document.documentElement)),bs))}function Wa(i,t){const a=(i.ownerDocument.defaultView||window).getComputedStyle(i).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function uE(i){const t=Wa(i,"border-left-width"),l=Wa(i,"border-right-width");return i.clientWidth+t+l}function cE(i){const t=Wa(i,"border-top-width"),l=Wa(i,"border-bottom-width");return i.clientHeight+t+l}function Vh(i,t={}){const l=t.width||uE(i),a=t.height||cE(i);return{width:l,height:a}}function dE(){let i,t;try{t=process}catch{}const l=t&&t.env?t.env.devicePixelRatio:null;return l&&(i=parseInt(l,10),Number.isNaN(i)&&(i=1)),i||window.devicePixelRatio||1}const Ft=16384;function fE(i){(i.width>Ft||i.height>Ft)&&(i.width>Ft&&i.height>Ft?i.width>i.height?(i.height*=Ft/i.width,i.width=Ft):(i.width*=Ft/i.height,i.height=Ft):i.width>Ft?(i.height*=Ft/i.width,i.width=Ft):(i.width*=Ft/i.height,i.height=Ft))}function eo(i){return new Promise((t,l)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=l,a.crossOrigin="anonymous",a.decoding="async",a.src=i})}async function mE(i){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(i)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function pE(i,t,l){const a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg"),d=document.createElementNS(a,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${l}`),r.setAttribute("viewBox",`0 0 ${t} ${l}`),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("externalResourcesRequired","true"),r.appendChild(d),d.appendChild(i),mE(r)}const Gt=(i,t)=>{if(i instanceof t)return!0;const l=Object.getPrototypeOf(i);return l===null?!1:l.constructor.name===t.name||Gt(l,t)};function gE(i){const t=i.getPropertyValue("content");return`${i.cssText} content: '${t.replace(/'|"/g,"")}';`}function hE(i,t){return Oh(t).map(l=>{const a=i.getPropertyValue(l),r=i.getPropertyPriority(l);return`${l}: ${a}${r?" !important":""};`}).join(" ")}function xE(i,t,l,a){const r=`.${i}:${t}`,d=l.cssText?gE(l):hE(l,a);return document.createTextNode(`${r}{${d}}`)}function Vg(i,t,l,a){const r=window.getComputedStyle(i,l),d=r.getPropertyValue("content");if(d===""||d==="none")return;const p=rE();try{t.className=`${t.className} ${p}`}catch{return}const x=document.createElement("style");x.appendChild(xE(p,l,r,a)),t.appendChild(x)}function yE(i,t,l){Vg(i,t,":before",l),Vg(i,t,":after",l)}const Bg="application/font-woff",Pg="image/jpeg",vE={woff:Bg,woff2:Bg,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Pg,jpeg:Pg,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function SE(i){const t=/\.([^./]*?)$/g.exec(i);return t?t[1]:""}function ic(i){const t=SE(i).toLowerCase();return vE[t]||""}function bE(i){return i.split(/,/)[1]}function Pu(i){return i.search(/^(data:)/)!==-1}function NE(i,t){return`data:${t};base64,${i}`}async function Bh(i,t,l){const a=await fetch(i,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const r=await a.blob();return new Promise((d,p)=>{const x=new FileReader;x.onerror=p,x.onloadend=()=>{try{d(l({res:a,result:x.result}))}catch(y){p(y)}},x.readAsDataURL(r)})}const Ru={};function TE(i,t,l){let a=i.replace(/\?.*/,"");return l&&(a=i),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function sc(i,t,l){const a=TE(i,t,l.includeQueryParams);if(Ru[a]!=null)return Ru[a];l.cacheBust&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());let r;try{const d=await Bh(i,l.fetchRequestInit,({res:p,result:x})=>(t||(t=p.headers.get("Content-Type")||""),bE(x)));r=NE(d,t)}catch(d){r=l.imagePlaceholder||"";let p=`Failed to fetch resource: ${i}`;d&&(p=typeof d=="string"?d:d.message),p&&console.warn(p)}return Ru[a]=r,r}async function CE(i){const t=i.toDataURL();return t==="data:,"?i.cloneNode(!1):eo(t)}async function EE(i,t){if(i.currentSrc){const d=document.createElement("canvas"),p=d.getContext("2d");d.width=i.clientWidth,d.height=i.clientHeight,p==null||p.drawImage(i,0,0,d.width,d.height);const x=d.toDataURL();return eo(x)}const l=i.poster,a=ic(l),r=await sc(l,a,t);return eo(r)}async function AE(i,t){var l;try{if(!((l=i==null?void 0:i.contentDocument)===null||l===void 0)&&l.body)return await ao(i.contentDocument.body,t,!0)}catch{}return i.cloneNode(!1)}async function _E(i,t){return Gt(i,HTMLCanvasElement)?CE(i):Gt(i,HTMLVideoElement)?EE(i,t):Gt(i,HTMLIFrameElement)?AE(i,t):i.cloneNode(Ph(i))}const wE=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SLOT",Ph=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SVG";async function RE(i,t,l){var a,r;if(Ph(t))return t;let d=[];return wE(i)&&i.assignedNodes?d=ci(i.assignedNodes()):Gt(i,HTMLIFrameElement)&&(!((a=i.contentDocument)===null||a===void 0)&&a.body)?d=ci(i.contentDocument.body.childNodes):d=ci(((r=i.shadowRoot)!==null&&r!==void 0?r:i).childNodes),d.length===0||Gt(i,HTMLVideoElement)||await d.reduce((p,x)=>p.then(()=>ao(x,l)).then(y=>{y&&t.appendChild(y)}),Promise.resolve()),t}function ME(i,t,l){const a=t.style;if(!a)return;const r=window.getComputedStyle(i);r.cssText?(a.cssText=r.cssText,a.transformOrigin=r.transformOrigin):Oh(l).forEach(d=>{let p=r.getPropertyValue(d);d==="font-size"&&p.endsWith("px")&&(p=`${Math.floor(parseFloat(p.substring(0,p.length-2)))-.1}px`),Gt(i,HTMLIFrameElement)&&d==="display"&&p==="inline"&&(p="block"),d==="d"&&t.getAttribute("d")&&(p=`path(${t.getAttribute("d")})`),a.setProperty(d,p,r.getPropertyPriority(d))})}function DE(i,t){Gt(i,HTMLTextAreaElement)&&(t.innerHTML=i.value),Gt(i,HTMLInputElement)&&t.setAttribute("value",i.value)}function IE(i,t){if(Gt(i,HTMLSelectElement)){const a=Array.from(t.children).find(r=>i.value===r.getAttribute("value"));a&&a.setAttribute("selected","")}}function kE(i,t,l){return Gt(t,Element)&&(ME(i,t,l),yE(i,t,l),DE(i,t),IE(i,t)),t}async function UE(i,t){const l=i.querySelectorAll?i.querySelectorAll("use"):[];if(l.length===0)return i;const a={};for(let d=0;d<l.length;d++){const x=l[d].getAttribute("xlink:href");if(x){const y=i.querySelector(x),h=document.querySelector(x);!y&&h&&!a[x]&&(a[x]=await ao(h,t,!0))}}const r=Object.values(a);if(r.length){const d="http://www.w3.org/1999/xhtml",p=document.createElementNS(d,"svg");p.setAttribute("xmlns",d),p.style.position="absolute",p.style.width="0",p.style.height="0",p.style.overflow="hidden",p.style.display="none";const x=document.createElementNS(d,"defs");p.appendChild(x);for(let y=0;y<r.length;y++)x.appendChild(r[y]);i.appendChild(p)}return i}async function ao(i,t,l){return!l&&t.filter&&!t.filter(i)?null:Promise.resolve(i).then(a=>_E(a,t)).then(a=>RE(i,a,t)).then(a=>kE(i,a,t)).then(a=>UE(a,t))}const zh=/url\((['"]?)([^'"]+?)\1\)/g,qE=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,HE=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function GE(i){const t=i.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function jE(i){const t=[];return i.replace(zh,(l,a,r)=>(t.push(r),l)),t.filter(l=>!Pu(l))}async function LE(i,t,l,a,r){try{const d=l?oE(t,l):t,p=ic(t);let x;return r||(x=await sc(d,p,a)),i.replace(GE(t),`$1${x}$3`)}catch{}return i}function OE(i,{preferredFontFormat:t}){return t?i.replace(HE,l=>{for(;;){const[a,,r]=qE.exec(l)||[];if(!r)return"";if(r===t)return`src: ${a};`}}):i}function Fh(i){return i.search(zh)!==-1}async function Yh(i,t,l){if(!Fh(i))return i;const a=OE(i,l);return jE(a).reduce((d,p)=>d.then(x=>LE(x,p,t,l)),Promise.resolve(a))}async function Ns(i,t,l){var a;const r=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(i);if(r){const d=await Yh(r,null,l);return t.style.setProperty(i,d,t.style.getPropertyPriority(i)),!0}return!1}async function VE(i,t){await Ns("background",i,t)||await Ns("background-image",i,t),await Ns("mask",i,t)||await Ns("-webkit-mask",i,t)||await Ns("mask-image",i,t)||await Ns("-webkit-mask-image",i,t)}async function BE(i,t){const l=Gt(i,HTMLImageElement);if(!(l&&!Pu(i.src))&&!(Gt(i,SVGImageElement)&&!Pu(i.href.baseVal)))return;const a=l?i.src:i.href.baseVal,r=await sc(a,ic(a),t);await new Promise((d,p)=>{i.onload=d,i.onerror=t.onImageErrorHandler?(...y)=>{try{d(t.onImageErrorHandler(...y))}catch(h){p(h)}}:p;const x=i;x.decode&&(x.decode=d),x.loading==="lazy"&&(x.loading="eager"),l?(i.srcset="",i.src=r):i.href.baseVal=r})}async function PE(i,t){const a=ci(i.childNodes).map(r=>$h(r,t));await Promise.all(a).then(()=>i)}async function $h(i,t){Gt(i,Element)&&(await VE(i,t),await BE(i,t),await PE(i,t))}function zE(i,t){const{style:l}=i;t.backgroundColor&&(l.backgroundColor=t.backgroundColor),t.width&&(l.width=`${t.width}px`),t.height&&(l.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(r=>{l[r]=a[r]}),i}const zg={};async function Fg(i){let t=zg[i];if(t!=null)return t;const a=await(await fetch(i)).text();return t={url:i,cssText:a},zg[i]=t,t}async function Yg(i,t){let l=i.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,d=(l.match(/url\([^)]+\)/g)||[]).map(async p=>{let x=p.replace(a,"$1");return x.startsWith("https://")||(x=new URL(x,i.url).href),Bh(x,t.fetchRequestInit,({result:y})=>(l=l.replace(p,`url(${y})`),[p,y]))});return Promise.all(d).then(()=>l)}function $g(i){if(i==null)return[];const t=[],l=/(\/\*[\s\S]*?\*\/)/gi;let a=i.replace(l,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const y=r.exec(a);if(y===null)break;t.push(y[0])}a=a.replace(r,"");const d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,p="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",x=new RegExp(p,"gi");for(;;){let y=d.exec(a);if(y===null){if(y=x.exec(a),y===null)break;d.lastIndex=x.lastIndex}else x.lastIndex=d.lastIndex;t.push(y[0])}return t}async function FE(i,t){const l=[],a=[];return i.forEach(r=>{if("cssRules"in r)try{ci(r.cssRules||[]).forEach((d,p)=>{if(d.type===CSSRule.IMPORT_RULE){let x=p+1;const y=d.href,h=Fg(y).then(v=>Yg(v,t)).then(v=>$g(v).forEach(S=>{try{r.insertRule(S,S.startsWith("@import")?x+=1:r.cssRules.length)}catch(N){console.error("Error inserting rule from remote css",{rule:S,error:N})}})).catch(v=>{console.error("Error loading remote css",v.toString())});a.push(h)}})}catch(d){const p=i.find(x=>x.href==null)||document.styleSheets[0];r.href!=null&&a.push(Fg(r.href).then(x=>Yg(x,t)).then(x=>$g(x).forEach(y=>{p.insertRule(y,p.cssRules.length)})).catch(x=>{console.error("Error loading remote stylesheet",x)})),console.error("Error inlining remote css file",d)}}),Promise.all(a).then(()=>(i.forEach(r=>{if("cssRules"in r)try{ci(r.cssRules||[]).forEach(d=>{l.push(d)})}catch(d){console.error(`Error while reading CSS rules from ${r.href}`,d)}}),l))}function YE(i){return i.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Fh(t.style.getPropertyValue("src")))}async function $E(i,t){if(i.ownerDocument==null)throw new Error("Provided element is not within a Document");const l=ci(i.ownerDocument.styleSheets),a=await FE(l,t);return YE(a)}function Jh(i){return i.trim().replace(/["']/g,"")}function JE(i){const t=new Set;function l(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(d=>{t.add(Jh(d))}),Array.from(a.children).forEach(d=>{d instanceof HTMLElement&&l(d)})}return l(i),t}async function KE(i,t){const l=await $E(i,t),a=JE(i);return(await Promise.all(l.filter(d=>a.has(Jh(d.style.fontFamily))).map(d=>{const p=d.parentStyleSheet?d.parentStyleSheet.href:null;return Yh(d.cssText,p,t)}))).join(`
`)}async function XE(i,t){const l=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await KE(i,t);if(l){const a=document.createElement("style"),r=document.createTextNode(l);a.appendChild(r),i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a)}}async function QE(i,t={}){const{width:l,height:a}=Vh(i,t),r=await ao(i,t,!0);return await XE(r,t),await $h(r,t),zE(r,t),await pE(r,l,a)}async function ZE(i,t={}){const{width:l,height:a}=Vh(i,t),r=await QE(i,t),d=await eo(r),p=document.createElement("canvas"),x=p.getContext("2d"),y=t.pixelRatio||dE(),h=t.canvasWidth||l,v=t.canvasHeight||a;return p.width=h*y,p.height=v*y,t.skipAutoScale||fE(p),p.style.width=`${h}`,p.style.height=`${v}`,t.backgroundColor&&(x.fillStyle=t.backgroundColor,x.fillRect(0,0,p.width,p.height)),x.drawImage(d,0,0,p.width,p.height),p}async function WE(i,t={}){return(await ZE(i,t)).toDataURL()}const Kh=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500",borderClass:"border-blue-300"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600",borderClass:"border-green-400"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400",borderClass:"border-lime-300"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400",borderClass:"border-yellow-300"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500",borderClass:"border-orange-400"};case"C":return{textClass:"text-white",bgClass:"bg-red-600",borderClass:"border-red-500"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800",borderClass:"border-amber-700"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700",borderClass:"border-gray-600"}}},eA=({tier:i,containerClass:t,textClass:l})=>{const{textClass:a,bgClass:r}=Kh(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${r} ${t} shadow-md`,children:u.jsx("span",{className:`block transform skew-x-12 text-center font-bold tracking-wider ${a} ${l}`,children:i})})},tA=({faction:i,sizeClass:t,textSizeClass:l})=>{if(i==="Desconocida")return u.jsx("div",{className:`${t} flex items-center justify-center bg-gray-700 rounded-full font-bold text-gray-400 ${l}`,title:"Faccin Desconocida",children:"?"});const a="https://ik.imagekit.io/optimizerhispania/",r=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!r)return null;const d=`${a}${r}.png`;return u.jsx("img",{src:d,alt:i,title:i,className:t})},nA={large:{portraitContainer:"w-[320px] h-[320px] border-[16px]",rankText:"text-9xl -top-8 -left-2",rankStroke:"4px",nameText:"text-5xl",nameMaxWidth:"max-w-[400px]",iconContainer:"h-16 w-16",iconText:"text-2xl",badgeContainer:"px-4 py-1",badgeText:"text-2xl",mainGap:"gap-4 mt-6",iconsGap:"gap-6"},medium:{portraitContainer:"w-[240px] h-[240px] border-[12px]",rankText:"text-8xl -top-6 -left-2",rankStroke:"3px",nameText:"text-4xl",nameMaxWidth:"max-w-[300px]",iconContainer:"h-12 w-12",iconText:"text-xl",badgeContainer:"px-3 py-0.5",badgeText:"text-xl",mainGap:"gap-3 mt-4",iconsGap:"gap-4"},small:{portraitContainer:"w-[180px] h-[180px] border-[8px]",rankText:"text-6xl -top-4 -left-1",rankStroke:"2px",nameText:"text-2xl",nameMaxWidth:"max-w-[200px]",iconContainer:"h-9 w-9",iconText:"text-base",badgeContainer:"px-2 py-0",badgeText:"text-base",mainGap:"gap-2 mt-2",iconsGap:"gap-2"},xsmall:{portraitContainer:"w-[160px] h-[160px] border-[6px]",rankText:"text-5xl -top-3 -left-1",rankStroke:"2px",nameText:"text-xl",nameMaxWidth:"max-w-[160px]",iconContainer:"h-8 w-8",iconText:"text-sm",badgeContainer:"px-2 py-0",badgeText:"text-sm",mainGap:"gap-1 mt-1",iconsGap:"gap-2"},xxsmall:{portraitContainer:"w-[140px] h-[140px] border-[5px]",rankText:"text-4xl -top-2 -left-1",rankStroke:"2px",nameText:"text-lg",nameMaxWidth:"max-w-[140px]",iconContainer:"h-7 w-7",iconText:"text-xs",badgeContainer:"px-1.5 py-0",badgeText:"text-xs",mainGap:"gap-1 mt-1",iconsGap:"gap-1.5"},xxxsmall:{portraitContainer:"w-[120px] h-[120px] border-[4px]",rankText:"text-3xl -top-1.5 -left-1",rankStroke:"1.5px",nameText:"text-base",nameMaxWidth:"max-w-[120px]",iconContainer:"h-6 w-6",iconText:"text-xs",badgeContainer:"px-1 py-0",badgeText:"text-xs",mainGap:"gap-1 mt-1",iconsGap:"gap-1"},xxxxsmall:{portraitContainer:"w-[100px] h-[100px] border-[3px]",rankText:"text-2xl -top-1 -left-0.5",rankStroke:"1px",nameText:"text-sm",nameMaxWidth:"max-w-[100px]",iconContainer:"h-5 w-5",iconText:"text-[10px]",badgeContainer:"px-1 py-0",badgeText:"text-[10px]",mainGap:"gap-0.5 mt-0.5",iconsGap:"gap-1"},xxxxxsmall:{portraitContainer:"w-[90px] h-[90px] border-[2px]",rankText:"text-xl -top-1 -left-0.5",rankStroke:"1px",nameText:"text-xs",nameMaxWidth:"max-w-[90px]",iconContainer:"h-4 w-4",iconText:"text-[9px]",badgeContainer:"px-1 py-0",badgeText:"text-[9px]",mainGap:"gap-0.5 mt-0.5",iconsGap:"gap-1"}},iA=({hero:i,rank:t,size:l,isCapture:a=!1})=>{const{borderClass:r}=Kh(i.tier),d=nA[l];return u.jsxs("div",{className:"relative flex flex-col items-center justify-start text-center h-full",children:[u.jsx("span",{className:`absolute font-black text-white z-10 ${d.rankText}`,style:{textShadow:"2px 2px 5px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5)"},children:t}),u.jsx("div",{className:`relative bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center ${d.portraitContainer} ${r} overflow-hidden shadow-2xl`,children:u.jsx(Rt,{heroName:i.name,className:"h-full w-full scale-105"})}),u.jsxs("div",{className:`flex flex-col items-center ${d.mainGap}`,children:[u.jsx("h3",{className:`font-bold text-white truncate w-full ${d.nameText} ${d.nameMaxWidth}`,style:{textShadow:"1px 1px 2px rgba(0, 0, 0, 0.7)"},children:i.name}),u.jsxs("div",{className:`flex items-center justify-center ${d.iconsGap}`,children:[u.jsx(tA,{faction:i.faction,sizeClass:d.iconContainer,textSizeClass:d.iconText}),u.jsx(eA,{tier:i.tier,containerClass:d.badgeContainer,textClass:d.badgeText})]})]})]})},mi=({isOpen:i,onClose:t,onConfirm:l,title:a,children:r})=>i?u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-gray-700/80 text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-md mx-4 animate-[slide-up_0.4s_ease-out]",onClick:d=>d.stopPropagation(),children:[u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"sm:flex sm:items-start",children:[u.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gradient-to-br from-red-800 to-yellow-800 sm:mx-0 sm:h-10 sm:w-10",children:u.jsx(uh,{className:"h-6 w-6 text-yellow-300"})}),u.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[u.jsx("h3",{className:"text-xl leading-6 font-bold text-white",id:"modal-title",children:a}),u.jsx("div",{className:"mt-2",children:u.jsx("div",{className:"text-sm text-gray-300 space-y-2",children:r})})]})]})}),l&&u.jsxs("div",{className:"bg-gray-900/50 px-6 py-4 sm:flex sm:flex-row-reverse",children:[u.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-red-600 text-base font-bold text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-300 hover:shadow-[0_0_15px_rgba(220,38,38,0.6)]",onClick:l,children:"Confirmar"}),u.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-600 shadow-sm px-5 py-2.5 bg-gray-700 text-base font-medium text-gray-200 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-gray-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors",onClick:t,children:"Cancelar"})]})]}),u.jsx("style",{children:`
                    @keyframes fade-in {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes slide-up {
                        from { transform: translateY(2rem) scale(0.95); opacity: 0; }
                        to { transform: translateY(0) scale(1); opacity: 1; }
                    }
                `})]}):null,Jg={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7},Fa=120,sA=({heroes:i,onClose:t,filters:l,customTitle:a})=>{const r=w.useRef(null),d=w.useRef(null),p=w.useRef(null),[x,y]=w.useState(!1),[h,v]=w.useState(.1),[S,N]=w.useState(!1),[C,_]=w.useState(0),[U,H]=w.useState(i),[M,O]=w.useState(""),[j,ee]=w.useState(0);w.useEffect(()=>{H(i)},[i]),w.useEffect(()=>{const me=()=>{if(p.current){const k=p.current.clientWidth;v(k>0?k/1440:.1)}},Se=setTimeout(me,50);return window.addEventListener("resize",me),()=>{clearTimeout(Se),window.removeEventListener("resize",me)}},[U]);const ie=w.useMemo(()=>{if(a)return a;const me=[];if(l.showAwakenedOnly&&me.push("Hroes Despertados"),l.selectedTiers.size>0){const Se=Array.from(l.selectedTiers).sort((k,se)=>(Jg[k]||99)-(Jg[se]||99)).join(", ");me.push(`Tiers ${Se}`)}if(l.selectedFactions.size>0){const Se=Array.from(l.selectedFactions).join(" & ");me.push(`${Se}`)}return me.length===0?"Prioridad General: Todos los Hroes":`Prioridad: ${me.join(" | ")}`},[l,a]),ue="Esta gua visual, basada en los anlisis de expertos, representa el orden de prioridad que el gremio HISPANIA recomienda para optimizar tus recursos.",D=new Date().toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),Q=i.length;let $;Q<=16?$={gridColsClass:"grid-cols-4",cardSize:"medium",gapClass:"gap-x-12 gap-y-12"}:Q<=25?$={gridColsClass:"grid-cols-5",cardSize:"small",gapClass:"gap-x-8 gap-y-8"}:Q<=36?$={gridColsClass:"grid-cols-6",cardSize:"xsmall",gapClass:"gap-x-6 gap-y-6"}:Q<=49?$={gridColsClass:"grid-cols-7",cardSize:"xxsmall",gapClass:"gap-x-4 gap-y-4"}:Q<=64?$={gridColsClass:"grid-cols-8",cardSize:"xxxsmall",gapClass:"gap-x-3 gap-y-3"}:Q<=99?$={gridColsClass:"grid-cols-9",cardSize:"xxxxsmall",gapClass:"gap-x-2 gap-y-2"}:$={gridColsClass:"grid-cols-10",cardSize:"xxxxxsmall",gapClass:"gap-x-1 gap-y-1"};const V=()=>{const me=j*Fa;return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"flex flex-col items-center text-center pb-16 border-b-4 border-red-800/50",children:[u.jsxs("div",{className:"font-bold text-white inline-flex items-center gap-6",children:[u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/LogoGUILD.png",alt:"Logo del Gremio HISPANIA",className:"h-24",crossOrigin:"anonymous"}),u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-16",crossOrigin:"anonymous"}),u.jsx("span",{className:"text-9xl",children:"HISPANIA"}),u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-16",crossOrigin:"anonymous"}),u.jsx("span",{className:"text-6xl text-gray-300",children:"ID: 7642"})]}),u.jsxs("div",{className:"mt-12 w-full flex flex-col items-center gap-6",children:[u.jsx("h1",{className:"text-8xl font-extrabold text-white px-12",style:{textShadow:"2px 2px 5px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.5)"},children:ie}),u.jsx("p",{className:"text-4xl text-gray-300 max-w-5xl px-8",style:{textShadow:"1px 1px 2px rgba(0, 0, 0, 0.7)"},children:ue}),u.jsxs("p",{className:"text-4xl text-gray-400 font-mono font-semibold",children:[u.jsx("i",{className:"fas fa-calendar-alt mr-4"}),D]})]})]}),u.jsx("main",{className:`flex-grow pt-16 grid ${$.gridColsClass} grid-flow-row ${$.gapClass} content-start`,children:U.map((Se,k)=>u.jsx(iA,{hero:Se,rank:me+k+1,size:$.cardSize},`${Se.originalName}-${k}`))}),u.jsx("footer",{className:"pt-12 mt-auto text-center border-t-4 border-red-800/50 flex justify-center items-center",children:u.jsx("p",{className:"text-6xl text-red-500 font-mono font-bold",children:"AFK Arena - Gremio HISPANIA ID: 7642"})})]})},oe=async(me,Se)=>{if(!d.current)return;const k=d.current;try{k.style.position="fixed",k.style.top="0",k.style.left="0",k.style.transform="none",k.style.zIndex="10000",k.style.visibility="visible",await new Promise(J=>setTimeout(J,1e3));const se=await WE(k,{quality:1,pixelRatio:2,width:1440,height:2560,cacheBust:!0}),ye=document.createElement("a"),de=new Date().toISOString().slice(0,10),be=ie.toLowerCase().replace(/[^a-z0-9]+/g,"-"),E=Se>1?`-pagina-${me}-de-${Se}`:"";ye.download=`hispania-prioridad-${be}${E}-${de}.png`,ye.href=se,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),k.style.position="fixed",k.style.top="-99999px",k.style.left="0",k.style.transform="none",k.style.visibility="hidden"}catch(se){throw console.error("Error capturing:",se),se}},Y=async()=>{const me=Math.ceil(i.length/Fa);if(me>1){_(me),N(!0);return}y(!0),O(""),ee(0);try{await oe(1,1)}catch(Se){console.error("Error generating infographic:",Se),alert(`Error al generar la infografa: ${Se instanceof Error?Se.message:"Error desconocido"}`)}finally{y(!1)}},ge=async()=>{N(!1),y(!0);try{for(let me=0;me<C;me++){O(`Generando pgina ${me+1} de ${C}...`);const Se=i.slice(me*Fa,(me+1)*Fa);ee(me),H(Se),await new Promise(k=>setTimeout(k,500)),await oe(me+1,C)}}catch(me){console.error("Error generating multi-page infographic:",me),alert(`Error al generar la infografa: ${me instanceof Error?me.message:"Error desconocido"}`)}finally{y(!1),O(""),H(i),ee(0)}};return u.jsxs("div",{className:"flex flex-col items-center relative",children:[u.jsxs("div",{className:"w-full flex justify-between items-center mb-4 px-2",children:[u.jsxs("button",{onClick:t,className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-md flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-arrow-left"})," Volver"]}),u.jsxs("button",{onClick:Y,disabled:x||i.length===0,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center gap-2 disabled:bg-gray-500 disabled:cursor-not-allowed",children:[x&&u.jsx($t,{className:"h-5 w-5"}),x?M||"Generando...":"Descargar Infografa"]})]}),i.length===0?u.jsx("div",{className:"w-full aspect-[9/16] bg-gray-800 rounded-lg flex items-center justify-center text-gray-400",children:u.jsx("p",{children:"No hay hroes que coincidan con los filtros para generar una infografa."})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:p,className:"w-full aspect-[9/16] shadow-2xl rounded-lg overflow-hidden",children:u.jsx("div",{ref:r,className:"w-[1440px] h-[2560px] bg-gradient-to-br from-gray-900 to-gray-800 p-20 flex flex-col transform origin-top-left",style:{transform:`scale(${h})`},children:V()})}),u.jsx("div",{ref:d,className:"w-[1440px] h-[2560px] bg-gradient-to-br from-gray-900 to-gray-800 p-20 flex flex-col",style:{position:"fixed",top:"-99999px",left:"0",visibility:"hidden",pointerEvents:"none"},children:V()})]}),u.jsxs(mi,{isOpen:S,onClose:()=>N(!1),onConfirm:ge,title:"Generacin de Mltiples Infografas",children:[u.jsxs("p",{children:["Tu seleccin de ",i.length," hroes es demasiado grande para una sola imagen."]}),u.jsxs("p",{className:"mt-2",children:["Se generarn y descargarn ",u.jsxs("span",{className:"font-bold text-red-400",children:[C," infografas"]})," para mostrarlos a todos de forma legible."]}),u.jsx("p",{className:"mt-4 font-bold",children:"Deseas continuar?"})]})]})};var lA=sh();const lc=zu(lA),aA=({faction:i,className:t})=>{if(i==="Desconocida")return u.jsx("div",{className:`flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0 ${t}`,title:"Faccin Desconocida",children:"?"});const l="https://ik.imagekit.io/optimizerhispania/",a=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!a)return null;const r=`${l}${a}.png`;return u.jsx("img",{src:r,alt:i,title:i,className:`flex-shrink-0 ${t}`})},oA=i=>{switch(i){case"SSS":return"bg-blue-600 text-white";case"SS":return"bg-green-700 text-white";case"S":return"bg-lime-600 text-black";case"A":return"bg-yellow-500 text-black";case"B":return"bg-orange-600 text-white";case"C":return"bg-red-700 text-white";case"D":return"bg-amber-800 text-white";default:return"bg-gray-600 text-white"}},rA=({isOpen:i,onClose:t,database:l,onConfirm:a})=>{const[r,d]=w.useState({key:"score",direction:"desc"}),[p,x]=w.useState(""),[y,h]=w.useState(new Set),v=w.useMemo(()=>{let H=l.filter(M=>!M.isHidden);if(p){const M=p.toLowerCase();H=H.filter(O=>O.spanishName.toLowerCase().includes(M)||O.russianName.toLowerCase().includes(M))}return H.sort((M,O)=>{let j=M[r.key],ee=O[r.key];if(r.key==="tier"){const ie={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7,"N/A":99};j=ie[M.tier]||99,ee=ie[O.tier]||99}else typeof j=="string"&&(j=j.toLowerCase());return typeof ee=="string"&&(ee=ee.toLowerCase()),j<ee?r.direction==="asc"?-1:1:j>ee?r.direction==="asc"?1:-1:0}),H},[l,r,p]),S=H=>{d(M=>({key:H,direction:M.key===H&&M.direction==="asc"?"desc":"asc"}))},N=H=>{h(M=>{const O=new Set(M);return O.has(H)?O.delete(H):O.add(H),O})},C=()=>{y.size===v.length?h(new Set):h(new Set(v.map(H=>H.key)))},_=()=>{const M=l.filter(O=>y.has(O.key)).map(O=>({name:O.spanishName||O.key,faction:O.faction,comments:O.rankingComments,tier:O.tier,score:O.score,originalName:O.key,isNameTranslated:!!O.spanishName,isFactionTranslated:!0,commentIsTranslated:!!O.rankingCommentIsTranslated,isAwakened:O.isAwakened}));a(M),h(new Set)};if(!i)return null;const U=y.size>0&&y.size===v.length;return lc.createPortal(u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-gray-700/80 w-full max-w-5xl mx-4 max-h-[90vh] flex flex-col",onClick:H=>H.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Seleccionar Hroes para Infografa"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Elige los hroes que quieres incluir. Se ordenarn por puntuacin en la imagen final."})]}),u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:p,onChange:H=>x(H.target.value),className:"bg-gray-900/50 border border-gray-700/50 rounded-md pl-10 pr-4 py-2 text-white w-full sm:w-72 focus:ring-2 focus:ring-red-500 focus:outline-none"})]})]}),u.jsx("div",{className:"flex-grow overflow-auto",children:u.jsxs("table",{className:"min-w-full text-sm text-left",children:[u.jsx("thead",{className:"sticky top-0 z-10 bg-gray-800",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3 w-px text-center",children:u.jsx("input",{type:"checkbox",checked:U,onChange:C,className:"h-4 w-4 rounded bg-gray-600 border-gray-500 text-red-500 focus:ring-red-500"})}),u.jsx("th",{className:"p-3",children:"Hroe"}),u.jsxs("th",{className:"p-3 cursor-pointer hover:bg-gray-700/50",onClick:()=>S("russianName"),children:["Nombre Ruso ",r.key==="russianName"&&(r.direction==="asc"?"":"")]}),u.jsxs("th",{className:"p-3 cursor-pointer hover:bg-gray-700/50",onClick:()=>S("tier"),children:["Tier ",r.key==="tier"&&(r.direction==="asc"?"":"")]}),u.jsxs("th",{className:"p-3 cursor-pointer hover:bg-gray-700/50",onClick:()=>S("score"),children:["Puntuacin ",r.key==="score"&&(r.direction==="asc"?"":"")]})]})}),u.jsx("tbody",{children:v.map(H=>u.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30 cursor-pointer",onClick:()=>N(H.key),children:[u.jsx("td",{className:"p-2 align-middle text-center",children:u.jsx("input",{type:"checkbox",readOnly:!0,checked:y.has(H.key),className:"h-4 w-4 rounded bg-gray-600 border-gray-500 text-red-500 focus:ring-red-500 pointer-events-none"})}),u.jsx("td",{className:"p-2",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Rt,{heroName:H.spanishName,className:"h-10 w-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:H.spanishName}),u.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[u.jsx(aA,{faction:H.faction,className:"w-4 h-4"}),u.jsx("span",{children:H.faction})]})]})]})}),u.jsx("td",{className:"p-2 align-middle text-gray-400",children:H.russianName}),u.jsx("td",{className:"p-2 align-middle",children:u.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-bold ${oA(H.tier)}`,children:H.tier})}),u.jsx("td",{className:"p-2 align-middle font-mono font-bold text-cyan-400",children:H.score.toFixed(2)})]},H.key))})]})}),u.jsxs("footer",{className:"bg-gray-900/50 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[u.jsxs("div",{className:"text-white font-semibold",children:[y.size," hroe(s) seleccionado(s)"]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:t,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-md",children:"Cancelar"}),u.jsx("button",{onClick:_,disabled:y.size===0,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md disabled:bg-gray-500 disabled:cursor-not-allowed",children:"Generar Infografa"})]})]})]}),u.jsx("style",{children:`
                    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                `})]}),document.body)},uA={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7,"N/A":99},cA=Object.keys(uA).filter(i=>i!=="N/A"),dA=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500"};case"C":return{textClass:"text-white",bgClass:"bg-red-600"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700"}}},fA=({database:i,setDatabase:t,onSync:l,isSyncing:a,lastSync:r})=>{const[d,p]=w.useState(null),[x,y]=w.useState(new Set),[h,v]=w.useState(new Set),[S,N]=w.useState(!1),[C,_]=w.useState(null),[U,H]=w.useState("card"),[M,O]=w.useState(!0),[j,ee]=w.useState(!1),[ie,ue]=w.useState(!1),[D,Q]=w.useState(null),$=w.useMemo(()=>i.filter(de=>!de.isHidden).map(de=>({name:de.spanishName||de.key,faction:de.faction,comments:de.rankingComments,tier:de.tier,score:de.score,originalName:de.key,isNameTranslated:!!de.spanishName&&!de.key.startsWith("nuevo-heroe-"),isFactionTranslated:!0,commentIsTranslated:!!de.rankingCommentIsTranslated,isAwakened:de.isAwakened})),[i]),V=w.useMemo(()=>{if($.length===0)return[];const de=["Celestial","Hipogeo","Dimensional","Draconis","Lightbearer","Mauler","Wilder","Graveborn","Desconocida"],be=new Set($.map(E=>E.faction));return Array.from(be).sort((E,J)=>{const fe=de.indexOf(E),I=de.indexOf(J);return fe===-1?1:I===-1?-1:fe-I})},[$]),oe=w.useCallback(async de=>{const be=i.findIndex(E=>E.key===de);if(!(be===-1||i[be].rankingCommentIsTranslated)){_(de);try{const E=i[be].rankingComments,J=await Lh(E);t(fe=>{const I=[...fe],K=I.findIndex(te=>te.key===de);return K>-1&&(I[K]={...I[K],rankingComments:J,rankingCommentIsTranslated:!0}),I})}catch(E){p(`No se pudo traducir el comentario para ${i[be].spanishName}.`),console.error(E)}finally{_(null)}}},[i,t]),Y=w.useCallback(de=>{y(be=>{const E=new Set(be);return E.has(de)?E.delete(de):E.add(de),E})},[]),ge=w.useCallback(de=>{v(be=>{const E=new Set(be);return E.has(de)?E.delete(de):E.add(de),E})},[]),me=w.useMemo(()=>$.filter(de=>(S?de.isAwakened:!0)&&(x.size===0||x.has(de.faction))&&(h.size===0||h.has(de.tier))),[$,S,x,h]),Se=w.useMemo(()=>[...me].sort((de,be)=>be.score-de.score),[me]),k=x.size===0&&!S,se=de=>{ue(!1);const be=[...de].sort((E,J)=>J.score-E.score);Q(be),ee(!0)},ye=()=>{ee(!1),Q(null)};return u.jsxs("div",{children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700/80 mb-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Ranking de Hroes"}),r&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Datos actualizados: ",new Date(r).toLocaleString("es-ES")]})]}),u.jsxs("div",{className:"flex items-center flex-col sm:flex-row gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-2",role:"group","aria-label":"Filtro de faccin",children:[u.jsx("button",{onClick:()=>{y(new Set),N(!1)},"aria-pressed":k,className:`px-4 py-2 text-sm font-bold rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 ${k?"bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:"Todas"}),u.jsx("button",{onClick:()=>N(de=>!de),title:"Filtrar Hroes Despertados","aria-pressed":S,className:`awakened-button rounded-md transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-purple-400 w-12 h-12 flex items-center justify-center overflow-hidden hover:scale-110 mx-2 ${S?"bg-purple-900 active scale-110":"bg-gray-700"}`,children:u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/timegazer_card.webp",alt:"Filtro Hroes Despertados",className:"w-full h-full object-cover"})},"awakened-filter"),V.map(de=>{const be=x.has(de),E=x.size===0||be;return u.jsx("button",{onClick:()=>Y(de),title:de,"aria-pressed":be,className:`faction-button-hover p-1.5 rounded-full transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 hover:scale-125 hover:grayscale-0 hover:opacity-100 ${be?"bg-white/20 ring-2 ring-white":""} ${E?"":"grayscale opacity-60"}`,children:de==="Desconocida"?u.jsx("div",{className:"h-8 w-8 flex items-center justify-center bg-gray-700 rounded-full text-lg font-bold text-gray-400",title:"Faccin Desconocida",children:"?"}):(()=>{const J="https://ik.imagekit.io/optimizerhispania/",fe=de.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!fe)return null;const I=`${J}${fe}.png`;return u.jsx("img",{src:I,alt:de,className:"h-8 w-8"})})()},de)})]}),u.jsxs("button",{onClick:()=>l(!0),disabled:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center disabled:bg-gray-500 disabled:cursor-not-allowed",children:[a&&u.jsx($t,{className:"h-5 w-5 mr-2"}),a?"Actualizando...":"Actualizar"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 w-full pt-4 border-t border-gray-700/50",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 p-1 rounded-lg",role:"radiogroup","aria-label":"Modo de vista",children:[u.jsxs("button",{onClick:()=>{H("card"),ee(!1)},"aria-checked":U==="card"&&!j,role:"radio",className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-colors ${U==="card"&&!j?"bg-red-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[u.jsx("i",{className:"fas fa-id-card-alt"}),u.jsx("span",{children:"Detallada"})]}),u.jsxs("button",{onClick:()=>{H("compact"),ee(!1)},"aria-checked":U==="compact"&&!j,role:"radio",className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-colors ${U==="compact"&&!j?"bg-red-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[u.jsx("i",{className:"fas fa-th-large"}),u.jsx("span",{children:"Compacta"})]}),u.jsxs("button",{onClick:()=>{H("table"),ee(!1)},"aria-checked":U==="table"&&!j,role:"radio",className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-colors ${U==="table"&&!j?"bg-red-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[u.jsx("i",{className:"fas fa-table"}),u.jsx("span",{children:"Tabla"})]}),u.jsxs("button",{onClick:()=>{Q(null),ee(!0)},"aria-checked":j&&!D,role:"radio",className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-colors ${j&&!D?"bg-red-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[u.jsx("i",{className:"fas fa-image"}),u.jsx("span",{children:"Infografa"})]}),u.jsxs("button",{onClick:()=>ue(!0),"aria-checked":j&&!!D,role:"radio",className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-colors ${j&&D?"bg-red-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:[u.jsx("i",{className:"fas fa-pen-ruler"}),u.jsx("span",{children:"Custom"})]})]}),u.jsxs("div",{className:"flex items-center gap-x-6 flex-wrap justify-center",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Agrupar por Tier"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:M,onChange:()=>O(!M)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${M?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${M?"transform translate-x-4":""}`})]})]}),u.jsxs("div",{className:"flex items-center gap-1 bg-gray-900 p-1 rounded-lg",role:"group","aria-label":"Filtro de Tier",children:[u.jsx("button",{onClick:()=>v(new Set),className:`px-3 py-1 text-xs font-bold rounded-md transition-all duration-200 ${h.size===0?"bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:"Todos"}),cA.map(de=>{const{bgClass:be,textClass:E}=dA(de),J=h.has(de);return u.jsx("button",{onClick:()=>ge(de),className:`px-3 py-1 text-xs font-bold rounded-md transition-all duration-200 ${be} ${E} ${h.size>0&&!J?"opacity-50 grayscale":"opacity-100"} hover:opacity-100 hover:grayscale-0`,children:de},de)})]})]})]})]}),d&&u.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-md mb-6",children:d}),j?u.jsx(sA,{heroes:D||Se,onClose:ye,filters:{selectedFactions:x,showAwakenedOnly:S,selectedTiers:h},customTitle:D?"Infografa Personalizada":void 0}):u.jsx(aE,{heroes:$,factionFilter:x,awakenedFilter:S,tierFilter:h,onTranslateComment:oe,translatingHeroName:C,viewMode:U,isGrouped:M}),u.jsx(rA,{isOpen:ie,onClose:()=>ue(!1),database:i,onConfirm:se})]})},mA=i=>{const t=/spreadsheets\/d\/([a-zA-Z0-9-_]+)/,l=i.match(t);if(l&&l[1]){const a=l[1];return i.includes("/export?format=tsv")||i.includes("/gviz/tq")?i:`https://docs.google.com/spreadsheets/d/${a}/export?format=tsv`}return i},Kg=i=>i.trim().split(/\r?\n/).map(t=>t.trim()===""?[]:t.split("	").map(l=>l.trim().replace(/^"|"$/g,""))),Xg=i=>{if(!i||!i.trim())return{si:0,furniture:0,engravings:0,nodes:[]};let t=0,l=0,a=0,r=[];const d=i.match(/[e]/),p=d?d.index:-1,x=(p===-1?i:i.substring(0,p)).replace(/\D/g,"");if(x.length>=2&&(t=parseInt(x.substring(0,2),10)),x.length>=3&&(l=parseInt(x.substring(2,3),10)),p!==-1){let y=i.substring(p+1).trim();const h=y.match(/^\d+/);if(h){a=parseInt(h[0],10);const S=y.substring(h[0].length).trim().split(/->|>/).map(N=>N.trim()).filter(Boolean);for(const N of S){const C=ah[N];r.push({original:N,translated:C||"",found:!!C})}}}return{si:isNaN(t)?0:t,furniture:isNaN(l)?0:l,engravings:isNaN(a)?0:a,nodes:r}},pA=(i,t)=>{if(!i&&!t)return!1;if(!i||!t||i.length!==t.length)return!0;for(let l=0;l<i.length;l++)if(i[l].original!==t[l].original)return!0;return!1},gA=(i,t)=>{if(!i||!t)return i!==t;if(i.length!==t.length)return!0;const l=[...i].sort((r,d)=>r.group.localeCompare(d.group)),a=[...t].sort((r,d)=>r.group.localeCompare(d.group));for(let r=0;r<l.length;r++){const d=l[r],p=a[r];if(d.group!==p.group||d.priorityComment!==p.priorityComment||d.requiredSI!==p.requiredSI||d.requiredFurniture!==p.requiredFurniture||d.requiredEngravings!==p.requiredEngravings||d.isAlternative!==p.isAlternative||pA(d.engravingNodes,p.engravingNodes))return!0}return!1},hA=async i=>{const t=await fetch(Ey);if(!t.ok)throw new Error(`Failed to fetch translation data: ${t.statusText}`);const l=await t.text(),a=Kg(l).slice(1),r=new Map;a.forEach(h=>{var v,S,N,C;if(h.length>4){const _=(v=h[3])==null?void 0:v.trim(),U=(S=h[4])==null?void 0:S.trim(),H=(N=h[12])==null?void 0:N.trim(),M=((C=h[13])==null?void 0:C.trim().toUpperCase())==="TRUE";U&&r.set(U,{translatedName:_||"",faction:H||"Desconocida",isAwakened:M})}});const d=await fetch(i);if(!d.ok)throw new Error(`Failed to fetch main sheet data: ${d.statusText}`);const p=await d.text(),x=Kg(p).slice(1),y=new Map;return x.forEach(h=>{var ee,ie,ue,D,Q,$;const v=(ee=h[3])==null?void 0:ee.trim();if(!v)return;const S=r.get(v),N=(S==null?void 0:S.translatedName)||"",C=(S==null?void 0:S.faction)||"Desconocida",_=(S==null?void 0:S.isAwakened)??!1,U=((ie=h[9])==null?void 0:ie.trim())||"0",H=parseFloat(U.replace(",","."))||0,M=(ue=h[8])==null?void 0:ue.trim();let O=y.get(v);O||(O={key:v,russianName:v,spanishName:N,faction:C,isAwakened:_,tier:"N/A",score:0,rankingComments:"",builds:[]},y.set(v,O)),M!==""&&(O.tier=M,O.score=H,O.rankingComments=((D=h[7])==null?void 0:D.trim())||"");const j=(Q=h[5])==null?void 0:Q.trim();if(M&&M!=="I"&&j){const V=(($=h[7])==null?void 0:$.trim())||"",oe=(Y,ge,me,Se)=>{let k=Y.trim();ge&&me!==void 0&&(k.startsWith("e")||k.startsWith(""))&&(k=`${String(me).padStart(2,"0")}${me===30?"9":"0"}${k}`);const se=Xg(k);return{group:M,priorityComment:V,requiredSI:se.si,requiredFurniture:se.furniture,requiredEngravings:se.engravings,engravingNodes:Se||se.nodes,isAlternative:ge}};if(j.includes("/")){const Y=j.split("/"),ge=Y[Y.length-1],me=Xg(ge).nodes,[Se,...k]=Y,se=oe(Se,!1,void 0,me);se&&O.builds.push(se),k.forEach(ye=>{const de=oe(ye,!0,se==null?void 0:se.requiredSI,me);de&&O.builds.push(de)})}else{const Y=oe(j,!1,void 0,void 0);Y&&O.builds.push(Y)}}}),a.forEach(h=>{var v,S,N,C;if(h.length>4){const _=((v=h[3])==null?void 0:v.trim())||"",U=(S=h[4])==null?void 0:S.trim(),H=((N=h[12])==null?void 0:N.trim())||"Desconocida",M=((C=h[13])==null?void 0:C.trim().toUpperCase())==="TRUE";if(U){if(!y.has(U)){const O={key:U,russianName:U,spanishName:_,faction:H,isAwakened:M,tier:"N/A",score:0,rankingComments:"",builds:[]};y.set(U,O)}}else if(_&&!Array.from(y.values()).some(j=>j.spanishName.toLowerCase()===_.toLowerCase())){const j=`no-russian-name-${_.replace(/\s+/g,"-")}`,ee={key:j,russianName:"",spanishName:_,faction:H,isAwakened:M,tier:"N/A",score:0,rankingComments:"",builds:[]};y.set(j,ee)}}}),y},Xh=async(i,t)=>{const l=await hA(i),a=t.filter(x=>x.key.startsWith("nuevo-heroe-")),r=new Map(t.filter(x=>!x.key.startsWith("nuevo-heroe-")).map(x=>[x.key,x])),d=[],p=new Set;for(const[x,y]of l.entries()){let h=r.get(x),v=!1;if(!h){const S=a.find(N=>{var C,_,U,H;return!p.has(N.key)&&((C=N.spanishName)==null?void 0:C.trim().toLowerCase())===((_=y.spanishName)==null?void 0:_.trim().toLowerCase())&&((U=N.spanishName)==null?void 0:U.trim())!==""&&((H=N.spanishName)==null?void 0:H.trim())!=="Nuevo Hroe"});S&&(h=S,p.add(S.key),v=!0)}if(h){const S={...h,key:x,status:"active"},N={};let C=!1;Object.keys(y).forEach(_=>{if(_==="key")return;const U=h[_],H=y[_];(_==="builds"?gA(U,H):JSON.stringify(U)!==JSON.stringify(H))&&(N[_]=H,C=!0)}),v?(Object.assign(S,y),S.sourceData=void 0):S.sourceData=C?N:void 0,d.push(S)}else d.push({...y,portraitStatus:"pending",status:"active"})}for(const x of a)p.has(x.key)||d.push(x);for(const[x,y]of r.entries())l.has(x)||d.push({...y,status:"removed_from_source",sourceData:void 0});return d},Qh=()=>{try{const i={playerHeroData:JSON.parse(localStorage.getItem("player-hero-data")||"{}"),rosterNotes:JSON.parse(localStorage.getItem("roster-notes")||'""'),settings:JSON.parse(localStorage.getItem("afk-settings")||"{}"),heroesData:JSON.parse(localStorage.getItem("heroes-data")||"[]"),priorityHeroesData:JSON.parse(localStorage.getItem("priority-heroes-data")||"[]"),translationCache:JSON.parse(localStorage.getItem("comment-translations")||"{}")},t=JSON.stringify(i,null,2),l=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(l),r=document.createElement("a");r.href=a,r.download=`backup_hispania_afk_data_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),localStorage.setItem("last-manual-backup-date",JSON.stringify(new Date().toISOString()))}catch(i){throw console.error("Backup failed:",i),i}},xA=({navigate:i,settings:t,setSettings:l,lastSync:a,onSync:r,isSyncing:d})=>{const[p,x]=lt("last-manual-backup-date",null),[y,h]=w.useState(t.sheetUrl),[v,S]=w.useState(!t.cloudConfigured),[N,C]=w.useState(!1),[_,U]=w.useState(null),[H,M]=w.useState(!1),O=w.useCallback(async()=>{C(!0),U(null);const ue=mA(y);h(ue);try{const D=t.sheetUrl;l(Q=>({...Q,sheetUrl:ue})),await Xh(ue,[]),U({status:"success",message:"Conexin exitosa! La URL ha sido guardada."}),await r(!0)}catch(D){console.error("Test connection failed:",D),U({status:"error",message:"Fall la conexin. Revisa la URL y los permisos de la hoja."}),l(Q=>({...Q,sheetUrl:Q.sheetUrl}))}finally{C(!1)}},[y,l,t.sheetUrl,r]),j=()=>{try{Qh();const ue=localStorage.getItem("last-manual-backup-date");ue&&x(JSON.parse(ue))}catch(ue){console.error("Backup failed:",ue),alert("No se pudo crear la copia de seguridad. Revisa la consola para ms detalles.")}},ee=ue=>{var Q;const D=(Q=ue.target.files)==null?void 0:Q[0];if(D){const $=new FileReader;$.onload=V=>{var oe;try{const Y=(oe=V.target)==null?void 0:oe.result,ge=JSON.parse(Y);if(typeof ge.settings!="object"||!ge.heroDatabase)throw new Error("El archivo no parece ser una copia de seguridad vlida y actualizada.");localStorage.clear(),localStorage.setItem("hero-database",JSON.stringify(ge.heroDatabase)),localStorage.setItem("afk-settings",JSON.stringify(ge.settings)),ge.playerHeroData&&localStorage.setItem("player-hero-data",JSON.stringify(ge.playerHeroData)),ge.furniturePriorityData&&localStorage.setItem("furniture-priority-data",JSON.stringify(ge.furniturePriorityData)),alert("Copia de seguridad restaurada con xito. La pgina se recargar para aplicar los cambios."),window.location.reload()}catch(Y){console.error("Restore error:",Y),alert(`Error al restaurar: ${Y instanceof Error?Y.message:"Error desconocido."}`)}},$.readAsText(D),ue.target.value=""}},ie=()=>{try{localStorage.clear(),sessionStorage.clear(),M(!1),alert("Todos los datos locales han sido borrados. La pgina se recargar."),window.location.reload()}catch(ue){console.error("Failed to clear data:",ue),alert("Hubo un error al limpiar los datos."),M(!1)}};return u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Opciones"}),v&&u.jsxs("div",{className:"bg-sky-900 border border-sky-700 text-sky-100 px-4 py-3 rounded-md mb-6 flex justify-between items-center",children:[u.jsx("p",{children:" Para proteger tus datos, considera configurar una copia de seguridad en la nube."}),u.jsx("button",{onClick:()=>S(!1),className:"text-xl font-bold",children:""})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Fuente de Datos"}),u.jsx("label",{htmlFor:"sheetUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"URL de la Hoja de Clculo de Google"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[u.jsx("input",{type:"text",id:"sheetUrl",value:y,onChange:ue=>h(ue.target.value),className:"flex-grow bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-red-500"}),u.jsxs("button",{onClick:O,disabled:N||d,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center justify-center disabled:bg-gray-500",children:[(N||d)&&u.jsx($t,{className:"h-5 w-5 mr-2"}),N?"Probando...":d?"Sincronizando...":"Guardar y Probar"]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Puedes pegar la URL completa de tu navegador. La convertiremos automticamente al formato correcto."}),u.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4 flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-300",children:"ltima sincronizacin:"}),u.jsx("span",{className:"font-medium text-gray-100",children:a?new Date(a).toLocaleString("es-ES"):"Nunca"})]}),u.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4 flex items-center justify-between",children:[u.jsx("span",{className:"text-gray-300",children:"Actualizar datos al iniciar"}),u.jsx("label",{htmlFor:"auto-update-toggle",className:"flex items-center cursor-pointer",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",id:"auto-update-toggle",className:"sr-only",checked:t.autoUpdate,onChange:ue=>l(D=>({...D,autoUpdate:ue.target.checked}))}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${t.autoUpdate?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${t.autoUpdate?"transform translate-x-4":""}`})]})})]}),_&&u.jsx("div",{className:`mt-3 text-sm p-3 rounded-md ${_.status==="success"?"bg-green-900 text-green-200":"bg-red-900 text-red-200"}`,children:_.message})]}),u.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-yellow-600/50 shadow-lg",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4 text-yellow-400",children:"Modo Avanzado"}),u.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Modifica directamente la base de datos local de hroes, gestiona conflictos de datos y aade nuevos hroes manualmente."}),u.jsxs("button",{onClick:()=>i("database"),className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-4 rounded-md flex items-center justify-center gap-2 text-base",children:[u.jsx("i",{className:"fas fa-database"}),u.jsx("span",{children:"Ir a la Base de Datos de Hroes"})]})]}),u.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Gestin de Datos"}),u.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Crea un archivo de respaldo con todo el progreso de tus hroes, notas y configuraciones. Puedes usar este archivo para restaurar tus datos en este u otro dispositivo."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"border-t border-gray-700 pt-4 flex flex-col sm:flex-row gap-4",children:[u.jsx("button",{onClick:j,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md",children:"Guardar copia local"}),u.jsxs("label",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md cursor-pointer text-center",children:["Restaurar copia local",u.jsx("input",{type:"file",accept:".json",onChange:ee,className:"hidden"})]})]}),u.jsxs("div",{className:"text-sm text-gray-400 text-center",children:["ltima copia guardada: ",p?new Date(p).toLocaleString("es-ES"):"Nunca"]}),u.jsx("div",{className:"border-t border-gray-700 pt-4",children:u.jsx("button",{onClick:()=>M(!0),className:"w-full bg-red-800 hover:bg-red-900 text-white font-bold py-2 px-4 rounded-md",children:"Limpiar todos los datos locales"})})]})]}),u.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Nube Personal (Prximamente)"}),u.jsx("p",{className:"text-gray-400",children:"Esta funcin te permitir guardar tus datos en una nube personal para acceder a ellos desde cualquier dispositivo. Actualmente en desarrollo."}),u.jsx("button",{className:"mt-4 w-full bg-gray-600 text-gray-400 font-bold py-2 px-4 rounded-md cursor-not-allowed",children:"Configurar Nube"})]})]}),u.jsxs(mi,{isOpen:H,onClose:()=>M(!1),onConfirm:ie,title:"Confirmar Limpieza Total de Datos",children:[u.jsxs("p",{children:["Ests absolutamente seguro de que quieres borrar ",u.jsx("span",{className:"font-bold text-red-400",children:"TODOS"})," los datos locales?"]}),u.jsx("p",{className:"mt-2",children:"Esta accin eliminar permanentemente:"}),u.jsxs("ul",{className:"list-disc list-inside text-gray-400 mt-2",children:[u.jsx("li",{children:"La base de datos de hroes."}),u.jsx("li",{children:"El progreso de tu Roster de Hroes."}),u.jsx("li",{children:"Todas las configuraciones de la aplicacin."})]}),u.jsx("p",{className:"mt-4 font-bold",children:"Esta accin no se puede deshacer."})]})]})},Zh=[{tier:1,label:"T1",style:"bg-cyan-500 text-white"},{tier:2,label:"T2",style:"bg-violet-500 text-white"},{tier:3,label:"T3",style:"bg-yellow-500 text-black"},{tier:4,label:"T4",style:"bg-red-600 text-white"}],Al={power:{label:"Poder",icon:"fas fa-bolt"},score:{label:"Puntuacin",icon:"fas fa-trophy"},progressPercentage:{label:"Progreso",icon:"fas fa-percent"}},yA=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-sm font-bold text-gray-400 flex-shrink-0",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!l)return null;const a=`${t}${l}.png`;return u.jsx("img",{src:a,alt:i,title:i,className:"h-6 w-6 flex-shrink-0"})},vA=i=>{switch(i){case"SSS":return"border-blue-400";case"SS":return"border-green-500";case"S":return"border-lime-300";case"A":return"border-yellow-300";case"B":return"border-orange-400";case"C":return"border-red-500";case"D":return"border-amber-700";default:return"border-gray-600"}},SA=i=>i>=100?"bg-gradient-to-r from-teal-400 to-cyan-500":i>75?"bg-gradient-to-r from-lime-400 to-green-500":i>40?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-600",bA=i=>i>=200?"text-sky-200 silver-power-glow":i>=150?"text-red-400 red-power-glow":i>=100?"text-yellow-400":"text-white",NA=({tier:i})=>{const t=r=>{switch(r){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500"};case"C":return{textClass:"text-white",bgClass:"bg-red-600"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700"}}},{textClass:l,bgClass:a}=t(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${a} px-2 py-0.5 shadow-sm`,children:u.jsx("span",{className:`block transform skew-x-12 text-center text-xs font-bold tracking-wider ${l}`,children:i})})},TA=({data:i})=>{const{si:t=0,furniture:l=0,engravings:a=0}=i||{},r=[t>0&&{key:"si",className:"text-cyan-400",text:`SI${t}`},l>0&&{key:"f",className:"text-lime-400",text:`${l}F`},a>0&&{key:"e",className:"text-yellow-400",text:`E${a}`}].filter(Boolean);return r.length===0?u.jsx("div",{className:"text-2xl font-bold font-mono text-gray-600",children:"-"}):u.jsx("div",{className:"flex items-baseline justify-center gap-2 text-2xl font-bold font-mono",children:r.map(d=>u.jsx("span",{className:d.className,children:d.text},d.key))})},CA=({tier:i})=>{if(!i||i===0)return null;const t=Zh.find(l=>l.tier===i);return t?u.jsx("div",{className:`px-2.5 py-1 text-xs font-bold rounded-md ${t.style}`,children:t.label}):null},Ya=({value:i,onChange:t,options:l,allowManualInput:a=!1,disabled:r=!1})=>u.jsxs("div",{className:`flex flex-col items-center space-y-2 ${r?"opacity-50":""}`,children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:l.map(d=>u.jsx("button",{onClick:()=>t(d),disabled:r,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors w-9 ${i===d?"bg-red-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"} ${r?"cursor-not-allowed":""}`,children:d},d))}),a&&u.jsx("input",{type:"number",value:i,disabled:r,onChange:d=>t(parseInt(d.target.value,10)||0),className:`w-20 bg-gray-900 border border-gray-600 rounded-md px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-red-500 text-center ${r?"cursor-not-allowed":""}`,min:"0",step:"1"})]}),EA=({hero:i,onSelect:t,isBulkEditMode:l,isSelectedForBulk:a,onToggleSelection:r})=>{const d=()=>{l?r(i.originalName):t(i)};return u.jsxs("div",{onClick:d,className:`group bg-gradient-to-br from-gray-800 to-gray-900 p-3 rounded-xl border flex items-center gap-3 transition-all duration-300 relative ${i.pData.owned?"":"filter grayscale opacity-60"} ${a?"border-blue-500 shadow-[0_0_25px_5px_rgba(59,130,246,0.4)]":"border-gray-700/80 hover:border-red-600/60 hover:shadow-[0_0_25px_5px_rgba(239,68,68,0.4)] cursor-pointer"}`,children:[l&&u.jsx("div",{className:"absolute top-3 left-3 z-20",children:u.jsx("input",{type:"checkbox",className:"h-5 w-5 bg-gray-700 border-gray-500 rounded text-red-600 focus:ring-red-500 cursor-pointer",checked:a,onChange:()=>r(i.originalName)})}),u.jsx("div",{className:`w-20 h-20 bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center border-4 ${vA(i.group)} overflow-hidden shadow-inner`,children:u.jsx(Rt,{heroName:i.name,className:"h-full w-full"})}),u.jsxs("div",{className:"flex-grow flex flex-col justify-between self-stretch gap-1 w-full overflow-hidden",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(yA,{faction:i.faction}),u.jsx("h3",{className:`text-lg font-bold truncate ${i.isNameTranslated?"text-white":"text-red-400"}`,children:i.name})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full",children:[u.jsx(NA,{tier:i.group}),u.jsxs("div",{className:"w-full bg-gray-900/70 shadow-inner ring-1 ring-black/20 rounded-full h-4 relative overflow-hidden flex-grow",children:[u.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${SA(i.progressPercentage)}`,style:{width:`${Math.min(i.progressPercentage,100).toFixed(1)}%`}}),u.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-[10px] font-bold text-white text-shadow-dark",children:[i.progressPercentage.toFixed(1),"%"]})]})]}),u.jsxs("div",{className:"relative flex justify-center items-center w-full my-1",children:[u.jsx(TA,{data:i.pData}),u.jsx("div",{className:"absolute right-0",children:u.jsx(CA,{tier:i.pData.armorTier??0})})]}),u.jsxs("div",{className:"grid grid-cols-2 items-center w-full text-xs text-gray-400 border-t border-gray-700/50 pt-1",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:"text-gray-400",children:"Puntuacin: "}),u.jsx("span",{className:"text-xl font-bold text-cyan-400",children:i.score.toFixed(2)}),u.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",(i.score/7*100).toFixed(0),"%)"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"text-gray-400",children:"Poder: "}),u.jsxs("span",{className:`text-xl font-bold ${bA(i.power)}`,children:[i.power.toFixed(1),"%"]})]})]})]})]})},AA=({isOpen:i,onClose:t})=>i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]","aria-modal":"true",role:"dialog",onClick:t,children:u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-gray-700/80 text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-lg mx-4 animate-[slide-up_0.4s_ease-out]",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-800",children:u.jsx("i",{className:"fas fa-lightbulb text-xl text-red-300"})}),u.jsx("div",{children:u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Glosario de Mtricas"})})]}),u.jsxs("div",{className:"mt-6 space-y-4 text-gray-300",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-lg text-white flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-bolt text-yellow-400 w-4 text-center"})," Poder"]}),u.jsxs("p",{className:"mt-1 pl-7 border-l-2 border-gray-700 ml-2",children:["El Poder es un ndice que representa la inversin total en un hroe. Se calcula promediando el progreso en SI, Muebles y Grabados. Un ",u.jsx("strong",{children:"100%"})," corresponde a una inversin de ",u.jsx("strong",{children:"309e60"}),". Valores superiores indican inversiones adicionales (ej. SI+40, E80)."]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-lg text-white flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-trophy text-cyan-400 w-4 text-center"})," Puntuacin"]}),u.jsx("p",{className:"mt-1 pl-7 border-l-2 border-gray-700 ml-2",children:"La Puntuacin se basa en la hoja de clculo de la comunidad rusa. Refleja la utilidad general del hroe en diversos modos de juego (Campaa, Torre, PvP, etc.). Una puntuacin ms alta indica un hroe ms verstil y poderoso."})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-lg text-white flex items-center gap-2",children:[u.jsx("i",{className:"fas fa-percent text-lime-400 w-4 text-center"})," Progreso"]}),u.jsxs("p",{className:"mt-1 pl-7 border-l-2 border-gray-700 ml-2",children:["El Progreso mide qu tan cerca ests de completar la inversin mxima recomendada para un hroe segn la hoja de clculo. Un ",u.jsx("strong",{children:"100%"})," significa que has alcanzado o superado todas las metas sugeridas para ese personaje."]})]})]})]}),u.jsx("div",{className:"bg-gray-900/50 px-6 py-4 text-right",children:u.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-gray-600 shadow-sm px-5 py-2.5 bg-gray-700 text-base font-medium text-gray-200 hover:bg-gray-600",children:"Entendido"})})]})}):null,_A=({navigate:i,database:t,onSync:l,isSyncing:a,lastSync:r})=>{const[d,p]=lt("player-hero-data",{}),[x]=lt("furniture-priority-data",{}),[y,h]=lt("watchlist-slots",Array(5).fill(null)),[v,S]=w.useState(null),[N,C]=w.useState(null),[_,U]=w.useState([]),[H,M]=w.useState(!1),[O,j]=w.useState(!1),[ee,ie]=w.useState(""),[ue,D]=w.useState(new Set),[Q,$]=w.useState(!1),[V,oe]=w.useState(!1),[Y,ge]=w.useState(!1),[me,Se]=w.useState(null),[k,se]=w.useState({key:"power",direction:"desc"}),[ye,de]=w.useState(!1),be=w.useRef(null),[E,J]=w.useState(!1),[fe,I]=w.useState(new Set),[K,te]=w.useState(!1),[ce,Ee]=w.useState({si:{apply:!1,value:0},furniture:{apply:!1,value:0},engravings:{apply:!1,value:0},armorTier:{apply:!1,value:0}}),Ne=w.useCallback((q,Z)=>{const ae=di[q.group]||99,pe=di[Z.group]||99;if(ae!==pe)return ae-pe;if(q.isAlternative!==Z.isAlternative)return q.isAlternative?1:-1;if(Z.score!==q.score)return Z.score-q.score;if(q.isAlternative){if(q.requiredSI!==Z.requiredSI)return q.requiredSI-Z.requiredSI;if(q.requiredFurniture!==Z.requiredFurniture)return q.requiredFurniture-Z.requiredFurniture;if(q.requiredEngravings!==Z.requiredEngravings)return q.requiredEngravings-Z.requiredEngravings}return 0},[]),Ve=w.useMemo(()=>t.flatMap(q=>q.builds.map(Z=>({originalName:q.key,name:q.spanishName,faction:q.faction,isNameTranslated:!!q.spanishName,group:q.tier,priorityComment:Z.priorityComment,commentIsTranslated:!!Z.priorityCommentIsTranslated,score:q.score,requiredSI:Z.requiredSI,requiredFurniture:Z.requiredFurniture,requiredEngravings:Z.requiredEngravings,engravingNodes:Z.engravingNodes,isAlternative:Z.isAlternative,isAwakened:q.isAwakened}))),[t]);w.useEffect(()=>{const q=Z=>{be.current&&!be.current.contains(Z.target)&&de(!1)};return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[]);const Ae=w.useMemo(()=>{const q=new Map;return Ve.forEach(Z=>{q.has(Z.originalName)||q.set(Z.originalName,Z)}),Array.from(q.values())},[Ve]),L=w.useMemo(()=>{const q=new Map;return Ae.forEach(Z=>q.set(Z.originalName,Z.group)),q},[Ae]),ne=w.useCallback(q=>{const Z=Ve.filter(ae=>ae.originalName===q.originalName).sort(Ne);C(q),U(Z),M(!0)},[Ve,Ne]);w.useEffect(()=>{const q=sessionStorage.getItem("selected-roster-hero");if(q&&Ae.length>0){const Z=Ae.find(ae=>ae.originalName===q);if(Z){const ae=d[Z.originalName]||{owned:!0,si:0,furniture:0,engravings:0,armorTier:0};ne({...Z,power:0,pData:ae,progressPercentage:0})}sessionStorage.removeItem("selected-roster-hero")}},[Ae,d,ne]);const ve=w.useMemo(()=>{const q=new Map;return Ve.forEach(Z=>{const ae=q.get(Z.originalName)||{si:0,furniture:0,engravings:0};q.set(Z.originalName,{si:Math.max(ae.si,Z.requiredSI),furniture:Math.max(ae.furniture,Z.requiredFurniture),engravings:Math.max(ae.engravings,Z.requiredEngravings)})}),q},[Ve]),ke=w.useMemo(()=>{if(!Ae||Ae.length===0)return[];const q=["Celestial","Hipogeo","Dimensional","Draconis","Lightbearer","Mauler","Wilder","Graveborn","Desconocida"],Z=new Set(Ae.map(ae=>ae.faction));return Array.from(Z).sort((ae,pe)=>{const xe=q.indexOf(ae),Re=q.indexOf(pe);return xe===-1?1:Re===-1?-1:xe-Re})},[Ae]),Qe=q=>{D(Z=>{const ae=new Set(Z);return ae.has(q)?ae.delete(q):ae.add(q),ae})},Ue=q=>Se(Z=>Z===q?null:q),ht=ue.size===0&&!Q,xt=w.useMemo(()=>{let q=Ae;Q&&(q=q.filter(ae=>ae.isAwakened)),ue.size>0&&(q=q.filter(ae=>ae.faction&&ue.has(ae.faction))),V&&(q=q.filter(ae=>{var pe;return((pe=d[ae.originalName])==null?void 0:pe.owned)!==!1})),me!==null&&(q=q.filter(ae=>{var pe;return(((pe=d[ae.originalName])==null?void 0:pe.armorTier)??0)<me})),ee.trim()!==""&&(q=q.filter(ae=>ae.name.toLowerCase().includes(ee.trim().toLowerCase())));const Z=q.map(ae=>{const pe=d[ae.originalName]||{si:0,furniture:0,engravings:0,owned:!0,armorTier:0};let xe=pe.si<=30?pe.si/30*100:100+(pe.si-30)/10*100,Re=pe.furniture<=9?pe.furniture/9*100:100+(pe.furniture-9)/27*200,Oe=pe.engravings<=60?pe.engravings/60*100:100+(pe.engravings-60)/20*100;const an=pe.owned?(Math.min(xe,200)+Math.min(Re,300)+Math.min(Oe,200))/3:0,Tt=ve.get(ae.originalName)||{si:0,furniture:0,engravings:0},At=Tt.si>0?Math.min(pe.si/Tt.si,1):1,mn=Tt.furniture>0?Math.min(pe.furniture/Tt.furniture,1):1,_t=Tt.engravings>0?Math.min(pe.engravings/Tt.engravings,1):1,oo=(At+mn+_t)/3*100;return{...ae,power:an,pData:pe,progressPercentage:oo}}).filter(ae=>!Y||ae.progressPercentage<100);return Z.sort((ae,pe)=>{let xe=0;return ae[k.key]<pe[k.key]?xe=-1:ae[k.key]>pe[k.key]&&(xe=1),xe!==0?k.direction==="asc"?xe:-xe:k.key!=="power"&&pe.power!==ae.power?pe.power-ae.power:k.key!=="score"&&pe.score!==ae.score?pe.score-ae.score:ae.name.localeCompare(pe.name)}),Z},[Ae,d,ee,ue,Q,V,Y,ve,me,k]),dn=w.useCallback((q,Z)=>{p(ae=>({...ae,[q]:Z})),M(!1)},[p]),fn=()=>{J(q=>!q),I(new Set)},Ds=q=>{I(Z=>{const ae=new Set(Z);return ae.has(q)?ae.delete(q):ae.add(q),ae})},gi=()=>{p(q=>{const Z={...q};return fe.forEach(ae=>{const xe={...Z[ae]||{owned:!0,si:0,furniture:0,engravings:0,armorTier:0}};ce.si.apply&&(xe.si=ce.si.value),ce.furniture.apply&&(xe.furniture=ce.furniture.value),ce.engravings.apply&&(xe.engravings=ce.engravings.value),ce.armorTier.apply&&(xe.armorTier=ce.armorTier.value),Z[ae]=xe}),Z}),te(!1),I(new Set),J(!1)},z=(q,Z,ae)=>{Ee(pe=>({...pe,[q]:{...pe[q],[Z]:ae}}))};return a&&t.length===0?u.jsxs("div",{className:"text-center py-20",children:[u.jsx($t,{className:"h-12 w-12 mx-auto text-red-500"}),u.jsx("p",{className:"mt-4 text-lg",children:"Cargando lista de hroes..."})]}):v?u.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-md mb-6",children:v}):u.jsxs("div",{children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700/80 mb-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Edicin de Roster"}),r&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Fuente actualizada: ",new Date(r).toLocaleString("es-ES")]})]}),u.jsxs("div",{className:"flex items-center flex-col sm:flex-row gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-2",role:"group","aria-label":"Filtro de faccin y armadura",children:[u.jsxs("div",{className:"flex items-center gap-2",role:"group","aria-label":"Filtro de armadura",children:[u.jsx("span",{className:"text-sm text-gray-400 mr-1 shrink-0",children:"Armadura <"}),Zh.map(q=>u.jsx("button",{onClick:()=>Ue(q.tier),title:`Mostrar hroes con armadura menor a T${q.tier}`,className:`px-3 py-1 text-xs font-semibold rounded-md transition-all duration-200 ${q.style} ${me===q.tier?"":"filter grayscale opacity-60"}`,children:q.label},q.tier))]}),u.jsx("div",{className:"border-l border-gray-600 h-8 mx-2"}),u.jsx("button",{onClick:()=>{D(new Set),$(!1)},"aria-pressed":ht,className:`px-4 py-2 text-sm font-bold rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 ${ht?"bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:"Todas"}),u.jsx("button",{onClick:()=>$(q=>!q),title:"Filtrar Hroes Despertados","aria-pressed":Q,className:`awakened-button rounded-md transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-purple-400 w-12 h-12 flex items-center justify-center overflow-hidden hover:scale-110 mx-2 ${Q?"bg-purple-900 active scale-110":"bg-gray-700"}`,children:u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/timegazer_card.webp",alt:"Filtro Hroes Despertados",className:"w-full h-full object-cover"})},"awakened-filter"),ke.map(q=>{const Z=ue.has(q),ae=ht||Z;return u.jsx("button",{onClick:()=>Qe(q),title:q,"aria-pressed":Z,className:`faction-button-hover p-1.5 rounded-full transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 hover:scale-125 hover:grayscale-0 hover:opacity-100 ${Z?"bg-white/20 ring-2 ring-white":""} ${ae?"":"grayscale opacity-60"}`,children:q==="Desconocida"?u.jsx("div",{className:"h-8 w-8 flex items-center justify-center bg-gray-700 rounded-full text-lg font-bold text-gray-400",title:"Faccin Desconocida",children:"?"}):(()=>{const pe="https://ik.imagekit.io/optimizerhispania/",xe=q.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!xe)return null;const Re=`${pe}${xe}.png`;return u.jsx("img",{src:Re,alt:q,className:"h-8 w-8"})})()},q)})]}),u.jsxs("button",{onClick:()=>l(!0),disabled:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center disabled:bg-gray-500 disabled:cursor-not-allowed flex-shrink-0",children:[a&&u.jsx($t,{className:"h-5 w-5 mr-2"}),"Actualizar"]})]})]}),u.jsxs("div",{className:"flex flex-col xl:flex-row items-center justify-between gap-4 w-full pt-4 border-t border-gray-700/50",children:[u.jsx("input",{type:"text",placeholder:"Buscar hroe...",value:ee,onChange:q=>ie(q.target.value),className:"bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white w-full sm:w-auto"}),u.jsxs("div",{className:"flex items-center gap-x-4 gap-y-2 flex-wrap justify-center",children:[u.jsxs("div",{className:"flex items-center gap-1 bg-gray-700 rounded-md p-1",children:[u.jsxs("div",{className:"relative",ref:be,children:[u.jsxs("button",{onClick:()=>de(q=>!q),className:"flex items-center gap-2 px-3 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors h-9",children:[u.jsx("i",{className:Al[k.key].icon}),u.jsx("span",{children:Al[k.key].label}),u.jsx("i",{className:"fas fa-chevron-down text-xs ml-1"})]}),ye&&u.jsx("div",{className:"absolute bottom-full mb-2 w-48 bg-gray-800 border border-gray-600 rounded-md shadow-lg z-20 animate-[fade-in-up_0.2s_ease-out]",children:Object.keys(Al).map(q=>u.jsxs("button",{onClick:()=>{se(Z=>({...Z,key:q})),de(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-200 hover:bg-red-600 hover:text-white",children:[u.jsx("i",{className:`${Al[q].icon} w-4 text-center`}),u.jsx("span",{children:Al[q].label})]},q))})]}),u.jsx("button",{onClick:()=>se(q=>({...q,direction:q.direction==="asc"?"desc":"asc"})),className:"px-3 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors h-9 flex items-center justify-center","aria-label":"Cambiar direccin de ordenacin",children:u.jsx("i",{className:`fas fa-arrow-${k.direction==="asc"?"up":"down"}`})}),u.jsx("button",{onClick:()=>j(!0),className:"bg-red-600 hover:bg-red-700 text-white font-bold px-3 rounded-md text-sm h-9 flex items-center justify-center",title:"Informacin sobre las mtricas",children:u.jsx("i",{className:"fas fa-lightbulb"})})]}),u.jsx("button",{onClick:fn,className:"bg-red-600 hover:bg-red-700 text-white font-bold px-4 rounded-md text-sm h-9 flex items-center justify-center",children:E?"Cancelar Edicin Masiva":"Activar Edicin Masiva"}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Ocultar completados"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:Y,onChange:()=>ge(!Y)}),u.jsx("div",{className:`block w-10 h-6 rounded-full ${Y?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${Y?"transform translate-x-4":""}`})]})]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Ocultar los que NO poseo"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:V,onChange:()=>oe(!V)}),u.jsx("div",{className:`block w-10 h-6 rounded-full ${V?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${V?"transform translate-x-4":""}`})]})]})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:xt.map(q=>u.jsx(EA,{hero:q,onSelect:ne,isBulkEditMode:E,isSelectedForBulk:fe.has(q.originalName),onToggleSelection:Ds},q.originalName))}),u.jsx(AA,{isOpen:O,onClose:()=>j(!1)}),u.jsx(Yu,{isOpen:H,onClose:()=>M(!1),onSave:dn,hero:N,playerData:N?d[N.originalName]:null,recommendedBuilds:_,maxInvestment:N?ve.get(N.originalName)??null:null,watchlistSlots:y,setWatchlistSlots:h,allHeroes:Ae,tierMap:L,navigate:i,priorities:x}),E&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900/95 border-t border-gray-700 shadow-2xl p-4 z-40 animate-[slide-in-up_0.3s_ease-out]",children:u.jsxs("div",{className:"container mx-auto flex flex-col xl:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{className:"text-center xl:text-left",children:[u.jsxs("h3",{className:"text-lg font-bold text-white",children:[fe.size," hroe(s) seleccionado(s)"]}),u.jsx("button",{onClick:()=>I(new Set),className:"text-sm text-red-400 hover:underline",children:"Limpiar seleccin"})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"apply-si",checked:ce.si.apply,onChange:q=>z("si","apply",q.target.checked),className:"h-4 w-4 rounded text-red-600"}),u.jsx("label",{htmlFor:"apply-si",className:"text-sm font-medium text-gray-300",children:"SI"}),u.jsx(Ya,{value:ce.si.value,onChange:q=>z("si","value",q),options:[0,20,30,40],disabled:!ce.si.apply})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"apply-furn",checked:ce.furniture.apply,onChange:q=>z("furniture","apply",q.target.checked),className:"h-4 w-4 rounded text-red-600"}),u.jsx("label",{htmlFor:"apply-furn",className:"text-sm font-medium text-gray-300",children:"Muebles"}),u.jsx(Ya,{value:ce.furniture.value,onChange:q=>z("furniture","value",q),options:[0,3,9],disabled:!ce.furniture.apply})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"apply-eng",checked:ce.engravings.apply,onChange:q=>z("engravings","apply",q.target.checked),className:"h-4 w-4 rounded text-red-600"}),u.jsx("label",{htmlFor:"apply-eng",className:"text-sm font-medium text-gray-300",children:"Grabado"}),u.jsx(Ya,{value:ce.engravings.value,onChange:q=>z("engravings","value",q),options:[0,30,60],disabled:!ce.engravings.apply})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"apply-armor",checked:ce.armorTier.apply,onChange:q=>z("armorTier","apply",q.target.checked),className:"h-4 w-4 rounded text-red-600"}),u.jsx("label",{htmlFor:"apply-armor",className:"text-sm font-medium text-gray-300",children:"Armadura"}),u.jsx(Ya,{value:ce.armorTier.value,onChange:q=>z("armorTier","value",q),options:[0,1,2,3,4],disabled:!ce.armorTier.apply})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>te(!0),disabled:!Object.values(ce).some(q=>q.apply)||fe.size===0,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md text-sm disabled:bg-gray-500",children:"Aplicar Cambios"}),u.jsx("button",{onClick:fn,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-md text-sm",children:"Salir"})]})]})}),u.jsxs(mi,{isOpen:K,onClose:()=>te(!1),onConfirm:gi,title:"Confirmar Edicin Masiva",children:[u.jsxs("p",{children:["Ests a punto de aplicar los siguientes cambios a ",u.jsxs("span",{className:"font-bold text-white",children:[fe.size," hroe(s)"]}),":"]}),u.jsxs("ul",{className:"list-disc list-inside mt-2 text-gray-400",children:[ce.si.apply&&u.jsxs("li",{children:["Establecer SI a ",u.jsx("span",{className:"font-bold text-white",children:ce.si.value})]}),ce.furniture.apply&&u.jsxs("li",{children:["Establecer Muebles a ",u.jsx("span",{className:"font-bold text-white",children:ce.furniture.value})]}),ce.engravings.apply&&u.jsxs("li",{children:["Establecer Grabado a ",u.jsx("span",{className:"font-bold text-white",children:ce.engravings.value})]}),ce.armorTier.apply&&u.jsxs("li",{children:["Establecer Armadura a ",u.jsxs("span",{className:"font-bold text-white",children:["T",ce.armorTier.value]})]})]}),u.jsx("p",{className:"mt-4",children:"Ests seguro de que quieres continuar? Esta accin no se puede deshacer."})]}),u.jsx("style",{children:`
                @keyframes slide-in-up {
                    from { transform: translateY(100%); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes fade-in-up {
                    from { transform: translateY(1rem); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
            `})]})},wA=i=>{switch(i){case"SSS":return"bg-blue-600 text-white shadow-lg";case"SS":return"bg-green-700 text-white shadow-lg";case"S":return"bg-lime-600 text-black shadow-lg";case"A":return"bg-yellow-500 text-black shadow-lg";case"B":return"bg-orange-600 text-white shadow-lg";case"C":return"bg-red-700 text-white shadow-lg";case"D":return"bg-amber-800 text-white shadow-lg";default:return"bg-gray-700 text-white"}},RA=i=>{switch(i){case"SSS":return"bg-blue-900/70";case"SS":return"bg-green-900/70";case"S":return"bg-lime-800/60 text-lime-100";case"A":return"bg-yellow-800/60 text-yellow-100";case"B":return"bg-orange-900/70";case"C":return"bg-red-900/70";case"D":return"bg-amber-900/70";default:return"bg-gray-700"}},MA=i=>{switch(i){case"SSS":return"border-blue-400";case"SS":return"border-green-500";case"S":return"border-lime-300";case"A":return"border-yellow-300";case"B":return"border-orange-400";case"C":return"border-red-500";case"D":return"border-amber-700";default:return"border-gray-600"}},DA=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!l)return null;const a=`${t}${l}.png`;return u.jsx("img",{src:a,alt:i,title:i,className:"h-6 w-6"})},Mu=({value:i,onChange:t,options:l,allowManualInput:a=!1})=>u.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:l.map(r=>u.jsx("button",{onClick:()=>t(r),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors w-9 ${i===r?"bg-red-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"}`,children:r},r))}),a&&u.jsx("input",{type:"number",value:i,onChange:r=>t(parseInt(r.target.value)||0),className:"w-20 bg-gray-900 border border-gray-600 rounded-md px-2 py-1 text-sm text-white focus:outline-none focus:ring-1 focus:ring-red-500 text-center",min:"0",step:"1",placeholder:"U"})]}),IA=({hero:i})=>u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsxs("div",{children:[i.requiredSI>0&&u.jsxs("span",{className:"font-bold text-cyan-400",children:["SI",i.requiredSI]}),i.requiredFurniture>0&&u.jsxs("span",{className:"font-bold text-lime-400 ml-2",children:[i.requiredFurniture,"F"]}),i.requiredEngravings>0&&u.jsxs("span",{className:"font-bold text-yellow-400 ml-2",children:["E",i.requiredEngravings]}),i.requiredSI===0&&i.requiredFurniture===0&&i.requiredEngravings===0&&u.jsx("span",{children:"-"})]}),i.engravingNodes.length>0&&u.jsx("div",{className:"flex flex-wrap items-center justify-center gap-1",children:i.engravingNodes.map((t,l)=>u.jsxs(_s.Fragment,{children:[u.jsx("span",{className:`text-xs px-2 py-1 rounded-md ${t.found?"bg-blue-800 text-blue-200":"bg-red-800 text-white"}`,children:t.found?t.translated:t.original}),l<i.engravingNodes.length-1&&u.jsx("span",{className:"text-gray-500",children:""})]},l))})]}),kA=({heroes:i,playerData:t,onPlayerDataChange:l,onOwnershipToggleRequest:a,onTranslateComment:r,translatingHeroName:d,onHeroCompletionRequest:p,disappearingKeys:x})=>{const y=w.useMemo(()=>{const h=[...i].sort((S,N)=>S.isAlternative!==N.isAlternative?S.isAlternative?1:-1:N.score-S.score),v=new Map;return h.forEach(S=>{const N=v.get(S.group);N?N.push(S):v.set(S.group,[S])}),new Map([...v.entries()].sort((S,N)=>(di[S[0]]||99)-(di[N[0]]||99)))},[i]);return u.jsx("div",{className:"space-y-8",children:Array.from(y.entries()).map(([h,v])=>{const S=RA(h);return u.jsxs("div",{children:[u.jsxs("h2",{className:`text-2xl font-bold p-3 rounded-t-lg ${wA(h)}`,children:["Tier ",h]}),u.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-b-lg shadow-md",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-700 text-sm",children:[u.jsxs("thead",{className:`text-xs uppercase text-gray-300 ${S}`,children:[u.jsxs("tr",{children:[u.jsx("th",{rowSpan:2,className:"px-4 py-3 text-center font-medium border-r border-gray-900/50",children:"Hroe"}),u.jsx("th",{rowSpan:2,className:"px-4 py-3 text-center font-medium border-r border-gray-900/50",children:"Puntuacin"}),u.jsx("th",{rowSpan:2,className:"px-4 py-3 text-center font-medium border-r border-gray-900/50",children:"Inversin Requerida"}),u.jsx("th",{colSpan:3,className:"py-2 text-center font-medium border-b border-gray-900/50",children:"Mi Progreso"}),u.jsx("th",{rowSpan:2,className:"px-4 py-3 text-left font-medium w-1/3 border-l border-gray-900/50",children:"Comentarios de Prioridad"})]}),u.jsxs("tr",{children:[u.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"SI"}),u.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"Muebles"}),u.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"Grabado"})]})]}),u.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:v.map(N=>{const C=t[N.originalName]||{owned:!0,si:0,furniture:0,engravings:0},_=C.owned&&C.si>=N.requiredSI&&C.furniture>=N.requiredFurniture&&C.engravings>=N.requiredEngravings,U=`${N.originalName}-${N.requiredSI}-${N.requiredFurniture}-${N.requiredEngravings}-${N.isAlternative}`,H=x.has(U);return u.jsxs("tr",{className:`transition-all duration-300 ${_&&!H?"filter grayscale opacity-50":"hover:bg-gray-700/50"} ${H?"hero-disappearing":""}`,children:[u.jsx("td",{className:"px-4 py-4 align-top border-r border-gray-700",children:u.jsxs("div",{className:"flex flex-col items-center w-24 mx-auto",children:[u.jsx("div",{onClick:()=>a(N),title:C.owned?"Marcar como no obtenido":"Marcar como obtenido",className:`w-16 h-16 bg-gray-900 rounded-full mb-2 flex items-center justify-center border-2 ${MA(N.group)} overflow-hidden cursor-pointer transition-all duration-300 ease-in-out hover:scale-110 ${C.owned?"":"grayscale opacity-60"}`,children:u.jsx(Rt,{heroName:N.name,className:"h-full w-full"})}),u.jsxs("div",{className:`text-center ${N.isNameTranslated?"text-white":"text-red-400"}`,children:[u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(DA,{faction:N.faction}),u.jsx("span",{className:"font-bold text-base",children:N.name})]}),N.isAlternative&&u.jsx("span",{className:"block mt-1 text-xs text-yellow-400 font-normal",children:"(Mejorado)"})]})]})}),u.jsx("td",{className:"px-4 py-4 whitespace-nowrap align-middle text-center border-r border-gray-700",children:u.jsxs("div",{children:[u.jsx("div",{className:`text-lg font-bold text-cyan-400 ${N.score===7?"perfect-hero-glow":""}`,children:(N.score||0).toFixed(2)}),u.jsxs("div",{className:"text-xs text-gray-400",children:["(",((N.score||0)/7*100).toFixed(1),"%)"]})]})}),u.jsx("td",{className:"px-4 py-4 align-top text-center border-r border-gray-700",children:u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx(IA,{hero:N}),!_&&C.owned&&u.jsx("button",{onClick:()=>p(N),className:"mt-2 text-green-400 hover:text-green-300 transform transition-all duration-300 ease-in-out hover:scale-150 hover:drop-shadow-[0_0_7px_rgba(74,222,128,0.8)]",title:"Marcar como completado",children:u.jsx(rh,{className:"h-7 w-7"})})]})}),u.jsx("td",{className:"px-2 py-4 whitespace-nowrap align-top",children:u.jsx(Mu,{value:C.si,onChange:M=>l(N.originalName,"si",M),options:[0,20,30,40],allowManualInput:!0})}),u.jsx("td",{className:"px-2 py-4 whitespace-nowrap align-top",children:u.jsx(Mu,{value:C.furniture,onChange:M=>l(N.originalName,"furniture",M),options:[0,3,9],allowManualInput:(C.furniture||0)<9})}),u.jsx("td",{className:"px-2 py-4 whitespace-nowrap align-top",children:u.jsx(Mu,{value:C.engravings,onChange:M=>l(N.originalName,"engravings",M),options:[0,30,60],allowManualInput:!0})}),u.jsx("td",{className:"px-4 py-4 text-gray-300 align-top border-l border-gray-700",children:u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("p",{className:"whitespace-normal",children:N.priorityComment}),d===N.originalName?u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mt-2",children:[u.jsx($t,{className:"h-3 w-3"}),u.jsx("span",{children:"Traduciendo..."})]}):!N.commentIsTranslated&&N.priorityComment&&N.priorityComment.trim()&&u.jsx("button",{onClick:()=>r(N.originalName),className:"mt-2 bg-gray-600 hover:bg-gray-500 text-white text-xs font-semibold py-1 px-2 rounded-md transition-colors",title:"Traducir comentario",children:"Traducir"})]})})]},U)})})]})})]},h)})})},UA=({database:i,setDatabase:t,onSync:l,isSyncing:a,lastSync:r})=>{const[d,p]=lt("player-hero-data",{}),[x,y]=w.useState(null),[h,v]=w.useState(null),[S,N]=w.useState(!0),[C,_]=w.useState(!0),[U,H]=w.useState(""),[M,O]=w.useState(new Set),[j,ee]=w.useState(!1),[ie,ue]=w.useState(null),[D,Q]=w.useState(null),[$,V]=w.useState([]),[oe,Y]=w.useState(new Set),ge=w.useMemo(()=>i.flatMap(I=>I.builds.map(K=>({originalName:I.key,name:I.spanishName,faction:I.faction,isNameTranslated:!!I.spanishName,group:I.tier,priorityComment:K.priorityComment,commentIsTranslated:!!K.priorityCommentIsTranslated,score:I.score,requiredSI:K.requiredSI,requiredFurniture:K.requiredFurniture,requiredEngravings:K.requiredEngravings,engravingNodes:K.engravingNodes,isAlternative:K.isAlternative,isAwakened:I.isAwakened}))),[i]);w.useEffect(()=>{ge.length>0&&p(I=>{const K={...I};let te=!1;return ge.forEach(ce=>{K[ce.originalName]||(K[ce.originalName]={owned:!0,si:0,furniture:0,engravings:0,armorTier:0},te=!0)}),te?K:I})},[ge,p]);const me=w.useMemo(()=>{if(ge.length===0)return[];const I=["Celestial","Hipogeo","Dimensional","Draconis","Lightbearer","Mauler","Wilder","Graveborn","Desconocida"],K=new Set(ge.map(te=>te.faction));return Array.from(K).sort((te,ce)=>{const Ee=I.indexOf(te),Ne=I.indexOf(ce);return Ee===-1?1:Ne===-1?-1:Ee-Ne})},[ge]),Se=I=>{O(K=>{const te=new Set(K);return te.has(I)?te.delete(I):te.add(I),te})},k=M.size===0&&!j,se=w.useCallback((I,K,te)=>{p(ce=>({...ce,[I]:{...ce[I]||{owned:!0,si:0,furniture:0,engravings:0,armorTier:0},[K]:te}}))},[p]),ye=w.useCallback(I=>{(d[I.originalName]||{owned:!0}).owned?Q(I):se(I.originalName,"owned",!0)},[d,se]),de=w.useCallback(()=>{D&&(se(D.originalName,"owned",!1),Q(null))},[D,se]),be=w.useCallback(async I=>{const K=ge.find(te=>te.originalName===I&&!te.commentIsTranslated);if(K&&!K.commentIsTranslated){v(K.originalName);try{const te=K.priorityComment;if(!te)return;const ce=await Lh(te);t(Ee=>Ee.map(Ne=>{if(Ne.key!==K.originalName)return Ne;const Ve=Ne.builds.map(Ae=>Ae.priorityComment===te?{...Ae,priorityComment:ce,priorityCommentIsTranslated:!0}:Ae);return{...Ne,builds:Ve,isUserModified:!0}}))}catch{y(`No se pudo traducir el comentario para ${K.name}.`)}finally{v(null)}}},[ge,t]),E=w.useCallback(()=>{if(!ie)return;const I=d[ie.originalName]||{si:0,furniture:0,engravings:0};ie.requiredSI>I.si&&se(ie.originalName,"si",ie.requiredSI),ie.requiredFurniture>I.furniture&&se(ie.originalName,"furniture",ie.requiredFurniture),ie.requiredEngravings>I.engravings&&se(ie.originalName,"engravings",ie.requiredEngravings),ue(null)},[ie,d,se]),J=w.useMemo(()=>{let I=ge;return j&&(I=I.filter(K=>K.isAwakened)),M.size>0&&(I=I.filter(K=>K.faction&&M.has(K.faction))),C&&(I=I.filter(K=>{const te=d[K.originalName];return(te==null?void 0:te.owned)!==!1})),S&&(I=I.filter(K=>{const te=d[K.originalName];return!te||!(te.owned!==!1)?!0:!(te.si>=K.requiredSI&&te.furniture>=K.requiredFurniture&&te.engravings>=K.requiredEngravings)})),U.trim()!==""&&(I=I.filter(K=>K.name.toLowerCase().includes(U.trim().toLowerCase()))),I},[ge,d,S,C,U,M,j]),fe=I=>`${I.originalName}-${I.requiredSI}-${I.requiredFurniture}-${I.requiredEngravings}-${I.isAlternative}`;return w.useEffect(()=>{const I=new Set($.map(fe)),K=new Set(J.map(fe)),te=new Set([...I].filter(ce=>!K.has(ce)));if(te.size>0){Y(Ne=>new Set([...Ne,...te]));const Ee=setTimeout(()=>{V(J),Y(new Set)},1200);return()=>clearTimeout(Ee)}else V(J)},[J]),u.jsxs("div",{children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700/80 mb-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Prioridad de Recursos"}),r&&u.jsxs("p",{className:"text-sm text-gray-400",children:["Datos actualizados: ",new Date(r).toLocaleString("es-ES")]})]}),u.jsxs("div",{className:"flex items-center flex-col sm:flex-row gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-2",role:"group","aria-label":"Filtro de faccin",children:[u.jsx("button",{onClick:()=>{O(new Set),ee(!1)},"aria-pressed":k,className:`px-4 py-2 text-sm font-bold rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 ${k?"bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:"Todas"}),u.jsx("button",{onClick:()=>ee(I=>!I),title:"Filtrar Hroes Despertados","aria-pressed":j,className:`awakened-button rounded-md transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-purple-400 w-12 h-12 flex items-center justify-center overflow-hidden hover:scale-110 mx-2 ${j?"bg-purple-900 active scale-110":"bg-gray-700"}`,children:u.jsx("img",{src:"https://ik.imagekit.io/optimizerhispania/timegazer_card.webp",alt:"Filtro Hroes Despertados",className:"w-full h-full object-cover"})},"awakened-filter"),me.map(I=>{const K=M.has(I),te=M.size===0||K;return u.jsx("button",{onClick:()=>Se(I),title:I,"aria-pressed":K,className:`faction-button-hover p-1.5 rounded-full transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 hover:scale-125 hover:grayscale-0 hover:opacity-100 ${K?"bg-white/20 ring-2 ring-white":""} ${te?"":"grayscale opacity-60"}`,children:I==="Desconocida"?u.jsx("div",{className:"h-8 w-8 flex items-center justify-center bg-gray-700 rounded-full text-lg font-bold text-gray-400",title:"Faccin Desconocida",children:"?"}):(()=>{const ce="https://ik.imagekit.io/optimizerhispania/",Ee=I.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!Ee)return null;const Ne=`${ce}${Ee}.png`;return u.jsx("img",{src:Ne,alt:I,className:"h-8 w-8"})})()},I)})]}),u.jsxs("button",{onClick:()=>l(!0),disabled:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center disabled:bg-gray-500 disabled:cursor-not-allowed flex-shrink-0",children:[a&&u.jsx($t,{className:"h-5 w-5 mr-2"}),a?"Actualizando...":"Actualizar"]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 w-full pt-4 border-t border-gray-700/50",children:[u.jsx("input",{type:"text",placeholder:"Buscar hroe...",value:U,onChange:I=>H(I.target.value),className:"bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-red-500 w-full sm:w-auto max-w-xs"}),u.jsxs("div",{className:"flex items-center gap-x-6 gap-y-2 flex-wrap justify-center sm:justify-end",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Ocultar completados"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:S,onChange:()=>N(!S)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${S?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${S?"transform translate-x-4":""}`})]})]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Ocultar los que NO poseo"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:C,onChange:()=>_(!C)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${C?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${C?"transform translate-x-4":""}`})]})]})]})]})]}),u.jsx("div",{className:"mb-6",children:u.jsx("p",{className:"text-center text-sm text-gray-400",children:" Haz clic en el retrato de un hroe para marcar si lo posees (los no posedos aparecen en gris)."})}),x&&u.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-md mb-6",children:x}),a&&i.length===0?u.jsxs("div",{className:"text-center py-20",children:[u.jsx($t,{className:"h-12 w-12 mx-auto text-red-500"}),u.jsx("p",{className:"mt-4 text-lg",children:"Cargando datos de prioridades..."})]}):u.jsx(kA,{heroes:$,playerData:d,onPlayerDataChange:se,onOwnershipToggleRequest:ye,onTranslateComment:be,translatingHeroName:h,onHeroCompletionRequest:ue,disappearingKeys:oe}),ie&&u.jsxs(mi,{isOpen:!!ie,onClose:()=>ue(null),onConfirm:E,title:"Confirmar Actualizacin de Progreso",children:[u.jsxs("p",{children:["Ests seguro de que quieres actualizar el progreso para ",u.jsx("span",{className:"font-bold text-white",children:ie.name})," a los valores requeridos?"]}),u.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Esta accin solo modificar los valores si los actuales son inferiores a los recomendados."})]}),D&&u.jsxs(mi,{isOpen:!!D,onClose:()=>Q(null),onConfirm:de,title:"Confirmar cambio de posesin",children:[u.jsxs("p",{children:["Ests seguro de que quieres marcar a ",u.jsx("span",{className:"font-bold text-white",children:D.name})," como que ",u.jsx("span",{className:"font-bold text-red-400",children:"NO lo posees"}),"?"]}),u.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Esta accin podra ocultarlo de la lista si tienes activado el filtro correspondiente."})]})]})},Ui=({title:i,heroes:t,tierMap:l,emptyText:a,subTextGenerator:r,onHeroClick:d,disappearingKeys:p,getDisappearingKey:x,isAwakenedRow:y=!1,showRank:h=!1})=>u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-white border-l-4 border-red-500 pl-4",children:i}),t.length>0?u.jsx("div",{className:"flex flex-wrap justify-center md:flex-nowrap gap-4 overflow-x-auto pb-3 -mx-4 px-4",children:t.map((v,S)=>{const N=x?x(v):v.originalName;return u.jsx(fi,{hero:v,tier:l.get(v.originalName)||"N/A",subText:r?r(v):void 0,onClick:d,isDisappearing:(p==null?void 0:p.has(N))||!1,isAwakened:y,rank:h?S+1:void 0},N)})}):u.jsx("div",{className:"pl-4",children:u.jsx("p",{className:"text-gray-400",children:a})})]}),qA=i=>i>=100?"bg-gradient-to-r from-teal-400 to-cyan-500":i>75?"bg-gradient-to-r from-lime-400 to-green-500":i>40?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-orange-500 to-red-600",HA=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500"};case"C":return{textClass:"text-white",bgClass:"bg-red-600"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700"}}},GA=({tier:i})=>{const{textClass:t,bgClass:l}=HA(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${l} px-2 py-0.5 shadow-md`,children:u.jsx("span",{className:`block transform skew-x-12 text-center text-xs font-bold tracking-wider ${t}`,children:i})})},jA=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");return l?u.jsx("img",{src:`${t}${l}.png`,alt:i,title:i,className:"h-6 w-6 flex-shrink-0"}):null},LA=({data:i})=>{const{si:t=0,furniture:l=0,engravings:a=0}=i||{},r=[t>0&&{key:"si",className:"text-cyan-400",text:`SI${t}`},l>0&&{key:"f",className:"text-lime-400",text:`${l}F`},a>0&&{key:"e",className:"text-yellow-400",text:`E${a}`}].filter(Boolean);return r.length===0?u.jsx("span",{className:"font-mono text-gray-500",children:"-"}):u.jsx("div",{className:"flex items-baseline justify-start gap-2 font-mono",children:r.map(d=>u.jsx("span",{className:d.className,children:d.text},d.key))})},OA=({isOpen:i,onClose:t,onReplace:l,currentHeroes:a,tierMap:r})=>i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center z-[80]",onClick:t,children:u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-4xl flex flex-col",onClick:d=>d.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Watchlist Llena"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:u.jsx(Yt,{className:"w-6 h-6"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("p",{className:"text-gray-300 mb-4 text-center",children:"Tu watchlist est llena. Selecciona un hroe de la lista para reemplazarlo por el nuevo."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:a.map((d,p)=>d?u.jsx(fi,{hero:d,tier:r.get(d.originalName)||"N/A",onClick:()=>l(p),isDisappearing:!1},d.originalName+p):null)})]})]})}):null,VA=({isOpen:i,onClose:t,onSelect:l,priorityHeroes:a,playerData:r,tierMap:d,maxInvestmentMap:p,currentWatchlist:x})=>{const[y,h]=w.useState(""),v=w.useMemo(()=>Array.from(new Map(a.map(N=>[N.originalName,N])).values()).map(N=>{const C=r[N.originalName];if(!C||!C.owned)return null;const _=p.get(N.originalName)||{si:0,furniture:0,engravings:0},U=_.si>0?Math.min(C.si/_.si,1):1,H=_.furniture>0?Math.min(C.furniture/_.furniture,1):1,M=_.engravings>0?Math.min(C.engravings/_.engravings,1):1,O=(U+H+M)/3*100;return O>=100||x.includes(N.originalName)?null:{hero:N,progress:O,pData:C}}).filter(Boolean).filter(N=>N.hero.name.toLowerCase().includes(y.toLowerCase())).sort((N,C)=>C.progress-N.progress),[a,r,p,x,y]);return i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center z-50 animate-[fade-in_0.3s_ease-out]",onClick:t,children:u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:S=>S.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Seleccionar Hroe para Observar"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:u.jsx(Yt,{className:"h-6 w-6"})})]}),u.jsx("div",{className:"p-4 flex-shrink-0",children:u.jsx("input",{type:"text",placeholder:"Buscar hroe por nombre...",value:y,onChange:S=>h(S.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500"})}),u.jsx("div",{className:"overflow-y-auto px-2",children:u.jsxs("table",{className:"min-w-full text-sm",children:[u.jsx("thead",{className:"sticky top-0 bg-gray-800 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 text-left text-gray-400 font-semibold",children:"Hroe"}),u.jsx("th",{className:"p-2 text-left text-gray-400 font-semibold",children:"Inversin Actual"}),u.jsx("th",{className:"p-2 text-left text-gray-400 font-semibold w-1/3",children:"Progreso"})]})}),u.jsx("tbody",{children:v.length>0?v.map(({hero:S,progress:N,pData:C})=>u.jsxs("tr",{onClick:()=>l(S.originalName),className:"hover:bg-gray-700/50 cursor-pointer rounded-lg",children:[u.jsx("td",{className:"p-2 align-middle",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(jA,{faction:S.faction}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:S.name}),u.jsx("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:u.jsx(GA,{tier:d.get(S.originalName)||"N/A"})})]})]})}),u.jsx("td",{className:"p-2 align-middle",children:u.jsx(LA,{data:C})}),u.jsx("td",{className:"p-2 align-middle",children:u.jsxs("div",{className:"w-full bg-gray-900/70 shadow-inner rounded-full h-5 relative overflow-hidden",children:[u.jsx("div",{className:`h-5 rounded-full ${qA(N)}`,style:{width:`${N.toFixed(1)}%`}}),u.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white text-shadow-dark",children:[N.toFixed(1),"%"]})]})})]},S.originalName)):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"text-center text-gray-500 py-8",children:"No hay hroes que coincidan con la bsqueda."})})})]})})]})}):null},Du=({title:i,children:t})=>u.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm p-6 rounded-xl border border-gray-700/80 transition-all duration-300 hover:border-red-600/60 hover:shadow-[0_0_25px_5px_rgba(239,68,68,0.2)]",children:[u.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-6 pb-4 border-b border-gray-700/50",children:i}),u.jsx("div",{className:"space-y-8",children:t})]}),Qg=i=>{if(!i)return"-";const t=[];return i.si&&i.si>0&&t.push(`SI${i.si}`),i.furniture&&i.furniture>0&&t.push(`${i.furniture}F`),i.engravings&&i.engravings>0&&t.push(`E${i.engravings}`),t.length>0?t.join(" "):"-"},BA=({navigate:i,database:t,settings:l})=>{const[a,r]=lt("player-hero-data",{}),[d]=lt("furniture-priority-data",{}),[p,x]=w.useState(t.length===0),[y,h]=w.useState(null),[v,S]=w.useState(new Set),[N,C]=w.useState(null),[_,U]=w.useState(null),[H,M]=w.useState(null),[O,j]=w.useState([]),[ee,ie]=lt("watchlist-slots",Array(5).fill(null)),[ue,D]=w.useState(!1),[Q,$]=w.useState(null),V=w.useCallback(L=>`${L.originalName}-${L.requiredSI}-${L.requiredFurniture}-${L.requiredEngravings}`,[]),oe=w.useCallback((L,ne)=>{const ve=di[L.group]||99,ke=di[ne.group]||99;if(ve!==ke)return ve-ke;if(L.isAlternative!==ne.isAlternative)return L.isAlternative?1:-1;if(ne.score!==L.score)return ne.score-L.score;if(L.isAlternative){if(L.requiredSI!==ne.requiredSI)return L.requiredSI-ne.requiredSI;if(L.requiredFurniture!==ne.requiredFurniture)return L.requiredFurniture-ne.requiredFurniture;if(L.requiredEngravings!==ne.requiredEngravings)return L.requiredEngravings-ne.requiredEngravings}return 0},[]),Y=w.useMemo(()=>{x(!0);const L=t.flatMap(ne=>ne.builds.map(ve=>({originalName:ne.key,name:ne.spanishName,faction:ne.faction,isNameTranslated:!!ne.spanishName,group:ne.tier,priorityComment:ve.priorityComment,commentIsTranslated:!!ve.priorityCommentIsTranslated,score:ne.score,requiredSI:ve.requiredSI,requiredFurniture:ve.requiredFurniture,requiredEngravings:ve.requiredEngravings,engravingNodes:ve.engravingNodes,isAlternative:ve.isAlternative,isAwakened:ne.isAwakened})));return x(!1),L},[t]),ge=w.useMemo(()=>t.map(L=>({faction:L.faction,name:L.spanishName,comments:L.rankingComments,tier:L.tier,score:L.score,originalName:L.key,isNameTranslated:!!L.spanishName,isFactionTranslated:!0,commentIsTranslated:!!L.rankingCommentIsTranslated,isAwakened:L.isAwakened})),[t]),me=w.useMemo(()=>Array.from(new Map(Y.map(L=>[L.originalName,L])).values()),[Y]),Se=w.useMemo(()=>{const L=new Map;return Y.forEach(ne=>{const ve=L.get(ne.originalName)||{si:0,furniture:0,engravings:0};L.set(ne.originalName,{si:Math.max(ve.si,ne.requiredSI),furniture:Math.max(ve.furniture,ne.requiredFurniture),engravings:Math.max(ve.engravings,ne.requiredEngravings)})}),L},[Y]),k=w.useMemo(()=>me.filter(L=>{var ne;return!((ne=a[L.originalName])!=null&&ne.owned)&&L.isAwakened}).sort((L,ne)=>ne.score-L.score).slice(0,5),[me,a]),se=w.useMemo(()=>me.filter(L=>{var ne;return!((ne=a[L.originalName])!=null&&ne.owned)&&(L.faction==="Celestial"||L.faction==="Hipogeo")&&!L.isAwakened}).sort((L,ne)=>ne.score-L.score).slice(0,5),[me,a]),ye=w.useMemo(()=>me.filter(L=>{var ne;return!((ne=a[L.originalName])!=null&&ne.owned)&&L.faction==="Draconis"}).sort((L,ne)=>ne.score-L.score).slice(0,5),[me,a]),de=w.useMemo(()=>Y.filter(L=>{var ne,ve;return((ne=a[L.originalName])==null?void 0:ne.owned)&&(((ve=a[L.originalName])==null?void 0:ve.si)??0)<L.requiredSI}).sort(oe).slice(0,5),[Y,a,oe]),be=w.useMemo(()=>Y.filter(L=>{var ne,ve;return((ne=a[L.originalName])==null?void 0:ne.owned)&&(((ve=a[L.originalName])==null?void 0:ve.furniture)??0)<L.requiredFurniture}).sort(oe).slice(0,5),[Y,a,oe]),E=w.useMemo(()=>Y.filter(L=>{var ne,ve;return((ne=a[L.originalName])==null?void 0:ne.owned)&&(((ve=a[L.originalName])==null?void 0:ve.engravings)??0)<L.requiredEngravings}).sort(oe).slice(0,5),[Y,a,oe]),J=w.useMemo(()=>me.filter(L=>{var ne,ve;return((ne=a[L.originalName])==null?void 0:ne.owned)&&(((ve=a[L.originalName])==null?void 0:ve.armorTier)??0)<4}).sort((L,ne)=>ne.score-L.score).slice(0,5),[me,a]),fe=L=>{var ne;(ne=a[L.originalName])!=null&&ne.owned||C(L)},I=w.useCallback(()=>{N&&(S(L=>new Set(L).add(N.originalName)),setTimeout(()=>{r(L=>({...L,[N.originalName]:{...L[N.originalName]||{si:0,furniture:0,engravings:0,armorTier:0},owned:!0}})),S(L=>{const ne=new Set(L);return ne.delete(N.originalName),ne})},1600),C(null))},[N,r]),K=(L,ne)=>{M({hero:L,goalType:ne}),j(Y.filter(ve=>ve.originalName===L.originalName).sort(oe)),U(ee)},te=()=>{_&&ie(_),M(null),U(null)},ce=w.useCallback((L,ne)=>{const ve=a[L]||{si:0,furniture:0,engravings:0,armorTier:0},ke=new Set,Qe=(Ue,ht,xt)=>xt>=Ue&&ht<Ue;de.forEach(Ue=>{Ue.originalName===L&&Qe(Ue.requiredSI,ve.si,ne.si)&&ke.add(V(Ue))}),be.forEach(Ue=>{Ue.originalName===L&&Qe(Ue.requiredFurniture,ve.furniture,ne.furniture)&&ke.add(V(Ue))}),E.forEach(Ue=>{Ue.originalName===L&&Qe(Ue.requiredEngravings,ve.engravings,ne.engravings)&&ke.add(V(Ue))}),J.forEach(Ue=>{Ue.originalName===L&&Qe(4,ve.armorTier??0,ne.armorTier??0)&&ke.add(Ue.originalName)}),ke.size>0?(S(Ue=>new Set([...Ue,...ke])),setTimeout(()=>{r(Ue=>({...Ue,[L]:ne})),S(Ue=>{const ht=new Set(Ue);return ke.forEach(xt=>ht.delete(xt)),ht})},1600)):r(Ue=>({...Ue,[L]:ne})),U(null),M(null)},[a,r,V,de,be,E,J]),Ee=w.useMemo(()=>new Map(ge.map(L=>[L.originalName,L.tier])),[ge]);w.useEffect(()=>{const L=ee.filter(ne=>{if(!ne)return!1;const ve=a[ne];if(!ve)return!1;const ke=Se.get(ne);if(!ke)return!1;const Qe=ke.si>0?Math.min(ve.si/ke.si,1):1,Ue=ke.furniture>0?Math.min(ve.furniture/ke.furniture,1):1,ht=ke.engravings>0?Math.min(ve.engravings/ke.engravings,1):1;return(Qe+Ue+ht)/3*100>=100});L.length>0&&ie(ne=>ne.map(ve=>L.includes(ve)?null:ve))},[a,ee,ie,Se]);const Ne=L=>{$(L),D(!0)},Ve=L=>{Q!==null&&ie(ne=>{const ve=[...ne];return ve[Q]=L,ve}),D(!1),$(null)},Ae=(L,ne)=>{L.stopPropagation(),ie(ve=>{const ke=[...ve];return ke[ne]=null,ke})};return p?u.jsxs("div",{className:"text-center py-20",children:[u.jsx($t,{className:"h-12 w-12 mx-auto text-red-500"}),u.jsx("p",{className:"mt-4 text-lg",children:"Calculando tu hoja de ruta..."})]}):y?u.jsx("div",{className:"bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-md mb-6",children:y}):u.jsxs("div",{children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700/80 mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Hoja de Ruta Personalizada"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Tu gua de prximos pasos, generada a partir de los datos de expertos y tu progreso actual."})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs(Du,{title:"Watchlist",children:[u.jsx("p",{className:"text-gray-400 -mt-4 mb-4 text-sm",children:"Ancla aqu a los hroes en los que te ests centrando para un seguimiento fcil. Se eliminarn automticamente al alcanzar el 100% de su build recomendada."}),u.jsx("div",{className:"flex flex-wrap justify-center md:flex-nowrap gap-4 overflow-x-auto pb-3 -mx-4 px-4",children:ee.map((L,ne)=>{if(L){const ve=me.find(ke=>ke.originalName===L);if(ve){const ke=a[L],Qe=Se.get(L);let Ue=0;if(ke&&Qe){const xt=Qe.si>0?Math.min(ke.si/Qe.si,1):1,dn=Qe.furniture>0?Math.min(ke.furniture/Qe.furniture,1):1,fn=Qe.engravings>0?Math.min(ke.engravings/Qe.engravings,1):1;Ue=(xt+dn+fn)/3*100}const ht={from:Qg(ke),to:Qg(Qe)};return u.jsx(fi,{hero:ve,tier:Ee.get(L)||"N/A",isDisappearing:!1,onRemove:xt=>Ae(xt,ne),onClick:()=>K(ve,"watchlist"),progress:Ue,subText:ht},`${L}-${ne}`)}}return u.jsx("div",{onClick:()=>Ne(ne),className:"bg-gray-800/50 border-2 border-dashed border-gray-600 rounded-lg w-44 h-[188px] flex-shrink-0 flex items-center justify-center cursor-pointer hover:bg-gray-700/50 hover:border-red-500 transition-all",children:u.jsx("i",{className:"fas fa-plus text-gray-500 text-4xl"})},`placeholder-${ne}`)})})]}),u.jsxs(Du,{title:"Prioridad invocaciones",children:[u.jsx(Ui,{title:"Prximos Hroes Despertados",heroes:k,tierMap:Ee,emptyText:"Felicidades! Tienes todos los Hroes Despertados recomendados.",onHeroClick:fe,disappearingKeys:v,isAwakenedRow:!0},"acq-awakened"),u.jsx(Ui,{title:"Prximos Celestiales / Hipogeos",heroes:se,tierMap:Ee,emptyText:"Felicidades! Tienes todos los Celestiales e Hipogeos recomendados.",onHeroClick:fe,disappearingKeys:v},"acq-celhypo"),u.jsx(Ui,{title:"Prximos Draconis",heroes:ye,tierMap:Ee,emptyText:"Felicidades! Tienes todos los Draconis recomendados.",onHeroClick:fe,disappearingKeys:v},"acq-draconis")]}),u.jsxs(Du,{title:"Prioridad gasto en recursos",children:[u.jsx(Ui,{title:"Prximos Artculos de Firma (SI)",heroes:de,tierMap:Ee,emptyText:"No hay recomendaciones de SI por ahora.",subTextGenerator:L=>{var ne;return{from:`SI${((ne=a[L.originalName])==null?void 0:ne.si)??0}`,to:`SI${L.requiredSI}`}},onHeroClick:L=>K(L,"si"),disappearingKeys:v,getDisappearingKey:V,showRank:!0},"inv-si"),u.jsx(Ui,{title:"Prximos Muebles (F)",heroes:be,tierMap:Ee,emptyText:"No hay recomendaciones de muebles por ahora.",subTextGenerator:L=>{var ne;return{from:`${((ne=a[L.originalName])==null?void 0:ne.furniture)??0}F`,to:`${L.requiredFurniture}F`}},onHeroClick:L=>K(L,"f"),disappearingKeys:v,getDisappearingKey:V,showRank:!0},"inv-f"),u.jsx(Ui,{title:"Prximos Grabados (E)",heroes:E,tierMap:Ee,emptyText:"No hay recomendaciones de Grabado por ahora.",subTextGenerator:L=>{var ne;return{from:`E${((ne=a[L.originalName])==null?void 0:ne.engravings)??0}`,to:`E${L.requiredEngravings}`}},onHeroClick:L=>K(L,"e"),disappearingKeys:v,getDisappearingKey:V,showRank:!0},"inv-e"),u.jsx(Ui,{title:"Prximas Armaduras (T4)",heroes:J,tierMap:Ee,emptyText:"Felicidades! Todos tus hroes prioritarios tienen armadura T4.",subTextGenerator:L=>{var ne;return{from:`T${((ne=a[L.originalName])==null?void 0:ne.armorTier)??0}`,to:"T4"}},onHeroClick:L=>K(L,"t4"),disappearingKeys:v,getDisappearingKey:L=>L.originalName,showRank:!0},"inv-t4")]})]}),u.jsxs(mi,{isOpen:!!N,onClose:()=>C(null),onConfirm:I,title:"Confirmar Adquisicin de Hroe",children:[u.jsxs("p",{children:["Ests seguro de que quieres marcar a ",u.jsx("span",{className:"font-bold text-white",children:N==null?void 0:N.name})," como adquirido?"]}),u.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Esta accin lo eliminar de esta lista. Podrs gestionar su progreso en la pgina de Edicin de Roster."})]}),u.jsx(Yu,{isOpen:!!H,onClose:te,onSave:ce,hero:(H==null?void 0:H.hero)??null,playerData:H?a[H.hero.originalName]:null,recommendedBuilds:O,maxInvestment:H?Se.get(H.hero.originalName)??null:null,watchlistSlots:ee,setWatchlistSlots:ie,allHeroes:Y,tierMap:Ee,navigate:i,priorities:d}),u.jsx(VA,{isOpen:ue,onClose:()=>D(!1),onSelect:Ve,priorityHeroes:Y,playerData:a,tierMap:Ee,maxInvestmentMap:Se,currentWatchlist:ee}),u.jsx(OA,{isOpen:ue&&ee.every(L=>L!==null),onClose:()=>D(!1),onReplace:L=>{Q!==null&&ie(ne=>{var ke;const ve=[...ne];return ve[L]=((ke=me.find(Qe=>Qe.originalName===ee[Q]))==null?void 0:ke.originalName)??null,ve})},currentHeroes:ee.map(L=>L?me.find(ne=>ne.originalName===L):void 0),tierMap:Ee})]})},PA=["NO DEFINIDO","TOP TIER","VERY GOOD","GOOD","AVERAGE","BAD","VERY BAD"],Iu=i=>{switch(i){case"TOP TIER":return"text-cyan-400";case"VERY GOOD":return"text-green-400";case"GOOD":return"text-lime-400";case"AVERAGE":return"text-yellow-400";case"BAD":return"text-red-400";case"VERY BAD":return"text-red-600";case"NO DEFINIDO":default:return"text-white"}},zA=({faction:i})=>{if(i==="Desconocida")return u.jsx("div",{className:"h-6 w-6 flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0",title:"Faccin Desconocida",children:"?"});const t="https://ik.imagekit.io/optimizerhispania/",l=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");return l?u.jsx("img",{src:`${t}${l}.png`,alt:i,title:i,className:"h-6 w-6 flex-shrink-0"}):null},FA=i=>{switch(i){case"SSS":return"bg-blue-600 text-white";case"SS":return"bg-green-700 text-white";case"S":return"bg-lime-600 text-black";case"A":return"bg-yellow-500 text-black";case"B":return"bg-orange-600 text-white";case"C":return"bg-red-700 text-white";case"D":return"bg-amber-800 text-white";default:return"bg-gray-600"}},Zg=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-500",borderClass:"border-blue-400"};case"SS":return{textClass:"text-white",bgClass:"bg-green-600",borderClass:"border-green-500"};case"S":return{textClass:"text-black",bgClass:"bg-lime-400",borderClass:"border-lime-300"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-400",borderClass:"border-yellow-300"};case"B":return{textClass:"text-white",bgClass:"bg-orange-500",borderClass:"border-orange-400"};case"C":return{textClass:"text-white",bgClass:"bg-red-600",borderClass:"border-red-500"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800",borderClass:"border-amber-700"};default:return{textClass:"text-gray-100",bgClass:"bg-gray-700",borderClass:"border-gray-600"}}},YA=({navigate:i,database:t})=>{const[l,a]=w.useState("suggestion"),[r,d]=lt("player-hero-data",{}),[p,x]=lt("furniture-priority-data",{}),[y,h]=w.useState(!1),[v,S]=w.useState(null),[N,C]=w.useState(""),[_,U]=w.useState(!1),H=w.useMemo(()=>t.map(D=>({name:D.spanishName||D.key,faction:D.faction,comments:D.rankingComments,tier:D.tier,score:D.score,originalName:D.key,isNameTranslated:!!D.spanishName,isFactionTranslated:!0,commentIsTranslated:!!D.rankingCommentIsTranslated,isAwakened:D.isAwakened})),[t]),M=w.useMemo(()=>t.flatMap(D=>D.builds.map(Q=>({originalName:D.key,name:D.spanishName,faction:D.faction,isNameTranslated:!!D.spanishName,group:D.tier,priorityComment:Q.priorityComment,commentIsTranslated:!!Q.priorityCommentIsTranslated,score:D.score,requiredSI:Q.requiredSI,requiredFurniture:Q.requiredFurniture,requiredEngravings:Q.requiredEngravings,engravingNodes:Q.engravingNodes,isAlternative:Q.isAlternative,isAwakened:D.isAwakened}))),[t]);w.useEffect(()=>{if(H.length>0){const D="furniture-defaults-v4-applied";if(localStorage.getItem(D))return;const Q=new Map;H.forEach($=>{Q.set($.name,$.originalName)}),x($=>{const V=JSON.parse(JSON.stringify($));let oe=!1;for(const[Y,ge]of Object.entries(Ay)){const me=Q.get(Y);if(!me)continue;V[me]||(V[me]={top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"});const Se=V[me],k={};Se.top==="NO DEFINIDO"&&(k.top=ge.top),Se.middle==="NO DEFINIDO"&&(k.middle=ge.middle),Se.bottom==="NO DEFINIDO"&&(k.bottom=ge.bottom),Object.keys(k).length>0&&(V[me]={...Se,...k},oe=!0)}return oe&&localStorage.setItem(D,"true"),oe?V:$})}},[H,x]),w.useEffect(()=>{h(!0),Object.values(r).some(Q=>!Q.furnitureDupes||Q.furnitureDupes.top.length!==3||Q.furnitureDupes.middle.length!==3||Q.furnitureDupes.bottom.length!==3)&&d(Q=>{const $={...Q};return Object.keys($).forEach(V=>{const oe=$[V],Y=oe.furnitureDupes;if(!Y||Y.top.length!==3||Y.middle.length!==3||Y.bottom.length!==3){const ge={top:[...(Y==null?void 0:Y.top)||[],0,0,0].slice(0,3),middle:[...(Y==null?void 0:Y.middle)||[],0,0,0].slice(0,3),bottom:[...(Y==null?void 0:Y.bottom)||[],0,0,0].slice(0,3)};oe.furnitureDupes=ge}}),$}),h(!1)},[r,d]),w.useEffect(()=>{const D=sessionStorage.getItem("furniture-config-mode"),Q=sessionStorage.getItem("furniture-config-filter"),$=sessionStorage.getItem("furniture-config-hero");D==="config"&&(a("config"),sessionStorage.removeItem("furniture-config-mode")),Q==="undefined"&&(U(!0),sessionStorage.removeItem("furniture-config-filter")),$&&(C($),sessionStorage.removeItem("furniture-config-hero"))},[]);const O=w.useMemo(()=>{let D=[...H].sort((Q,$)=>$.score-Q.score);return N.trim()!==""&&(D=D.filter(Q=>Q.name.toLowerCase().includes(N.trim().toLowerCase()))),_&&(D=D.filter(Q=>{const $=p[Q.originalName]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"};return $.top==="NO DEFINIDO"||$.middle==="NO DEFINIDO"||$.bottom==="NO DEFINIDO"})),D},[H,N,_,p]),j=w.useMemo(()=>{var $;const D=M.filter(V=>{var oe,Y;return((oe=r[V.originalName])==null?void 0:oe.owned)&&(((Y=r[V.originalName])==null?void 0:Y.furniture)??0)>=9}),Q=new Map;for(const V of oh){if(Q.size>=10)break;const oe=[];for(const Y of D){if(Q.has(Y.originalName))continue;const ge=p[Y.originalName]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"},me=(($=r[Y.originalName])==null?void 0:$.furnitureDupes)||{top:[0,0,0],middle:[0,0,0],bottom:[0,0,0]};ge.top===V.tier&&me.top.some(Se=>Se<V.level)&&oe.push({hero:Y,type:"top"}),ge.middle===V.tier&&me.middle.some(Se=>Se<V.level)&&oe.push({hero:Y,type:"middle"}),ge.bottom===V.tier&&me.bottom.some(Se=>Se<V.level)&&oe.push({hero:Y,type:"bottom"})}oe.sort((Y,ge)=>ge.hero.score-Y.hero.score);for(const Y of oe){if(Q.size>=10)break;Q.has(Y.hero.originalName)||Q.set(Y.hero.originalName,{...Y,level:V.level,tier:V.tier})}}return Array.from(Q.values())},[M,r,p]),ee=w.useMemo(()=>H.filter(D=>{if(D.tier!=="SSS")return!1;const Q=r[D.originalName];if(!Q||Q.furniture<9)return!1;const $=p[D.originalName]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"};return $.top==="NO DEFINIDO"||$.middle==="NO DEFINIDO"||$.bottom==="NO DEFINIDO"}),[H,r,p]),ie=(D,Q,$)=>{x(V=>({...V,[D]:{...V[D]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"},[Q]:$}}))},ue=w.useCallback(D=>{a("config"),C(D.name),U(!0)},[]);return y?u.jsxs("div",{className:"text-center py-20",children:[u.jsx($t,{className:"h-12 w-12 mx-auto text-red-500"}),u.jsx("p",{className:"mt-4 text-lg",children:"Inicializando datos..."})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700/80 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Duplicacin de Muebles"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l==="suggestion"?"Sugerencias para tus prximos duplicados de muebles.":"Configura la prioridad de cada tipo de mueble."})]}),l==="config"&&u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-4 w-full md:w-auto",children:[u.jsx("input",{type:"text",placeholder:"Buscar hroe...",value:N,onChange:D=>C(D.target.value),className:"bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-red-500 w-full sm:w-auto max-w-xs"}),u.jsxs("label",{className:"flex items-center cursor-pointer flex-shrink-0",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300 whitespace-nowrap",children:"Mostrar No Definidos"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:_,onChange:()=>U(!_)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${_?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${_?"transform translate-x-4":""}`})]})]})]}),u.jsxs("button",{onClick:()=>a(D=>D==="suggestion"?"config":"suggestion"),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center gap-2 flex-shrink-0",children:[u.jsx("i",{className:`fas ${l==="suggestion"?"fa-cog":"fa-list-ol"}`}),u.jsx("span",{children:l==="suggestion"?"Configurar":"Ver Sugerencias"})]})]}),l==="suggestion"&&u.jsxs("div",{className:"py-6",children:[u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-x-8 gap-y-12 justify-items-center",children:j.map(({hero:D,type:Q,level:$,tier:V},oe)=>u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -top-4 -left-4 z-10 flex items-center justify-center w-16 h-20 text-white font-black text-4xl text-shadow-heavy",style:{clipPath:"polygon(0 0, 100% 0, 100% 75%, 50% 100%, 0 75%)",backgroundColor:"#581c87",filter:"drop-shadow(0 0 5px rgba(239, 68, 68, 0.9)) drop-shadow(0 0 10px rgba(220, 38, 38, 0.7))"},children:u.jsx("span",{className:"mt-[-0.5rem]",children:oe+1})}),u.jsx(fi,{hero:D,tier:D.group,subText:{from:V,to:`+${$} ${Q==="top"?"Grande":Q==="middle"?"Pequeo":"Colgante"}`},subTextFromColor:Iu(V),onClick:()=>S(D),isDisappearing:!1})]},D.originalName))}),j.length===0&&ee.length===0&&!y&&u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-400",children:"No hay sugerencias disponibles. Asegrate de tener hroes 9/9 y de configurar las prioridades!"})}),ee.length>0&&u.jsxs("div",{className:"mt-12 border-t-2 border-yellow-700/50 pt-8",children:[u.jsxs("h3",{className:"text-xl font-bold text-yellow-400 text-center mb-4",children:[u.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Prioridades por Definir"]}),u.jsx("p",{className:"text-center text-gray-400 max-w-2xl mx-auto mb-6",children:"Atencin! Has subido a 9 muebles a estos hroes SSS pero no has definido sus prioridades. Configralas para recibir sugerencias precisas."}),u.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:ee.map(D=>u.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg flex flex-col items-center gap-2 cursor-pointer hover:bg-gray-700 transition-colors w-36",onClick:()=>ue(D),children:[u.jsx("div",{className:`w-16 h-16 bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center border-2 ${Zg(D.tier).borderClass} overflow-hidden`,children:u.jsx(Rt,{heroName:D.name,className:"h-full w-full"})}),u.jsx("span",{className:"font-semibold text-sm text-center",children:D.name})]},D.originalName))})]})]}),l==="config"&&u.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-lg shadow-md",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-700 text-sm",children:[u.jsx("thead",{className:"bg-gray-900/70 text-xs uppercase text-gray-300",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Hroe"}),u.jsx("th",{className:"px-2 py-3 text-center font-medium",children:"Grande (Top)"}),u.jsx("th",{className:"px-2 py-3 text-center font-medium",children:"Pequeo (Middle)"}),u.jsx("th",{className:"px-2 py-3 text-center font-medium",children:"Colgante (Bottom)"})]})}),u.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:O.map(D=>{const Q=p[D.originalName]||{top:"NO DEFINIDO",middle:"NO DEFINIDO",bottom:"NO DEFINIDO"};return u.jsxs("tr",{className:"hover:bg-gray-700/50",children:[u.jsx("td",{className:"px-4 py-2",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-12 h-12 bg-gray-900 rounded-full flex-shrink-0 flex items-center justify-center border-2 ${Zg(D.tier).borderClass} overflow-hidden`,children:u.jsx(Rt,{heroName:D.name,className:"h-full w-full"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:D.name}),u.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1.5 mt-1",children:[u.jsx(zA,{faction:D.faction}),u.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-bold ${FA(D.tier)}`,children:D.tier}),u.jsx("span",{className:"font-mono text-cyan-400",children:D.score.toFixed(2)})]})]})]})}),["top","middle","bottom"].map($=>u.jsx("td",{className:"px-2 py-2 text-center",children:u.jsx("select",{value:Q[$],onChange:V=>ie(D.originalName,$,V.target.value),className:`bg-gray-700 border border-gray-600 rounded-md px-2 py-1 text-xs focus:outline-none focus:ring-2 focus:ring-red-500 font-bold ${Iu(Q[$])}`,children:PA.map(V=>u.jsx("option",{value:V,className:`bg-gray-800 font-bold ${Iu(V)}`,children:V},V))})},$))]},D.originalName)})})]})}),u.jsx(dh,{isOpen:!!v,onClose:()=>S(null),hero:v,heroData:v?r[v.originalName]:null,onSave:({furniture:D,furnitureDupes:Q})=>{v&&d($=>({...$,[v.originalName]:{...$[v.originalName],furniture:D,furnitureDupes:Q}}))},priorities:p,navigate:i}),u.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
            `})]})},$A=({faction:i,className:t})=>{if(i==="Desconocida")return u.jsx("div",{className:`flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0 ${t}`,title:"Faccin Desconocida",children:"?"});const l="https://ik.imagekit.io/optimizerhispania/",a=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!a)return null;const r=`${l}${a}.png`;return u.jsx("img",{src:r,alt:i,title:i,className:`flex-shrink-0 ${t}`})},JA=i=>{switch(i){case"SSS":return{textClass:"text-white",bgClass:"bg-blue-600"};case"SS":return{textClass:"text-white",bgClass:"bg-green-700"};case"S":return{textClass:"text-black",bgClass:"bg-lime-600"};case"A":return{textClass:"text-black",bgClass:"bg-yellow-500"};case"B":return{textClass:"text-white",bgClass:"bg-orange-600"};case"C":return{textClass:"text-white",bgClass:"bg-red-700"};case"D":return{textClass:"text-white",bgClass:"bg-amber-800"};default:return{textClass:"text-white",bgClass:"bg-gray-600"}}},KA=({tier:i})=>{const{textClass:t,bgClass:l}=JA(i);return u.jsx("div",{className:`relative inline-block transform -skew-x-12 ${l} px-3 py-1 shadow-md`,children:u.jsx("span",{className:`block transform skew-x-12 text-center text-base font-bold tracking-wider ${t}`,children:i})})},Wg=({onClick:i})=>u.jsx("button",{onClick:i,className:"text-green-400 hover:text-green-300 transform transition-all duration-300 ease-in-out hover:scale-125 hover:drop-shadow-[0_0_8px_rgba(74,222,128,0.7)]",title:"Aceptar dato de la actualizacin",children:u.jsx(rh,{className:"h-8 w-8"})}),XA=i=>typeof i=="boolean"?i?"S":"No":i==null||i===""?"Vaco":String(i),eh=({build:i})=>u.jsxs("div",{className:"flex flex-col items-center gap-1 p-2 bg-gray-800 rounded-md border border-gray-700",children:[u.jsxs("div",{className:"font-mono text-base",children:[i.requiredSI>0&&u.jsxs("span",{className:"font-bold text-cyan-400",children:["SI",i.requiredSI]}),i.requiredFurniture>0&&u.jsxs("span",{className:"font-bold text-lime-400 ml-2",children:[i.requiredFurniture,"F"]}),i.requiredEngravings>0&&u.jsxs("span",{className:"font-bold text-yellow-400 ml-2",children:["E",i.requiredEngravings]}),i.requiredSI===0&&i.requiredFurniture===0&&i.requiredEngravings===0&&u.jsx("span",{className:"text-gray-500",children:"-"})]}),i.engravingNodes.length>0&&u.jsx("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1",children:i.engravingNodes.map((t,l)=>u.jsxs(_s.Fragment,{children:[u.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-md ${t.found?"bg-blue-800 text-blue-200":"bg-red-800 text-white"}`,children:t.found?t.translated:t.original}),l<i.engravingNodes.length-1&&u.jsx("span",{className:"text-gray-500 text-xs",children:""})]},l))})]}),QA={spanishName:"Nombre Espaol",russianName:"Nombre Ruso",faction:"Faccin",isAwakened:"Despertado",tier:"Tier",score:"Puntuacin",rankingComments:"Comentarios de Ranking",builds:"Builds Recomendadas"},ZA=({isOpen:i,onClose:t,hero:l,onAcceptField:a,onAcceptAll:r})=>{const[d,p]=w.useState(new Set);if(w.useEffect(()=>{i&&p(new Set)},[i,l==null?void 0:l.key]),!i||!l||!l.sourceData)return null;const x=Object.keys(l.sourceData).filter(v=>v!=="rankingComments"),y=v=>{if(x.filter(N=>!d.has(N)).length===1){r(l.key);return}p(N=>new Set(N).add(v)),setTimeout(()=>{a(l.key,v)},500)},h=(v,S)=>{const N=XA(v);return S==="tier"?u.jsx("div",{className:"flex justify-center items-center min-h-[3rem]",children:u.jsx(KA,{tier:v})}):S==="faction"?u.jsxs("div",{className:"text-white text-base flex items-center justify-center gap-2 min-h-[3rem]",children:[u.jsx($A,{faction:v,className:"h-6 w-6"}),u.jsx("span",{children:N})]}):u.jsx("p",{className:"text-white text-base truncate p-2 min-h-[3rem] flex items-center justify-center",title:N,children:N})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,children:u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-yellow-700/80 text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-3xl mx-4 animate-[slide-up_0.4s_ease-out] max-h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex items-center gap-4 relative",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full flex items-center justify-center border-2 border-yellow-600 overflow-hidden flex-shrink-0",children:u.jsx(Rt,{heroName:l.spanishName,className:"h-full w-full"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:l.spanishName}),u.jsx("p",{className:"text-yellow-400",children:"Diferencias con la versin actualizada"})]}),u.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition-colors",children:u.jsx(Yt,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto space-y-3",children:x.map(v=>{var U;const S=d.has(v),N=QA[v]||v,C=l[v],_=l.sourceData[v];if(v==="builds"){const H=l.builds||[],M=((U=l.sourceData)==null?void 0:U.builds)||[];return u.jsxs("div",{className:`bg-gray-900/50 p-3 rounded-lg border border-gray-700 transition-all duration-500 ${S?"item-disappearing":""}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("p",{className:"font-bold text-white",children:N}),u.jsx(Wg,{onClick:()=>y(v)})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsxs("div",{className:"flex-1 space-y-2 text-center",children:[u.jsx("p",{className:"font-semibold text-gray-400 text-sm mb-1",children:"Valor Actual:"}),H.length>0?H.map((O,j)=>u.jsx(eh,{build:O},j)):u.jsx("p",{className:"text-gray-500 text-sm italic p-2",children:"Sin builds"})]}),u.jsxs("div",{className:"flex-1 space-y-2 text-center",children:[u.jsx("p",{className:"font-semibold text-yellow-500 text-sm mb-1",children:"Valor actualizacin:"}),M.length>0?M.map((O,j)=>u.jsx(eh,{build:O},j)):u.jsx("p",{className:"text-gray-500 text-sm italic p-2",children:"Sin builds"})]})]})]},v)}return u.jsxs("div",{className:`bg-gray-900/50 p-3 rounded-lg border border-gray-700 transition-all duration-500 ${S?"item-disappearing":""}`,children:[u.jsx("p",{className:"font-bold text-white mb-2",children:N}),u.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] items-center gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-400 text-center",children:"Valor Actual:"}),u.jsx("div",{className:"bg-gray-800 p-2 rounded-md",children:h(C,v)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-yellow-500 text-center",children:"Valor actualizacin:"}),u.jsx("div",{className:"bg-gray-800 p-2 rounded-md",children:h(_,v)})]}),u.jsx("div",{className:"flex justify-center",children:u.jsx(Wg,{onClick:()=>y(v)})})]})]},v)})}),u.jsxs("footer",{className:"bg-gray-900/50 px-6 py-4 flex flex-col sm:flex-row-reverse gap-3",children:[u.jsx("button",{onClick:()=>r(l.key),className:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-green-700 text-base font-bold text-white hover:bg-green-600",children:"Aceptar Todo"}),u.jsx("button",{onClick:t,className:"w-full sm:w-auto inline-flex justify-center rounded-lg border border-red-800 shadow-sm px-5 py-2.5 bg-red-900/80 text-base font-medium text-red-300 hover:bg-red-800 hover:text-white sm:mt-0",children:"Cancelar"})]})]})})},WA=["Lightbearer","Mauler","Wilder","Graveborn","Celestial","Hipogeo","Dimensional","Draconis","Desconocida"],e_=["SSS","SS","S","A","B","C","D","N/A"],th={SSS:6.5,SS:5,S:4,A:3,B:2,C:1.01,D:.5},nh=i=>{switch(i){case"SSS":return"bg-blue-600 text-white";case"SS":return"bg-green-700 text-white";case"S":return"bg-lime-600 text-black";case"A":return"bg-yellow-500 text-black";case"B":return"bg-orange-600 text-white";case"C":return"bg-red-700 text-white";case"D":return"bg-amber-800 text-white";default:return"bg-gray-600 text-white"}},ih=({faction:i,className:t})=>{if(i==="Desconocida")return u.jsx("div",{className:`flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-gray-400 flex-shrink-0 ${t}`,title:"Faccin Desconocida",children:"?"});const l="https://ik.imagekit.io/optimizerhispania/",a=i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");if(!a)return null;const r=`${l}${a}.png`;return u.jsx("img",{src:r,alt:i,title:i,className:`flex-shrink-0 ${t}`})},t_=i=>{switch(i){case"SSS":return{min:6.5,max:7};case"SS":return{min:5,max:6.5};case"S":return{min:4,max:5};case"A":return{min:3,max:4};case"B":return{min:2,max:3};case"C":return{min:1.01,max:2};case"D":return{min:.5,max:1.01};default:return{min:0,max:7}}},n_=({onClose:i,options:t,onSelect:l,triggerEl:a,renderOption:r,selectedValue:d,modalClassName:p=""})=>{const x=w.useRef(null),[y,h]=w.useState({top:0,left:0});return w.useEffect(()=>{if(a){const v=a.getBoundingClientRect();h({top:v.bottom+window.scrollY+4,left:v.left+window.scrollX})}},[a]),w.useEffect(()=>{const v=S=>{x.current&&!x.current.contains(S.target)&&!a.contains(S.target)&&i()};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[i,a]),lc.createPortal(u.jsx("div",{ref:x,style:{top:y.top,left:y.left},className:`absolute z-50 bg-gray-900 border border-gray-600 rounded-lg shadow-2xl p-1 animate-[fade-in-up_0.2s_ease-out] ${p}`,children:u.jsx("div",{className:"flex flex-col gap-1",children:t.map(v=>u.jsx("button",{onClick:()=>{l(v),i()},className:"w-full text-left rounded-md transition-colors",children:r(v,v===d)},v))})}),document.body)},i_=({isOpen:i,onClose:t,onSave:l,initialNodes:a,customNodes:r,setCustomNodes:d})=>{const[p,x]=w.useState(a),[y,h]=w.useState("");w.useEffect(()=>{i&&x(a)},[i,a]);const v=w.useMemo(()=>{const _=new Map;for(const[U,H]of Object.entries(ah))_.has(H)||_.set(H,U);for(const[U,H]of Object.entries(r))_.has(U)||_.set(U,U);return Array.from(_.entries()).map(([U,H])=>({original:H,translated:U})).sort((U,H)=>U.translated.localeCompare(H.translated))},[r]);if(!i)return null;const S=_=>{x(U=>{if(U.some(H=>H.original===_.original))return U.filter(H=>H.original!==_.original);{const H={original:_.original,translated:_.translated,found:!0};return[...U,H]}})},N=()=>{const _=y.trim();if(!_)return;if(v.find(H=>H.translated.toLowerCase()===_.toLowerCase())){alert("Este nodo ya existe.");return}d(H=>({...H,[_]:_})),h("")},C=new Set(p.map(_=>_.original));return lc.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]",onClick:t,children:u.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-2xl flex flex-col max-h-[90vh]",onClick:_=>_.stopPropagation(),children:[u.jsxs("header",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Editar Nodos de Grabado"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:""})]}),u.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Seleccionados"}),u.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-900 rounded-md min-h-[40px] border border-gray-700",children:p.map((_,U)=>u.jsxs("div",{className:"flex items-center",children:[u.jsxs("button",{onClick:()=>S(_),className:"bg-red-600 hover:bg-red-500 text-white font-bold py-1 px-3 rounded-md flex items-center gap-2",children:[u.jsx("span",{children:_.translated||_.original}),u.jsx("span",{className:"text-xs",children:""})]}),U<p.length-1&&u.jsx("span",{className:"text-gray-500 mx-2",children:">"})]},`${_.original}-${U}`))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Disponibles"}),u.jsx("div",{className:"flex flex-wrap gap-2 p-2 border border-gray-700 rounded-md",children:v.map(_=>{const U=C.has(_.original);return u.jsx("button",{onClick:()=>S(_),className:`font-bold py-1 px-3 rounded-md transition-colors ${U?"bg-gray-600 text-gray-400 line-through":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:_.translated},_.original)})})]}),u.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[u.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Aadir Nuevo Nodo"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:_=>h(_.target.value),placeholder:"Nombre del nuevo nodo (ej. Celeridad)",className:"flex-grow bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white"}),u.jsx("button",{onClick:N,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-md",children:"Aadir"})]})]})]}),u.jsxs("footer",{className:"bg-gray-900/50 px-6 py-4 flex justify-end gap-4",children:[u.jsx("button",{onClick:t,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-md",children:"Cancelar"}),u.jsx("button",{onClick:()=>l(p),className:"bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-md",children:"Guardar"})]})]})}),document.body)},ku=({value:i,onChange:t,options:l,allowManualInput:a=!1})=>u.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[u.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:l.map(r=>u.jsx("button",{onClick:()=>t(r),className:`px-1.5 py-0.5 text-[10px] font-semibold rounded transition-colors w-8 ${i===r?"bg-red-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"}`,children:r},r))}),a&&u.jsx("input",{type:"number",value:i,onChange:r=>t(parseInt(r.target.value)||0),className:"w-16 bg-gray-900 border border-gray-600 rounded-md px-1 py-0.5 text-xs text-white focus:outline-none focus:ring-1 focus:ring-red-500 text-center",min:"0",step:"1"})]}),s_=({navigate:i,database:t,setDatabase:l,onSync:a,isSyncing:r,lastSync:d,syncError:p})=>{const[x,y]=w.useState({key:"score",direction:"desc"}),[h,v]=w.useState(""),[S,N]=w.useState(!1),[C,_]=w.useState(!1),[U,H]=w.useState(!1),[M,O]=w.useState(new Set),[j,ee]=w.useState(null),[ie,ue]=w.useState(!1),[D,Q]=w.useState(null),[$,V]=w.useState(new Set),[oe,Y]=w.useState(null),[ge,me]=lt("custom-engraving-nodes",{}),[Se,k]=w.useState(null);w.useEffect(()=>{sessionStorage.getItem("db-page-initial-filter")==="incomplete"&&(N(!0),sessionStorage.removeItem("db-page-initial-filter"))},[]);const se=w.useMemo(()=>t.find(z=>z.key===Se)||null,[t,Se]),ye=w.useMemo(()=>{if(M.size===0)return"none";const z=t.filter(ae=>M.has(ae.key));return z.length===0?"none":z.every(ae=>ae.isHidden)?"hidden":z.some(ae=>ae.isHidden)?"mixed":"visible"},[M,t]),de=w.useMemo(()=>{let z;if(U?z=t.filter(ae=>ae.isHidden):z=t.filter(ae=>!ae.isHidden),S&&(z=z.filter(ae=>{const pe=!ae.spanishName.trim()||ae.spanishName==="Nuevo Hroe",xe=!ae.key.startsWith("nuevo-heroe-")&&!ae.russianName.trim(),Re=ae.faction==="Desconocida",Oe=ae.tier==="N/A",an=!ae.builds||ae.builds.length===0;return pe||xe||Re||Oe||an})),C&&(z=z.filter(ae=>ae.sourceData&&Object.keys(ae.sourceData).length>0)),h){const ae=h.toLowerCase();z=z.filter(pe=>pe.spanishName.toLowerCase().includes(ae)||pe.russianName.toLowerCase().includes(ae))}const q=z.filter(ae=>ae.key.startsWith("nuevo-heroe-"));let Z=z.filter(ae=>!ae.key.startsWith("nuevo-heroe-"));return Z.sort((ae,pe)=>{if(ae.status!==pe.status)return ae.status==="removed_from_source"?1:-1;let xe=ae[x.key],Re=pe[x.key];if(x.key==="tier"){const Oe={SSS:1,SS:2,S:3,A:4,B:5,C:6,D:7,"N/A":99};xe=Oe[ae.tier]||99,Re=Oe[pe.tier]||99}else typeof xe=="string"&&(xe=xe.toLowerCase());return typeof Re=="string"&&(Re=Re.toLowerCase()),xe<Re?x.direction==="asc"?-1:1:xe>Re?x.direction==="asc"?1:-1:0}),[...q.reverse(),...Z]},[t,x,h,S,C,U]),be=z=>{y(q=>({key:z,direction:q.key===z&&q.direction==="asc"?"desc":"asc"}))},E=w.useCallback((z,q,Z)=>{l(ae=>ae.map(pe=>{if(pe.key!==z)return pe;const xe={[q]:Z,isUserModified:!0};if(q==="tier"&&pe.key.startsWith("nuevo-heroe-")&&(pe.score===0||pe.score===th[pe.tier])){const Oe=th[Z]||0;Oe>0&&(xe.score=Oe)}let Re={...pe,...xe};if(Re.sourceData&&Re.sourceData[q]!==void 0){const Oe={...Re.sourceData};delete Oe[q],Re.sourceData=Object.keys(Oe).length>0?Oe:void 0}return Re}))},[l]),J=w.useCallback((z,q,Z,ae)=>{l(pe=>pe.map(xe=>{var an;if(xe.key!==z)return xe;const Re=JSON.parse(JSON.stringify(xe.builds));if(!Re[q])return xe;Re[q][Z]=ae;const Oe={...xe,builds:Re,isUserModified:!0};if((an=Oe.sourceData)!=null&&an.builds){const Tt={...Oe.sourceData};delete Tt.builds,Oe.sourceData=Object.keys(Tt).length>0?Tt:void 0}return Oe}))},[l]),fe=w.useCallback((z,q)=>{l(Z=>Z.map(ae=>{var Re;if(ae.key!==z)return ae;const pe=ae.builds.map(Oe=>({...Oe,engravingNodes:q})),xe={...ae,builds:pe,isUserModified:!0};if((Re=xe.sourceData)!=null&&Re.builds){const Oe={...xe.sourceData};delete Oe.builds,xe.sourceData=Object.keys(Oe).length>0?Oe:void 0}return xe}))},[l]),I=z=>{l(q=>q.map(Z=>{var xe;if(Z.key!==z)return Z;const pe={group:"N/A",priorityComment:"",requiredSI:0,requiredFurniture:0,requiredEngravings:0,engravingNodes:((xe=Z.builds[0])==null?void 0:xe.engravingNodes)||[],isAlternative:Z.builds.length>0};return{...Z,builds:[...Z.builds||[],pe],isUserModified:!0}}))},K=(z,q)=>{l(Z=>Z.map(ae=>{if(ae.key!==z)return ae;const pe=ae.builds.filter((xe,Re)=>Re!==q);return{...ae,builds:pe,isUserModified:!0}}))},te=w.useCallback((z,q)=>{const Z=t.find(ae=>ae.key===z);if(Z&&Z.sourceData&&Z.sourceData[q]!==void 0)if(q==="builds"){const ae=Z.sourceData.builds;l(pe=>pe.map(xe=>{if(xe.key!==z)return xe;const Re={...xe,builds:ae,isUserModified:!0};if(Re.sourceData){const{builds:Oe,...an}=Re.sourceData;Re.sourceData=Object.keys(an).length>0?an:void 0}return Re}))}else E(z,q,Z.sourceData[q])},[t,E,l]),ce=w.useCallback(z=>{l(q=>q.map(Z=>Z.key===z&&Z.sourceData?{...Z,...Z.sourceData,isUserModified:!0,sourceData:void 0}:Z)),k(null)},[l]),Ee=()=>{const z=`nuevo-heroe-${Date.now()}`;l(q=>[{key:z,russianName:"",spanishName:"Nuevo Hroe",faction:"Desconocida",isAwakened:!1,isHidden:!1,tier:"N/A",score:0,rankingComments:"",builds:[],portraitStatus:"missing",isUserModified:!0,status:"active"},...q]),V(q=>new Set(q).add(z))},Ne=()=>{j&&(l(z=>z.filter(q=>q.key!==j.key)),ee(null))},Ve=z=>{O(q=>{const Z=new Set(q);return Z.has(z)?Z.delete(z):Z.add(z),Z})},Ae=()=>{M.size===de.length?O(new Set):O(new Set(de.map(z=>z.key)))},L=z=>{V(q=>{const Z=new Set(q);return Z.has(z)?Z.delete(z):Z.add(z),Z})},ne=()=>{l(z=>z.map(q=>M.has(q.key)&&q.sourceData?{...q,...q.sourceData,isUserModified:!0,sourceData:void 0}:q)),O(new Set)},ve=z=>{l(q=>q.map(Z=>M.has(Z.key)?{...Z,isUserModified:!0,isHidden:z}:Z)),O(new Set)},ke=()=>{l(z=>z.filter(q=>!M.has(q.key))),O(new Set),ue(!1)},Qe="border border-gray-700/50 rounded-md px-2 py-1 w-full focus:outline-none focus:ring-2 focus:ring-red-500 transition-all",Ue=`${Qe} bg-gray-900/50 focus:bg-gray-800/80`,ht=M.size>0&&M.size===de.length,xt=w.useMemo(()=>D?t.find(z=>z.key===D.key):null,[D,t]),dn=["Retrato","Spanish Name","Russian Name","Score","Tier","Faccin","Despertado","Acciones"],fn=w.useMemo(()=>{var q;if(!oe)return[];const z=t.find(Z=>Z.key===oe.heroKey);return((q=z==null?void 0:z.builds[0])==null?void 0:q.engravingNodes)||[]},[oe,t]),Ds=ye==="none",gi=ye==="hidden";return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"bg-gray-800/70 backdrop-blur-sm p-6 rounded-xl mb-6 border border-gray-700/80",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-extrabold text-white text-shadow-heavy",children:"Base de Datos de Hroes"}),u.jsxs("p",{className:"text-base text-gray-300",children:["ltima sincronizacin: ",d?new Date(d).toLocaleString("es-ES"):"Nunca"]})]}),u.jsxs("div",{className:"flex items-center gap-4 justify-end flex-wrap",children:[u.jsxs("div",{className:"flex items-center bg-gray-900/60 p-1 rounded-lg border border-gray-700/50 shadow-md space-x-1",children:[u.jsxs("button",{onClick:ne,disabled:M.size===0,title:"Aceptar cambios de la gua para la seleccin",className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-all duration-300 disabled:cursor-not-allowed bg-blue-600 text-white enabled:hover:bg-blue-700 enabled:hover:shadow-[0_0_10px_rgba(59,130,246,0.6)] disabled:bg-gray-700 disabled:text-gray-400",children:[u.jsx("i",{className:"fas fa-check-double"}),u.jsxs("span",{children:["Aceptar (",M.size,")"]})]}),u.jsx("button",{onClick:()=>ve(!gi),disabled:Ds,title:gi?"Mostrar hroes seleccionados":"Ocultar hroes seleccionados",className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-all duration-300 disabled:cursor-not-allowed bg-gray-700 text-gray-200 enabled:hover:bg-gray-600 disabled:bg-gray-700 disabled:text-gray-400",children:gi?u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-eye"}),u.jsx("span",{children:"Mostrar"})]}):u.jsxs(u.Fragment,{children:[u.jsx("i",{className:"fas fa-eye-slash"}),u.jsx("span",{children:"Ocultar"})]})}),u.jsxs("button",{onClick:()=>ue(!0),disabled:M.size===0,title:"Borrar hroes seleccionados",className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-all duration-300 disabled:cursor-not-allowed bg-red-900 text-red-300 enabled:hover:bg-red-800 enabled:hover:text-white enabled:hover:shadow-[0_0_10px_rgba(153,27,27,0.6)] disabled:bg-gray-700 disabled:text-gray-400",children:[u.jsx("i",{className:"fas fa-trash"}),u.jsxs("span",{children:["Borrar (",M.size,")"]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:Ee,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md flex items-center gap-2 transition-all duration-300 hover:shadow-[0_0_15px_rgba(74,222,128,0.6)]",children:[u.jsx("i",{className:"fas fa-plus"}),u.jsx("span",{children:"Aadir Hroe"})]}),u.jsxs("button",{onClick:()=>a(!0),disabled:r,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md flex items-center gap-2 transition-all duration-300 disabled:bg-gray-500 hover:shadow-[0_0_15px_rgba(220,38,38,0.6)]",children:[r?u.jsx($t,{className:"h-5 w-5"}):u.jsx("i",{className:"fas fa-sync-alt"}),u.jsx("span",{children:"Forzar Sincronizacin"})]})]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 w-full pt-4 border-t border-gray-700/50 mt-4",children:[u.jsxs("div",{className:"relative w-full sm:w-auto",children:[u.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:z=>v(z.target.value),className:"bg-gray-900/50 border border-gray-700/50 rounded-md pl-10 pr-4 py-2 text-white w-full sm:w-72 focus:ring-2 focus:ring-red-500 focus:outline-none"})]}),u.jsxs("div",{className:"flex items-center gap-x-6 gap-y-2 flex-wrap justify-center sm:justify-end",children:[u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Mostrar Incompletos"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:S,onChange:()=>N(!S)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${S?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${S?"transform translate-x-4":""}`})]})]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Mostrar con Cambios"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:C,onChange:()=>_(!C)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${C?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${C?"transform translate-x-4":""}`})]})]}),u.jsxs("label",{className:"flex items-center cursor-pointer",children:[u.jsx("span",{className:"mr-3 text-sm text-gray-300",children:"Mostrar Ocultos"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:U,onChange:()=>H(!U)}),u.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${U?"bg-red-600":"bg-gray-600"}`}),u.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${U?"transform translate-x-4":""}`})]})]})]})]}),p&&u.jsx("div",{className:"mt-4 bg-red-900 text-red-200 p-3 rounded-md",children:p})]}),u.jsx("div",{className:"flex-grow overflow-auto",children:u.jsxs("table",{className:"min-w-full text-sm text-left",children:[u.jsx("thead",{className:"sticky top-0 z-10",children:u.jsxs("tr",{className:"bg-gradient-to-b from-gray-900 to-gray-800 border-b-2 border-red-700",children:[u.jsx("th",{className:"p-3 w-px text-center",children:u.jsx("input",{type:"checkbox",checked:ht,onChange:Ae,className:"h-4 w-4 rounded bg-gray-600 border-gray-500 text-red-500 focus:ring-red-500"})}),dn.map(z=>{const q=z.toLowerCase().replace(/ /g,""),Z=["spanishname","russianname","score","tier"].includes(q);return u.jsxs("th",{className:`p-3 text-center font-bold text-gray-300 uppercase tracking-wider ${Z?"cursor-pointer hover:bg-gray-700/50":""}`,onClick:()=>Z&&be(q),children:[z,Z&&x.key===q&&(x.direction==="asc"?" ":" ")]},z)})]})}),u.jsx("tbody",{children:de.map(z=>{var pe;const q=z.sourceData&&Object.keys(z.sourceData).length>0,Z=t_(z.tier),ae=z.tier!=="N/A"&&(z.score<Z.min||(z.tier==="SSS"?z.score>Z.max:z.score>=Z.max));return u.jsxs(_s.Fragment,{children:[u.jsxs("tr",{className:`
                                        transition-colors border-b border-gray-700/50 
                                        ${z.status==="removed_from_source"?"bg-red-900/40 opacity-60 line-through text-gray-500 pointer-events-none":`bg-gray-800/80 hover:bg-gray-700/80 ${q?"mismatch-row-animated":""}`}
                                        ${z.isHidden&&z.status!=="removed_from_source"?"opacity-50":""}
                                    `,children:[u.jsx("td",{className:"p-2 align-middle text-center",children:u.jsx("input",{type:"checkbox",checked:M.has(z.key),onChange:()=>Ve(z.key),className:"h-4 w-4 rounded bg-gray-600 border-gray-500 text-red-500 focus:ring-red-500"})}),u.jsx("td",{className:"p-2 align-top",children:u.jsx(Rt,{heroName:z.spanishName,className:"h-12 w-12 rounded-full"})}),["spanishName","russianName"].map(xe=>u.jsx("td",{className:"p-2 align-top",children:u.jsx("div",{className:"flex flex-col gap-1",children:u.jsx("input",{type:"text",value:z[xe],onChange:Re=>E(z.key,xe,Re.target.value),className:Ue})})},xe)),u.jsx("td",{className:"p-2 align-top text-center",children:u.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[u.jsx("input",{type:"number",step:"0.01",value:z.score,onChange:xe=>E(z.key,"score",parseFloat(xe.target.value)||0),className:`${Ue} w-20`}),ae&&u.jsxs("div",{className:"bg-red-900/50 border border-red-700 p-1.5 rounded-md text-xs flex items-center justify-between gap-2 animate-[fade-in_0.3s_ease-out]",children:[u.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[u.jsx("i",{className:"fas fa-exclamation-triangle text-red-300 fa-fw"}),u.jsx("span",{className:"font-semibold text-red-300 truncate",title:`Debe estar entre ${Z.min.toFixed(2)} y ${z.tier==="SSS"?Z.max.toFixed(2):(Z.max-.01).toFixed(2)}`,children:"Fuera de rango"})]}),u.jsx("button",{onClick:()=>E(z.key,"score",Z.min),className:"bg-red-600 hover:bg-red-700 text-white rounded px-2 py-0.5 text-xs font-bold shrink-0",title:`Fijar a ${Z.min}`,children:"Corregir"})]})]})}),u.jsx("td",{className:"p-2 align-top text-center",children:u.jsx("div",{className:"flex flex-col items-center gap-1",children:u.jsx("button",{onClick:xe=>Q({type:"tier",key:z.key,triggerEl:xe.currentTarget}),className:`${Qe} font-bold ${nh(z.tier)} w-24 text-center flex justify-center items-center`,children:u.jsx("span",{children:z.tier})})})}),u.jsx("td",{className:"p-2 align-top text-center",children:u.jsx("div",{className:"flex flex-col items-center gap-1",children:u.jsxs("button",{onClick:xe=>Q({type:"faction",key:z.key,triggerEl:xe.currentTarget}),className:`${Qe} bg-gray-900/50 hover:bg-gray-800/80 flex items-center gap-2 w-full`,children:[u.jsx(ih,{faction:z.faction,className:"w-6 h-6"}),u.jsx("span",{className:"flex-grow text-left",children:z.faction})]})})}),u.jsx("td",{className:"p-2 align-middle",children:u.jsx("div",{className:"flex items-center justify-center",children:u.jsx("button",{onClick:()=>E(z.key,"isAwakened",!z.isAwakened),className:`
                                                        w-9 h-9 rounded-full flex items-center justify-center transition-colors duration-300
                                                        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800
                                                        ${z.isAwakened?"awakened-db-glow bg-purple-600 focus:ring-purple-400":"bg-gray-600 hover:bg-gray-500 focus:ring-gray-500"}
                                                    `,"aria-pressed":z.isAwakened,title:z.isAwakened?"Marcar como no despertado":"Marcar como despertado",children:u.jsx("div",{className:"flex items-center justify-center",children:z.isAwakened?u.jsx("i",{className:"fas fa-check text-white text-lg"}):u.jsx("i",{className:"fas fa-times text-white text-lg"})})})})}),u.jsx("td",{className:"p-2 align-middle text-center",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("button",{onClick:()=>E(z.key,"isHidden",!z.isHidden),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded-md text-xs",title:z.isHidden?"Mostrar hroe":"Ocultar hroe",children:u.jsx("i",{className:`fas ${z.isHidden?"fa-eye":"fa-eye-slash"}`})}),q&&u.jsx("button",{onClick:()=>k(z.key),className:"bg-gray-600 hover:bg-gray-500 font-bold py-1 px-3 rounded-md text-xs mismatch-button-animated",title:"Ver diferencias con la gua",children:u.jsx("i",{className:"fas fa-lightbulb text-yellow-300"})}),u.jsx("button",{onClick:()=>L(z.key),className:`${$.has(z.key)?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-500"} text-white font-bold py-1 px-3 rounded-md text-xs transition-colors`,children:$.has(z.key)?"Ocultar":"Detalles"}),z.status==="removed_from_source"&&u.jsx("button",{onClick:()=>ee(z),className:"bg-red-800 hover:bg-red-700 text-white font-bold py-1 px-3 rounded-md text-xs",title:"Borrar hroe de la base de datos local",children:"Borrar"})]})})]}),$.has(z.key)&&u.jsx("tr",{className:"bg-gray-800/50",children:u.jsx("td",{colSpan:dn.length+1,children:u.jsx("div",{className:"bg-gray-900 rounded-lg border-2 border-red-700 shadow-2xl p-6 m-2 animate-[fade-in_0.3s_ease-out]",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"md:col-span-1",children:[u.jsx("h4",{className:"font-bold text-lg text-white mb-3 border-l-4 border-red-600 pl-3",children:"Comentarios de Ranking"}),u.jsx("div",{className:"flex flex-col gap-1",children:u.jsx("textarea",{value:z.rankingComments,onChange:xe=>E(z.key,"rankingComments",xe.target.value),className:`${Ue} h-full min-h-[150px] resize-y`})})]}),u.jsxs("div",{className:"md:col-span-1 bg-gray-900/50 p-4 rounded-lg border border-gray-700/50 h-full flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0",children:[u.jsx("h4",{className:"font-bold text-lg text-white mb-3 border-l-4 border-red-600 pl-3",children:"Nodos de Grabado (Comn)"}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("div",{className:"flex-grow bg-gray-800 p-1.5 rounded-md min-h-[28px] flex flex-wrap gap-1 border border-gray-600",children:(((pe=z.builds[0])==null?void 0:pe.engravingNodes)||[]).map((xe,Re)=>u.jsx("span",{className:"bg-blue-800 text-blue-200 text-xs px-2 py-0.5 rounded",children:xe.translated||xe.original},Re))}),u.jsx("button",{onClick:()=>Y({heroKey:z.key,buildIndex:0}),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded text-xs",children:"Editar"})]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/80 flex-grow",children:[u.jsx("h4",{className:"font-bold text-lg text-white mb-3 border-l-4 border-red-600 pl-3",children:"Builds Recomendadas"}),u.jsx("div",{className:"flex flex-col gap-3",children:(z.builds||[]).map((xe,Re)=>u.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-gray-600/50 relative",children:[u.jsx("button",{onClick:()=>K(z.key,Re),className:"absolute -top-2 -right-2 bg-red-700 hover:bg-red-600 rounded-full w-5 h-5 flex items-center justify-center text-white text-xs z-10",children:""}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"SI"}),u.jsx(ku,{value:xe.requiredSI,onChange:Oe=>J(z.key,Re,"requiredSI",Oe),options:[0,20,30,40],allowManualInput:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Muebles"}),u.jsx(ku,{value:xe.requiredFurniture,onChange:Oe=>J(z.key,Re,"requiredFurniture",Oe),options:[0,3,9],allowManualInput:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Grabado"}),u.jsx(ku,{value:xe.requiredEngravings,onChange:Oe=>J(z.key,Re,"requiredEngravings",Oe),options:[0,30,60],allowManualInput:!0})]})]})]},Re))})]}),u.jsx("div",{className:"mt-auto pt-4 space-y-2 flex-shrink-0",children:u.jsx("button",{onClick:()=>I(z.key),className:"text-sm bg-red-800/70 hover:bg-red-800 border border-red-700/50 text-white font-bold py-2 px-3 rounded w-full",children:"+ Aadir Build"})})]})]})})})})]},z.key)})})]})}),D&&xt&&u.jsx(n_,{onClose:()=>Q(null),options:D.type==="tier"?e_:WA,onSelect:z=>E(D.key,D.type,z),selectedValue:xt[D.type],triggerEl:D.triggerEl,renderOption:(z,q)=>D.type==="tier"?u.jsx("div",{className:`p-1 rounded w-full text-center ${nh(z)} ${q?"ring-2 ring-white":""}`,children:z}):u.jsxs("div",{className:`flex items-center gap-2 p-1 rounded w-full hover:bg-gray-700 ${q?"bg-red-800":""}`,children:[u.jsx(ih,{faction:z,className:"w-6 h-6"}),u.jsx("span",{children:z})]}),modalClassName:D.type==="tier"?"w-24":"w-40"}),u.jsxs(mi,{isOpen:!!j,onClose:()=>ee(null),onConfirm:Ne,title:"Confirmar Borrado de Hroe",children:[u.jsxs("p",{children:["Ests seguro de que quieres eliminar permanentemente a ",u.jsx("span",{className:"font-bold text-white",children:j==null?void 0:j.spanishName})," de tu base de datos local?"]}),u.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Este hroe ha sido eliminado de la hoja de clculo de origen. Esta accin no se puede deshacer."})]}),u.jsxs(mi,{isOpen:ie,onClose:()=>ue(!1),onConfirm:ke,title:`Confirmar Borrado de ${M.size} Hroe(s)`,children:[u.jsxs("p",{children:["Ests seguro de que quieres eliminar permanentemente los ",u.jsxs("span",{className:"font-bold text-white",children:[M.size," hroe(s)"]})," seleccionados de tu base de datos local?"]}),u.jsx("p",{className:"mt-4 font-bold",children:"Esta accin no se puede deshacer."})]}),u.jsx(i_,{isOpen:!!oe,onClose:()=>Y(null),initialNodes:fn,onSave:z=>{oe&&fe(oe.heroKey,z),Y(null)},customNodes:ge,setCustomNodes:me}),u.jsx(ZA,{isOpen:!!se,onClose:()=>k(null),hero:se,onAcceptField:te,onAcceptAll:ce}),u.jsx("style",{children:`
                    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
                    @keyframes fade-in-up { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
                    @keyframes slide-up { from { transform: translateY(2rem) scale(0.95); opacity: 0; } to { opacity: 1; } }
                `})]})},l_=({isOpen:i,onClose:t,onConfirm:l,lastBackupDate:a})=>{if(!i)return null;const r=a?`Tu ltima copia fue guardada el: ${new Date(a).toLocaleString("es-ES")}`:"Parece que nunca has guardado una copia de seguridad.";return u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 transition-opacity duration-300 ease-out animate-[fade-in_0.3s_ease-out]","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onClick:t,children:[u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl border border-gray-700/80 text-left overflow-hidden transform transition-all duration-300 ease-out w-full max-w-md mx-4 animate-[slide-up_0.4s_ease-out]",onClick:d=>d.stopPropagation(),children:[u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"sm:flex sm:items-start",children:[u.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gradient-to-br from-sky-800 to-blue-800 sm:mx-0 sm:h-10 sm:w-10",children:u.jsx(uh,{className:"h-6 w-6 text-sky-300"})}),u.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[u.jsx("h3",{className:"text-xl leading-6 font-bold text-white",id:"modal-title",children:"Recordatorio de Copia de Seguridad"}),u.jsxs("div",{className:"mt-2 text-sm text-gray-300 space-y-2",children:[u.jsx("p",{children:"Ha pasado ms de un mes desde tu ltima copia de seguridad local."}),u.jsx("p",{children:"Te recomendamos crear una copia para proteger tu progreso y configuraciones."}),u.jsx("p",{className:"text-xs text-gray-500 mt-4",children:r})]})]})]})}),u.jsxs("div",{className:"bg-gray-900/50 px-6 py-4 sm:flex sm:flex-row-reverse",children:[u.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-blue-600 text-base font-bold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-300 hover:shadow-[0_0_15px_rgba(59,130,246,0.6)]",onClick:l,children:"Crear copia ahora"}),u.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-600 shadow-sm px-5 py-2.5 bg-gray-700 text-base font-medium text-gray-200 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-gray-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors",onClick:t,children:"Recordrmelo ms tarde"})]})]}),u.jsx("style",{children:`
                    @keyframes fade-in {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes slide-up {
                        from { transform: translateY(2rem) scale(0.95); opacity: 0; }
                        to { transform: translateY(0) scale(1); opacity: 1; }
                    }
                `})]})},a_=()=>{const[i,t]=w.useState("landing"),[l,a]=lt("afk-settings",{sheetUrl:lh,autoUpdate:!0,cloudConfigured:!1,showTips:!0}),[r,d]=lt("hero-database",[]),[p,x]=lt("hero-db-last-sync",null),[y,h]=w.useState(!1),[v,S]=w.useState(null),[N,C]=w.useState(()=>{const V=sessionStorage.getItem("cloudBannerDismissed");return!l.cloudConfigured&&!V}),[_]=lt("last-manual-backup-date",null),[U,H]=w.useState(!1),[M,O]=w.useState(!1),j=w.useCallback(async(V=!1)=>{h(!0),S(null);try{const oe=await Xh(l.sheetUrl,r);d(oe),x(new Date().toISOString())}catch(oe){console.error("Sync failed:",oe),S(oe.message||"No se pudieron sincronizar los datos.")}finally{h(!1)}},[l.sheetUrl,r,d,x]);w.useEffect(()=>{(()=>{r.length>0&&r.some(Y=>!Y.spanishName||!Y.faction||Y.faction==="Desconocida"||!Y.tier||Y.tier==="N/A")&&O(!0)})()},[r]),w.useEffect(()=>{(()=>{const Y=p?new Date(p).getTime():0,ge=new Date().getTime(),me=!p||ge-Y>864e5;(r.length===0||l.autoUpdate&&me)&&j()})()},[]),w.useEffect(()=>{if(sessionStorage.getItem("backupReminderDismissed"))return;const oe=720*60*60*1e3;_?new Date().getTime()-new Date(_).getTime()>oe&&H(!0):H(!0)},[_]);const ee=()=>{Qh(),H(!1),sessionStorage.setItem("backupReminderDismissed","true")},ie=()=>{sessionStorage.setItem("backupReminderDismissed","true"),H(!1)},ue=()=>{sessionStorage.setItem("cloudBannerDismissed","true"),C(!1)},D=w.useCallback(V=>{t(V)},[]),Q=()=>{a(V=>{const oe=!V.showTips;return oe&&sessionStorage.removeItem("tipWidgetClosed"),{...V,showTips:oe}})},$=()=>{const V={navigate:D,database:r,setDatabase:d,onSync:j,isSyncing:y,syncError:v,lastSync:p,settings:l};switch(i){case"ranking":return u.jsx(fA,{...V});case"priority":return u.jsx(UA,{...V});case"furniture-duplicates":return u.jsx(YA,{...V});case"roadmap":return u.jsx(BA,{navigate:D,database:r,settings:l});case"options":return u.jsx(xA,{...V,setSettings:a});case"roster":return u.jsx(_A,{...V});case"database":return u.jsx(s_,{...V});case"landing":default:return u.jsx(Vy,{navigate:D})}};return u.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 font-sans flex flex-col",children:[u.jsx(Ry,{navigate:D,currentPage:i,onToggleTips:Q,showTips:l.showTips}),M&&i==="landing"&&u.jsxs("div",{className:"bg-yellow-900 text-yellow-100 text-sm text-center p-2 flex items-center justify-center gap-4 relative",children:[u.jsx("span",{children:" Se han detectado datos de hroes incompletos. Por favor, revsalos en el modo avanzado para asegurar el correcto funcionamiento de la app."}),u.jsx("button",{onClick:()=>{sessionStorage.setItem("db-page-initial-filter","incomplete"),D("database")},className:"font-bold underline hover:text-yellow-300",children:"Ir a la Base de Datos"}),u.jsx("button",{onClick:()=>O(!1),className:"font-bold text-lg leading-none hover:text-yellow-300 absolute right-2 top-1/2 -translate-y-1/2",children:""})]}),N&&u.jsxs("div",{className:"bg-sky-900 text-sky-100 text-sm text-center p-2 flex items-center justify-center gap-4 relative",children:[u.jsx("span",{children:" Para proteger tus datos, considera configurar una copia de seguridad en la nube en Opciones."}),u.jsx("button",{onClick:ue,className:"font-bold text-lg leading-none hover:text-sky-300 absolute right-2 top-1/2 -translate-y-1/2",children:""})]}),u.jsxs("main",{className:"flex-grow container mx-auto p-4 md:p-6",children:[y&&r.length===0&&u.jsxs("div",{className:"text-center py-20",children:[u.jsx("i",{className:"fas fa-sync-alt fa-spin fa-3x text-red-500"}),u.jsx("p",{className:"mt-4 text-lg text-gray-300",children:"Sincronizando datos por primera vez..."})]}),!y&&r.length===0&&u.jsxs("div",{className:"text-center py-20 bg-gray-800 p-6 rounded-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-yellow-400",children:"Bienvenido!"}),u.jsx("p",{className:"mt-2 text-gray-400",children:"No se encontraron datos locales. Por favor, realiza una sincronizacin para cargar la informacin de los hroes."}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Si el problema persiste, revisa la URL de la hoja de clculo en Opciones."}),u.jsx("button",{onClick:()=>j(!0),className:"mt-6 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md",children:"Sincronizar Ahora"}),v&&u.jsx("p",{className:"text-red-400 mt-4",children:v})]}),r.length>0&&$()]}),u.jsx("footer",{className:"text-center p-4 text-gray-500 text-sm",children:u.jsxs("p",{children:["Gremio",u.jsxs("span",{className:"inline-flex items-center gap-1.5 mx-1",children:[u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-3"}),u.jsx("span",{className:"font-semibold text-gray-400",children:"HISPANIA"}),u.jsx("img",{src:"https://flagcdn.com/es.svg",alt:"Bandera de Espaa",className:"h-3"})]}),"ID: 7642"]})}),u.jsx(l_,{isOpen:U&&i==="landing",onClose:ie,onConfirm:ee,lastBackupDate:_})]})},Wh=document.getElementById("root");if(!Wh)throw new Error("Could not find root element to mount to");const o_=Cy.createRoot(Wh);o_.render(u.jsx(_s.StrictMode,{children:u.jsx(a_,{})}));
